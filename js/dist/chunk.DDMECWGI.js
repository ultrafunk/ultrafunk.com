const k=!1;class N{constructor(e="unknown"){this.caller=$(e.toUpperCase(),20,".")}isDebug(){return k}warn(e){console.warn(`${this.caller}:`,e)}error(e){console.error(`${this.caller}:`,e)}}class B extends N{constructor(e){super(e)}log(e){console.log(`${this.caller}:`,e)}logEventLog(e,t,r){const n=[];for(let s=0;s<e.length;s++){const u={eventSource:this.getObjectKeyForValue(t,e[s].eventSource),eventType:this.getObjectKeyForValue(r,e[s].eventType),uId:e[s].uId,timeStamp:e[s].timeStamp};n.push(u)}this.log(n)}getObjectKeyForValue(e,t){return Object.keys(e).find(r=>e[r]===t)}}class R extends N{constructor(e){super(e)}log(){}logEventLog(){}getObjectKeyForValue(){}}function d(e){return k===!0?new B(e):new R(e)}function $(e,t,r){return e.length>t?e.slice(0,t):e.padEnd(t,r)}const v=d("settings"),a={INTEGER:"integer",BOOLEAN:"boolean",STRING:"string"},o={keyboardShortcuts:{description:"Keyboard Shortcuts",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},masterVolume:{description:"Master Volume",type:a.INTEGER,values:[0,25,50,75,100],default:100,valueStrings:["0%","25%","50%","75%","100%"]},masterMute:{description:"Master Mute",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoPlay:{description:"Autoplay next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoCrossfade:{description:"Auto Crossfade to next track",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoCrossfadeLength:{description:"Auto Crossfade Length",type:a.INTEGER,values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},autoCrossfadeCurve:{description:"Auto Crossfade Curve",type:a.INTEGER,values:[0,1],default:1,valueStrings:["EQUAL POWER","LINEAR"]},autoScroll:{description:"Autoscroll to next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},smoothScrolling:{description:"Smooth Scrolling to next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoExitFullscreen:{description:"Exit Fullscreen on next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},animateNowPlayingIcon:{description:"Animate Playing Track Icon",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoResumePlayback:{description:"Auto Resume Playback on focus",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackCrossfade:{description:"Track to Track Crossfade",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},trackCrossfadeLength:{description:"Track to Track Crossfade Length",type:a.INTEGER,values:[5,10,15,20,25,30],default:10,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},trackCrossfadeCurve:{description:"Track to Track Crossfade Curve",type:a.INTEGER,values:[0,1],default:0,valueStrings:["EQUAL POWER","LINEAR"]},timeRemainingWarning:{description:"Time Remaining Warning",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},timeRemainingSeconds:{description:"Time Remaining Warning Seconds",type:a.INTEGER,values:[15,30,45,60],default:60,valueStrings:["15 sec","30 sec","45 sec","60 sec"]},autoExitFsOnWarning:{description:"Exit Fullscreen on Time Warning",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},keepMobileScreenOn:{description:"Keep Mobile Screen On when playing",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackTimesOnMobile:{description:"Show Track Times on mobile",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackThumbnailOnMobile:{description:"Show Track Thumbnail on mobile",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},f={continueAutoPlay:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:[]},showLeftArrowHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showRightArrowHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showDetailsHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showTrackImageHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]}},X={version:22,storageChangeSync:!1,user:{keyboardShortcuts:o.keyboardShortcuts.default,masterVolume:o.masterVolume.default,masterMute:o.masterMute.default,autoPlay:o.autoPlay.default,autoCrossfade:o.autoCrossfade.default,autoCrossfadeLength:o.autoCrossfadeLength.default,autoCrossfadeCurve:o.autoCrossfadeCurve.default,autoScroll:o.autoScroll.default,smoothScrolling:o.smoothScrolling.default,autoExitFullscreen:o.autoExitFullscreen.default,animateNowPlayingIcon:o.animateNowPlayingIcon.default,autoResumePlayback:o.autoResumePlayback.default,trackCrossfade:o.trackCrossfade.default,trackCrossfadeLength:o.trackCrossfadeLength.default,trackCrossfadeCurve:o.trackCrossfadeCurve.default,timeRemainingWarning:o.timeRemainingWarning.default,timeRemainingSeconds:o.timeRemainingSeconds.default,autoExitFsOnWarning:o.autoExitFsOnWarning.default,keepMobileScreenOn:o.keepMobileScreenOn.default,trackTimesOnMobile:o.trackTimesOnMobile.default,trackThumbnailOnMobile:o.trackThumbnailOnMobile.default},priv:{continueAutoPlay:f.continueAutoPlay.default,showLeftArrowHint:f.showLeftArrowHint.default,showRightArrowHint:f.showRightArrowHint.default,showDetailsHint:f.showDetailsHint.default,showTrackImageHint:f.showTrackImageHint.default}},m={theme:{description:"Theme",type:a.STRING,values:["light","dark","auto"],default:"auto",valueStrings:["LIGHT","DARK","AUTO / SYSTEM"]},trackLayout:{description:"Track Layout",type:a.STRING,values:["list","2-column","3-column"],default:"3-column",valueStrings:["LIST","2 COLUMN","3 / 4 COLUMN"]},tracksPerPage:{description:"Tracks Per Page for Search &amp; Shuffle",type:a.INTEGER,values:[...Array(22).keys()].map(e=>e+3),default:12,valueStrings:[...Array(22).keys()].map(e=>`${e+3}`)},keyboardShortcuts:{description:"Keyboard Shortcuts",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},y={showFrontpageIntro:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showPremiumIntro:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showPromoIntro:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]}},z={version:6,storageChangeSync:!1,user:{theme:m.theme.default,trackLayout:m.trackLayout.default,tracksPerPage:m.tracksPerPage.default,keyboardShortcuts:m.keyboardShortcuts.default},priv:{banners:{showFrontpageIntro:y.showFrontpageIntro.default,showPremiumIntro:y.showPremiumIntro.default,showPromoIntro:y.showPromoIntro.default}}};function Z(e,t){Object.entries(e).forEach(([r,n])=>{if(r in t)switch(t[r].type){case a.INTEGER:(Number.isInteger(n)===!1||n<t[r].values[0]||n>t[r].values[t[r].values.length-1])&&(v.warn(`validateSettings() - ${r} has invalid value: ${n} (${r} is type: ${t[r].type} - min: ${t[r].values[0]} - max: ${t[r].values[t[r].values.length-1]}) -- setting default value: ${t[r].default}`),e[r]=t[r].default);break;case a.BOOLEAN:n!==!0&&n!==!1&&(v.warn(`validateSettings() - ${r} has invalid value: ${n} (${r} is type: ${t[r].type}) -- setting default value: ${t[r].default}`),e[r]=t[r].default);break;case a.STRING:break;default:v.warn(`validateSettings() - ${r} has unknown type: ${t[r].type}`)}else v.warn(`validateSettings() - ${r} with value: ${n} is not in schema`)})}const w=d("utils"),p={SITE_MIN_WIDTH_WIDE:1,SITE_MAX_WIDTH:2,SITE_MAX_WIDTH_MOBILE:3},M=window.matchMedia(`(min-width: ${h("--site-min-width-wide")})`),x=window.matchMedia(`(max-width: ${h("--site-max-width")})`),U=window.matchMedia(`(max-width: ${h("--site-max-width-mobile")})`);function re(e,t,r,n=null){const s=document.querySelectorAll(e);s.forEach(u=>{u.addEventListener(t,g=>r(g,n))})}function h(e){let t=getComputedStyle(document.documentElement).getPropertyValue(e);return t.length!==0?t=t.replace(/'|"/g,"").trim():w.error(`getCssPropString(${e}): Returned CSS property string is empty`),t}function ne(e){const t=h(e);let r=NaN;return t.length!==0&&(r=parseInt(t)),isNaN(r)&&w.error(`getCssPropValue(${e}): Returned CSS property value is NaN`),r}function C(e){switch(e){case p.SITE_MIN_WIDTH_WIDE:return M.matches;case p.SITE_MAX_WIDTH:return x.matches;case p.SITE_MAX_WIDTH_MOBILE:return U.matches}return!1}function ae(e,t,r){e.classList.remove(t),e.classList.add(r)}const G=d("snackbar"),c={id:"snackbar"},H=`
  <div id="${c.id}">
    <div class="${c.id}-container">
      <div class="${c.id}-message"></div>
      <div class="${c.id}-action-button"></div>
      <div class="${c.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
    </div>
  </div>
`,i={snackbar:null,actionButton:null,closeButton:null};let F=null,S=null,E=-1,O=-1;function le(e,t=5,r=null,n=null,s=null){G.log(`showSnackbar(): ${e} (${t} sec.)`),W(),I(),i.snackbar.querySelector(`.${c.id}-message`).innerHTML=e,i.snackbar.classList.add("show"),i.actionButton.style.display="none",S=s,r!==null&&n!==null?(F=n,i.actionButton.style.display="block",i.actionButton.textContent=r,i.actionButton.addEventListener("click",_)):C(p.SITE_MAX_WIDTH_MOBILE)?i.closeButton.style.paddingLeft="10px":i.closeButton.style.paddingLeft="20px",t!==0&&(E=setTimeout(()=>{i.snackbar.classList.add("hide"),O=setTimeout(()=>{i.snackbar.className="",S!==null&&S()},450)},t*1e3))}function W(){i.snackbar===null&&(document.body.insertAdjacentHTML("beforeend",H),i.snackbar=document.getElementById(c.id),i.actionButton=i.snackbar.querySelector(`.${c.id}-action-button`),i.closeButton=i.snackbar.querySelector(`.${c.id}-close-button`),i.closeButton.addEventListener("click",()=>{S!==null&&S(),I(!0)}))}function _(){F(),I(!0)}function I(e=!1){E!==-1&&(clearTimeout(E),E=-1),O!==-1&&(clearTimeout(O),O=-1),i.actionButton.removeEventListener("click",_),e&&i.snackbar.classList.remove("show")}const l=d("storage"),P={},b={UF_PLAYBACK_SETTINGS:"UF_PLAYBACK_SETTINGS",UF_SITE_SETTINGS:"UF_SITE_SETTINGS",UF_SITE_THEME:"UF_SITE_THEME",UF_TRACK_LAYOUT:"UF_TRACK_LAYOUT",UF_TRACKS_PER_PAGE:"UF_TRACKS_PER_PAGE"};function D(e,t=null,r=!1){l.log(`readJson(): ${e} - ${t} - ${r}`);const n=localStorage.getItem(e);let s=null;if(n===null)return r&&t!==null&&A(e,t),t;try{s=JSON.parse(n)}catch(u){l.error(u),t!==null&&(s=t)}return s}function A(e,t){l.log(`writeJson(): ${e} - ${t}`);try{localStorage.setItem(e,JSON.stringify(t))}catch(r){l.error(r)}}function K(e,t,r){l.log(`mergeObjectProps(): Merging ${r} from version ${e.version} to version ${t.version}`);const n={...e,...t};return n.user={...t.user,...e.user},n.priv={...t.priv,...e.priv},r===b.UF_SITE_SETTINGS?n.priv.banners={...t.priv.banners,...e.priv.banners}:r===b.UF_PLAYBACK_SETTINGS,n}function T(e,t){Object.keys(e).forEach(r=>{r in t===!1&&(l.log(`deleteOrphanedKeys(): Deleting '${r}'`),delete e[r])})}function J(e,t,r){T(e,t),T(e.user,t.user),T(e.priv,t.priv),r===b.UF_SITE_SETTINGS?T(e.priv.banners,t.priv.banners):r===b.UF_PLAYBACK_SETTINGS}function de(e,t=null,r=!1){const n=D(e,t,r);if(n!==null&&t!==null){let s=null;return n.version<t.version?(l.log(n),s=K(n,t,e),J(s,t,e),l.log(s),A(e,s)):s=n,V(e,s)}return l.error(`readWriteSettingsProxy() failed for: ${e}`),null}const V=(e,t)=>{const r={get(n,s,u){if(s in n){const g=Reflect.get(n,s,u);return typeof g=="object"?new Proxy(g,r):g}l.error(`onSettingsChange(): Get unknown property: ${s}`)},set(n,s,u,g){if(s in n){const L=Reflect.get(n,s,g);return u!==L&&(Reflect.set(n,s,u),A(e,t),Y(s,L,u)),!0}return l.error(`onSettingsChange(): Set unknown property: ${s}`),!0}};return new Proxy(t,r)};function Y(e,t,r){e in P&&(l.log(`callSettingsObserver() for property: ${e} - oldValue: ${t} - newValue: ${r}`),P[e].forEach(n=>n(t,r)))}function ge(e,t){let r=null;if(e.key===t)try{r=JSON.parse(e.oldValue)}catch(n){l.error(n)}return r}export{l as a,P as b,p as c,o as d,b as e,f,X as g,m as h,y as i,z as j,re as k,Z as l,le as m,h as n,ne as o,C as p,ae as q,d as r,de as s,ge as t};
//# sourceMappingURL=chunk.RHJFWL3C.js.map
