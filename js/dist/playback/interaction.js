const Be=!1;class Ve{constructor(e="unknown"){this.caller=Dt(e.toUpperCase(),15,".")}isDebug(){return Be}warn(e){console.warn(`${this.caller}:`,e)}error(e){console.error(`${this.caller}:`,e)}}class Ot extends Ve{constructor(e){super(e)}log(e){console.log(`${this.caller}:`,e)}logEventLog(e,t,n){const a=[];for(let o=0;o<e.length;o++){const l={eventSource:this.getObjectKeyForValue(t,e[o].eventSource),eventType:this.getObjectKeyForValue(n,e[o].eventType),uId:e[o].uId,timeStamp:e[o].timeStamp};a.push(l)}this.log(a)}getObjectKeyForValue(e,t){return Object.keys(e).find(n=>e[n]===t)}}class Ut extends Ve{constructor(e){super(e)}log(){}logEventLog(){}getObjectKeyForValue(){}}function N(e){return Be===!0?new Ot(e):new Ut(e)}function Dt(e,t,n){return e.length>t?e.slice(0,t):e.padEnd(t,n)}function $e(e,t){const n=t.mediaUrl+" | "+t.mediaTitle;console.log(`DEBUGLOGGER....: logErrorOnServer(): ${e} - ${n}`),gtag("event",n,{event_category:e,event_label:"Ultrafunk Client Error"})}const Pe=N("eventlogger"),m={UNKNOWN:1e3,KEYBOARD:100,MOUSE:110,YOUTUBE:1,SOUNDCLOUD:2,ULTRAFUNK:50},b={UNKNOWN:-2e3,KEY_ARROW_LEFT:80,KEY_ARROW_RIGHT:81,MOUSE_CLICK:82,STATE_ERROR:-5,STATE_UNSTARTED:-1,STATE_ENDED:0,STATE_PLAYING:1,STATE_PAUSED:2,STATE_BUFFERING:3,STATE_CUED:5,RESUME_AUTOPLAY:50,PLAYER_ERROR:60,CROSSFADE_START:70},Nt={eventSource:m.UNKNOWN,eventType:b.UNKNOWN,uId:null,timeStamp:0};class Ye{constructor(e=10){this.log=[],this.maxEntries=e,this.lastPos=0,this.matchCount=0}add(e,t,n,a=Date.now()){const o=Object.create(Nt);o.eventSource=e,o.eventType=t,o.uId=n,o.timeStamp=a,this.log.length<this.maxEntries?this.log.push(o):(this.log.shift(),this.log.push(o))}clear(){this.log=[]}initMatch(){this.lastPos=this.log.length-1,this.matchCount=0}matchesEvent(e,t,n,a=null){this.log[this.lastPos-e].eventSource===t&&this.log[this.lastPos-e].eventType===n&&this.log[this.lastPos-e].uId===a&&this.matchCount++}matchesDelta(e,t){this.log[this.lastPos].timeStamp-this.log[this.lastPos-e].timeStamp<=t&&this.matchCount++}isPatternMatch(e,t){return this.matchCount===e?(Pe.log(`MATCH for: ${t}`),Pe.logEventLog(this.log,m,b),!0):!1}}class We extends Ye{constructor(e){super(e)}doubleClicked(e,t,n){return this.initMatch(),this.lastPos>=1&&(this.matchesEvent(1,e,t),this.matchesEvent(0,e,t),this.matchesDelta(1,n)),this.isPatternMatch(3,`${Pe.getObjectKeyForValue(m,e)} Double Clicked`)}}class Ke extends Ye{constructor(e){super(e)}ytAutoPlayBlocked(e,t){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,m.ULTRAFUNK,b.RESUME_AUTOPLAY,null),this.matchesEvent(2,m.YOUTUBE,b.STATE_UNSTARTED,e),this.matchesEvent(1,m.YOUTUBE,b.STATE_BUFFERING,e),this.matchesEvent(0,m.YOUTUBE,b.STATE_UNSTARTED,e),this.matchesDelta(3,t)),this.isPatternMatch(5,"YouTube AutoPlay Blocked")}scAutoPlayBlocked(e,t){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,m.ULTRAFUNK,b.RESUME_AUTOPLAY,null),this.matchesEvent(2,m.SOUNDCLOUD,b.STATE_PLAYING,e),this.matchesEvent(1,m.SOUNDCLOUD,b.STATE_PAUSED,e),this.matchesEvent(0,m.SOUNDCLOUD,b.STATE_PAUSED,e),this.matchesDelta(3,t)),this.isPatternMatch(5,"SoundCloud AutoPlay Blocked")}scWidgetPlayBlocked(e,t){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,m.SOUNDCLOUD,b.STATE_PLAYING,e),this.matchesEvent(1,m.SOUNDCLOUD,b.STATE_PAUSED,e),this.matchesEvent(0,m.SOUNDCLOUD,b.STATE_PAUSED,e),this.matchesDelta(2,t)),this.isPatternMatch(4,"SoundCloud WidgetPlay Blocked")}scPlayDoubleTrigger(e,t){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,m.ULTRAFUNK,b.CROSSFADE_START,null),this.matchesEvent(1,m.SOUNDCLOUD,b.STATE_PLAYING,e),this.matchesEvent(0,m.SOUNDCLOUD,b.STATE_PLAYING,e),this.matchesDelta(1,t)),this.isPatternMatch(4,"SoundCloud Play Double Trigger")}}const K=N("mediaplayers");let ie={},H={};const ae={MIN:0,MAX:100},q={NONE:-1,AUTO:0,TRACK:1},ue={NONE:-1,EQUAL_POWER:0,LINEAR:1},wt=/\s{1,}[–·-]\s{1,}/i;class He{constructor(e,t,n){this.postId=e,this.iframeId=t,this.embeddedPlayer=n,this.playable=!0,this.duration=0,this.artist=null,this.title=null,this.thumbnailSrc=null,this.thumbnail=new Image,this.thumbnail.decoding="async"}getPostId(){return this.postId}getIframeId(){return this.iframeId}getUid(){return this.iframeId}getEmbeddedPlayer(){return this.embeddedPlayer}getPlayable(){return this.playable}setPlayable(e){this.playable=e}getDuration(){return this.duration}setDuration(e){this.duration=e}getArtist(){return this.artist}setArtist(e){this.artist=e}getTitle(){return this.title}setTitle(e){this.title=e}getThumbnailSrc(){return this.thumbnailSrc}seekTo(e){this.embeddedPlayer.seekTo(e)}setVolume(e){this.embeddedPlayer.setVolume(e)}}class qe extends He{constructor(e,t,n){super(e,t,n);this.previousPlayerState=-1}setThumbnail(e){this.thumbnailSrc=`https://img.youtube.com/vi/${e}/mqdefault.jpg`,this.thumbnail.src=this.thumbnailSrc}pause(){this.embeddedPlayer.pauseVideo()}stop(){this.embeddedPlayer.stopVideo()}isPlaybackError(e){return K.log(`YouTube.play() - current playerState: ${this.embeddedPlayer.getPlayerState()} - previous playerState: ${this.previousPlayerState} - playable: ${this.playable}`),this.embeddedPlayer.getPlayerState()===-1&&this.previousPlayerState===-1&&this.playable===!0?(K.warn(`MediaPlayer.YouTube.play() - Unable to play track: ${this.getArtist()} - "${this.getTitle()}" with videoId: ${this.embeddedPlayer.getVideoData().video_id} -- No YouTube API error given!`),this.playable=!1,e(this,this.embeddedPlayer.getVideoUrl()),!0):(this.previousPlayerState=this.embeddedPlayer.getPlayerState(),!1)}play(e){this.isPlaybackError(e)===!1&&(this.playable===!0?this.embeddedPlayer.playVideo():e(this,this.embeddedPlayer.getVideoUrl()))}getVolume(e){e(this.embeddedPlayer.getVolume())}mute(e){e?this.embeddedPlayer.mute():this.embeddedPlayer.unMute()}getPosition(e){e(this.embeddedPlayer.getCurrentTime()*1e3,this.duration)}}class ve extends He{constructor(e,t,n,a){super(e,t,n);this.soundId=a,this.volume=ae.MAX,this.muted=!1}setThumbnail(){this.embeddedPlayer.getCurrentSound(e=>{const t=e.artwork_url!==null?e.artwork_url:e.user.avatar_url;t!=null&&(this.thumbnailSrc=t,this.thumbnail.src=t)})}getUid(){return this.soundId}pause(){this.embeddedPlayer.pause()}play(e){this.playable===!0?this.embeddedPlayer.getCurrentSound(t=>{t.playable===!0?this.embeddedPlayer.play():e(this,t.permalink_url)}):e(this,"https://soundcloud.com")}stop(){this.embeddedPlayer.pause(),super.seekTo(0)}seekTo(e){super.seekTo(e*1e3)}getVolume(e){this.embeddedPlayer.getVolume(t=>e(t))}setVolume(e){e!==0&&(this.volume=e),(this.muted===!1||e===0)&&super.setVolume(e)}mute(e){this.muted=!!e,e?this.setVolume(0):this.setVolume(this.volume)}getPosition(e){this.embeddedPlayer.getPosition(t=>e(t,this.duration))}}function Ge(e,t){if(t!==null&&t.length>0){const n=t.match(wt);n!==null?(e.artist=t.slice(0,n.index),e.title=t.slice(n.index+n[0].length)):e.artist=t}}function je(e,t,n){ie=e,H=t;const a=Rt(),o=Mt(a,n);return a.setPlayers(o),o}const Mt=(e,t)=>{const n=e,a=t,o=[],l=new Map;let i=0;return{indexMap:l,get crossfade(){return n},add:h,getPlayerIndex(){return i},setPlayerIndex(S){i=S},get current(){return o[i]},get next(){return o[i+1]},getNumTracks(){return o.length},getCurrentTrack(){return i+1},playerFromUid(S){return o[l.get(S)]},trackFromUid(S){return l.get(S)+1},isCurrent(S){return S===this.current.getUid()},uIdFromIframeId:d,stop:E,mute:p,getStatus:O,prevTrack:I,nextTrack:W,jumpToTrack:L};function h(S){K.log(S),o.push(S),l.set(S.getUid(),o.length-1)}function d(S){return o.find(Y=>Y.iframeId===S).getUid()}function E(){this.current.stop(),n.stop()}function p(){this.current.mute(H.masterMute),n.mute(H.masterMute)}function O(){return{currentTrack:this.getCurrentTrack(),numTracks:this.getNumTracks(),artist:this.current.getArtist(),title:this.current.getTitle(),thumbnailSrc:this.current.getThumbnailSrc()}}function I(S){return i>0?(i--,a(S),!0):!1}function W(S){return i++,i<this.getNumTracks()?(a(S),!0):!1}function L(S,Y,A=!0){return S>0&&S<=this.getNumTracks()?(i=S-1,a(Y,A),!0):!1}},Rt=()=>{let e={},t=!1,n=-1,a=null,o=null,l=0,i=0,h=q.NONE,d=ue.NONE,E=0;return{setPlayers(A){e=A},isFading(){return t},init:p,start:O,stop:I,mute:W};function p(A,c=0,u=null){return t===!1&&L(u)===!0?(K.log(`crossfadePlayers.init() - crossfadeType: ${K.getObjectKeyForValue(q,A)} - crossfadeCurve: ${K.getObjectKeyForValue(ue,c)} - fadeInUid: ${u}`),t=!0,i=H.masterVolume,h=A,d=c,o.setVolume(0),u===null?e.nextTrack(!0):e.jumpToTrack(e.trackFromUid(u),!0,!1),{fadeOutPlayer:e.indexMap.get(a.getUid()),fadeInPlayer:e.indexMap.get(o.getUid())}):null}function O(A){t&&a.getPosition(c=>{E=(c+ie.updateCrossfadeInterval)/1e3;const u=a.getDuration()-E,R=u-ie.updateCrossfadeInterval/1e3;h===q.AUTO?l=R:h===q.TRACK&&(l=u>H.trackCrossfadeLength?H.trackCrossfadeLength:R),K.log(`crossfadePlayers.start() - fadeStartTime: ${E.toFixed(2)} sec - timeRemaining: ${u.toFixed(2)} sec - fadeLength: ${l.toFixed(2)} sec - fadeInUid: ${A}`),n=setInterval(d===ue.EQUAL_POWER?S:Y,ie.updateCrossfadeInterval)})}function I(){K.log(`crossfadePlayers.stop() - isFading: ${t}`),t&&(n!==-1&&(clearInterval(n),n=-1),a!==null&&(a.pause(),a.seekTo(0),setTimeout(()=>{a.setVolume(H.masterVolume),a=null},200)),o!==null&&setTimeout(()=>{o.setVolume(H.masterVolume),o=null},200),t=!1,l=0,i=0,h=q.NONE,d=ue.NONE,E=0)}function W(A){a!==null&&a.mute(A)}function L(A){return a=e.current,o=A===null?e.next:e.playerFromUid(A),!!(a.getPlayable()&&o.getPlayable())}function S(){a.getPosition(A=>{const c=A/1e3-E,u=c>=0?c:0,R=i-i*(u/l),Te=R>=ae.MIN?R:ae.MIN,Lt=Math.round(Math.sqrt(i*Te)),Fe=Math.round(Math.sqrt(i*(i-Te)));u>=l&&Te<=ae.MIN&&Fe>=i?I():(a.setVolume(Lt),o.setVolume(Fe))})}function Y(){a.getPosition(A=>{const c=A/1e3-E,u=Math.round(i*(c/l)),R=i-u;c>l&&R<ae.MIN&&u>i?I():(a.setVolume(R),o.setVolume(u))})}};const w=N("storage"),Xe=[],J={UF_PLAYBACK_SETTINGS:"UF_PLAYBACK_SETTINGS",UF_SITE_SETTINGS:"UF_SITE_SETTINGS",UF_SITE_THEME:"UF_SITE_THEME",UF_TRACK_LAYOUT:"UF_TRACK_LAYOUT",UF_TRACKS_PER_PAGE:"UF_TRACKS_PER_PAGE"};function _t(e,t=null,n=!0){w.log(`readJson(): ${e} - ${t} - ${n}`);const a=localStorage.getItem(e);let o=null;if(a===null)return n&&t!==null&&Ae(e,t),t;try{o=JSON.parse(a)}catch(l){w.error(l)}return o}function Ae(e,t){w.log(`writeJson(): ${e} - ${t}`);try{localStorage.setItem(e,JSON.stringify(t))}catch(n){w.error(n)}}function xt(e,t,n){w.log(`mergeObjectProps(): Merging ${n} from version ${e.version} to version ${t.version}`);const a={...e,...t};return a.user={...t.user,...e.user},a.priv={...t.priv,...e.priv},n===J.UF_SITE_SETTINGS?a.priv.banners={...t.priv.banners,...e.priv.banners}:n===J.UF_PLAYBACK_SETTINGS,a}function ce(e,t){Object.keys(e).forEach(n=>{n in t===!1&&(w.log(`deleteOrphanedKeys(): Deleting '${n}'`),delete e[n])})}function Ft(e,t,n){ce(e,t),ce(e.user,t.user),ce(e.priv,t.priv),n===J.UF_SITE_SETTINGS?ce(e.priv.banners,t.priv.banners):n===J.UF_PLAYBACK_SETTINGS}function Je(e,t=null,n=!0){const a=_t(e,t,n);if(a!==null&&t!==null){let o=null;return a.version<t.version?(w.log(a),o=xt(a,t,e),Ft(o,t,e),w.log(o),Ae(e,o)):o=a,Bt(e,o)}return w.error(`readWriteSettingsProxy() failed for: ${e}`),null}const Bt=(e,t)=>{const n={get(a,o,l){if(o in a){const i=Reflect.get(a,o,l);return typeof i=="object"?new Proxy(i,n):i}w.error(`onSettingsChange(): Get unknown property: ${o}`)},set(a,o,l,i){if(o in a){const h=Reflect.get(a,o,i);return l!==h&&(Reflect.set(a,o,l),Ae(e,t),Vt(o,h,l)),!0}return w.error(`onSettingsChange(): Set unknown property: ${o}`),!0}};return new Proxy(t,n)};function Ce(e,t){w.log(`addSettingsObserver() for property: ${e}`),Xe.push({property:e,observer:t})}function Vt(e,t,n){Xe.forEach(a=>{a.property===e&&(w.log(`callSettingsObserver() for property: ${e} - oldValue: ${t} - newValue: ${n}`),a.observer(t,n))})}function Qe(e,t){let n=null;if(e.key===t)try{n=JSON.parse(e.oldValue)}catch(a){w.error(a)}return n}const de=N("utils"),Q={SITE_MIN_WIDTH_WIDE:1,SITE_MAX_WIDTH:2,SITE_MAX_WIDTH_MOBILE:3},$t=window.matchMedia(`(min-width: ${ge("--site-min-width-wide")})`),Yt=window.matchMedia(`(max-width: ${ge("--site-max-width")})`),Wt=window.matchMedia(`(max-width: ${ge("--site-max-width-mobile")})`);function Ie(e,t,n,a=null){const o=document.querySelectorAll(e);o.forEach(l=>{l.addEventListener(t,i=>n(i,a))})}function ge(e){let t=getComputedStyle(document.documentElement).getPropertyValue(e);return t.length!==0?t=t.replace(/'|"/g,"").trim():de.error(`getCssPropString(${e}): Returned CSS property string is empty`),t}function z(e){const t=ge(e);let n=NaN;return t.length!==0&&(n=parseInt(t)),isNaN(n)&&de.error(`getCssPropValue(${e}): Returned CSS property value is NaN`),n}function Le(e){switch(e){case Q.SITE_MIN_WIDTH_WIDE:return $t.matches;case Q.SITE_MAX_WIDTH:return Yt.matches;case Q.SITE_MAX_WIDTH_MOBILE:return Wt.matches}return!1}function G(e,t,n){e.classList.remove(t),e.classList.add(n)}function ze(e){const t=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow=e?"hidden":"",document.body.style.paddingRight=e?`${t}px`:"",document.getElementById("site-header").style.paddingRight=e?`${t}px`:""}const On=(()=>{const e={id:"modal"},t=`
    <div id="${e.id}-dialog" tabindex="-1">
      <div class="${e.id}-container">
        <div class="${e.id}-header">
          <div class="${e.id}-title"></div>
          <div class="${e.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
        </div>
        <div class="${e.id}-body"></div>
      </div>
    </div>
  `,n={overlay:null,container:null,body:null};let a=null;return{show:o};function o(p,O,I){de.log(`modal.show(): ${p}`),l(),a=I,i(O),n.container.querySelector(`.${e.id}-title`).innerHTML=p,n.overlay.classList.add("show"),n.overlay.addEventListener("keydown",d),n.overlay.focus(),ze(!0)}function l(){n.container===null&&(document.body.insertAdjacentHTML("beforeend",t),n.overlay=document.getElementById(`${e.id}-dialog`),n.container=n.overlay.querySelector(`.${e.id}-container`),n.body=n.overlay.querySelector(`.${e.id}-body`),n.overlay.addEventListener("click",p=>{p.target===n.overlay&&E()}),n.overlay.addEventListener("animationend",()=>{n.overlay.classList.contains("hide")&&(n.overlay.className="",ze(!1))}),n.overlay.querySelector(`.${e.id}-close-button`).addEventListener("click",E))}function i(p){let O="";p.forEach(I=>O+=`<div id="${I.id}" class="${e.id}-single-choice">${I.description}</div>`),n.body.innerHTML=O,p.forEach(I=>n.body.querySelector(`#${I.id}`).addEventListener("click",h))}function h(){E(),setTimeout(()=>a(this.id),150)}function d(p){p.stopPropagation(),p.key==="Escape"&&E()}function E(){n.overlay.removeEventListener("keydown",d),n.overlay.classList.replace("show","hide")}})(),B=(()=>{const e={id:"snackbar"},t=`
    <div id="${e.id}">
      <div class="${e.id}-container">
        <div class="${e.id}-message"></div>
        <div class="${e.id}-action-button"></div>
        <div class="${e.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
      </div>
    </div>
  `,n={snackbar:null,actionButton:null,closeButton:null};let a=null,o=null,l=-1,i=-1;return{show:h};function h(O,I=5,W=null,L=null,S=null){de.log(`snackbar.show(): ${O} (${I} sec)`),E(),p(),n.snackbar.querySelector(`.${e.id}-message`).innerHTML=O,n.snackbar.classList.add("show"),n.actionButton.style.display="none",o=S,W!==null&&L!==null?(a=L,n.actionButton.style.display="block",n.actionButton.textContent=W,n.actionButton.addEventListener("click",d)):Le(Q.SITE_MAX_WIDTH_MOBILE)?n.closeButton.style.paddingLeft="10px":n.closeButton.style.paddingLeft="20px",I!==0&&(l=setTimeout(()=>{n.snackbar.classList.add("hide"),i=setTimeout(()=>{n.snackbar.className="",o!==null&&o()},450)},I*1e3))}function d(){a(),p(!0)}function E(){n.snackbar===null&&(document.body.insertAdjacentHTML("beforeend",t),n.snackbar=document.getElementById(e.id),n.actionButton=n.snackbar.querySelector(`.${e.id}-action-button`),n.closeButton=n.snackbar.querySelector(`.${e.id}-close-button`),n.closeButton.addEventListener("click",()=>{o!==null&&o(),p(!0)}))}function p(O=!1){l!==-1&&(clearTimeout(l),l=-1),i!==-1&&(clearTimeout(i),i=-1),n.actionButton.removeEventListener("click",d),O&&n.snackbar.classList.remove("show")}})();const Ze=N("playback-ctrls");let Z={},ee={};const g={DISABLED:"state-disabled",ENABLED:"state-enabled",PLAY:"state-play",PAUSE:"state-pause"},s={progressSeek:{element:null,state:g.DISABLED,clickCallback:null},progressBar:{element:null,state:g.DISABLED},details:{element:null,state:g.DISABLED,artistElement:null,titleElement:null},thumbnail:{element:null,state:g.DISABLED,img:null},timer:{element:null,state:g.DISABLED,positionElement:null,durationElement:null,positionSeconds:-1,durationSeconds:-1},prevTrack:{element:null,state:g.DISABLED},playPause:{element:null,state:g.DISABLED,iconElement:null},nextTrack:{element:null,state:g.DISABLED},shuffle:{element:null,state:g.DISABLED},mute:{element:null,state:g.DISABLED,iconElement:null},trackCrossfade:{elements:null,clickCallback:null}};function et(e,t,n,a){Z=e,ee=t;const o=document.getElementById(Z.progressControlsId);o!==null?(s.progressSeek.element=o.querySelector(".seek-control"),s.progressSeek.clickCallback=n,s.progressBar.element=o.querySelector(".bar-control")):Ze.error(`playbackControls.init(): Unable to getElementById() for '#${Z.progressControlsId}'`);const l=document.getElementById(Z.playbackControlsId);l!==null?(s.details.element=l.querySelector(".details-control"),s.details.artistElement=s.details.element.querySelector(".details-artist"),s.details.titleElement=s.details.element.querySelector(".details-title"),s.thumbnail.element=l.querySelector(".thumbnail-control"),s.thumbnail.img=s.thumbnail.element.querySelector("img"),s.timer.element=l.querySelector(".timer-control"),s.timer.positionElement=s.timer.element.querySelector(".timer-position"),s.timer.durationElement=s.timer.element.querySelector(".timer-duration"),s.prevTrack.element=l.querySelector(".prev-control"),s.playPause.element=l.querySelector(".play-pause-control"),s.playPause.iconElement=s.playPause.element.querySelector("i"),s.nextTrack.element=l.querySelector(".next-control"),s.shuffle.element=l.querySelector(".shuffle-control"),s.mute.element=l.querySelector(".mute-control"),s.mute.iconElement=s.mute.element.querySelector("i")):Ze.error(`playbackControls.init(): Unable to getElementById() for '#${Z.playbackControlsId}'`),s.trackCrossfade.elements=document.querySelectorAll(Z.entryMetaControlsSelector),s.trackCrossfade.elements.length!==0&&(s.trackCrossfade.clickCallback=a)}function nt(e,t,n,a,o){D(s.progressSeek,g.ENABLED),s.progressSeek.element.addEventListener("click",Kt),D(s.progressBar,g.ENABLED),D(s.details,g.ENABLED),D(s.thumbnail,g.ENABLED),D(s.timer,g.ENABLED),ee.trackThumbnailOnMobile&&s.thumbnail.element.classList.add("show-on-mobile"),ee.trackTimesOnMobile&&s.timer.element.classList.add("show-on-mobile"),D(s.prevTrack,g.DISABLED),s.prevTrack.element.addEventListener("click",e),D(s.playPause,g.PLAY),s.playPause.element.addEventListener("click",t),D(s.nextTrack,o>1?g.ENABLED:g.DISABLED),s.nextTrack.element.addEventListener("click",n),D(s.shuffle,g.ENABLED),D(s.mute,g.ENABLED),s.mute.element.addEventListener("click",a),tt(),s.trackCrossfade.elements.length>1&&s.trackCrossfade.elements.forEach(l=>l.addEventListener("click",Ht)),Ce("autoPlay",qt),Ce("masterMute",tt)}function D(e,t=g.DISABLED){G(e.element,e.state,t),e.state=t,t===g.PLAY?s.playPause.iconElement.textContent="play_circle_filled":t===g.PAUSE&&(s.playPause.iconElement.textContent="pause_circle_filled")}function at(e,t){t===0?De(0):De(e/(t*1e3))}function se(e){De(e/100)}function De(e){s.progressBar.element.style.transform=`scaleX(${e})`}function Kt(e){if(s.timer.durationSeconds>0){const t=e.clientX/document.documentElement.clientWidth*100,n=Math.round(s.timer.durationSeconds*t/100);s.progressSeek.clickCallback(n),V()===!1&&(se(t),fe(n,s.timer.durationSeconds))}}function Oe(e){s.details.artistElement.textContent=e.artist||"",s.details.titleElement.textContent=e.title||"",Gt(e.thumbnailSrc),fe(-1,-1)}function Gt(e){s.thumbnail.element.classList.add("loading"),e!==null?s.thumbnail.img.src=e:s.thumbnail.img.src="/wp-content/themes/ultrafunk/inc/img/photo_filled_grey.png",s.thumbnail.img.decode().then(()=>{s.thumbnail.element.classList.remove("loading")})}function fe(e,t){e!==-1&&s.timer.positionSeconds!==e?(s.timer.positionSeconds=e,ee.autoPlay===!1&&(e=t-e),me(s.timer.positionElement,e)):e===-1&&s.timer.positionSeconds===-1&&(s.timer.positionElement.textContent="00:00"),t!==-1&&s.timer.durationSeconds!==t?(s.timer.durationSeconds=t,me(s.timer.durationElement,t)):t===-1&&s.timer.durationSeconds===-1&&(s.timer.durationElement.textContent="00:00")}function me(e,t){const n=new Date(t*1e3).toISOString();e.textContent=t>60*60?n.substr(11,8):n.substr(14,5)}function st(){s.timer.positionElement.textContent="00:00",s.timer.durationElement.textContent="00:00"}function V(){return s.playPause.state===g.PAUSE}function Ue(e){st(),Oe(e),V()===!1&&e.currentTrack<=1&&D(s.prevTrack,g.DISABLED),e.currentTrack<e.numTracks&&D(s.nextTrack,g.ENABLED)}function Ne(e){D(s.playPause,g.PAUSE),D(s.prevTrack,g.ENABLED),Oe(e),ot(!0,e.currentTrack)}function j(){D(s.playPause,g.PLAY),ot(!1)}function pe(e){e?s.playPause.element.classList.toggle("time-remaining-warning"):s.playPause.element.classList.remove("time-remaining-warning")}function ye(e){st(),Oe(e),D(s.prevTrack,g.ENABLED),e.currentTrack>=e.numTracks&&D(s.nextTrack,g.DISABLED)}function tt(){s.mute.iconElement.textContent=ee.masterMute?"volume_off":"volume_up"}function Ht(e){if(V()){const t=e.target.closest("article").querySelector("iframe");t!==null&&s.trackCrossfade.clickCallback(t.id)}}function ot(e,t=-1){s.trackCrossfade.elements.forEach((n,a)=>{t===a+1?G(n,e?g.ENABLED:g.DISABLED,e?g.DISABLED:g.ENABLED):G(n,e?g.DISABLED:g.ENABLED,e?g.ENABLED:g.DISABLED)})}function qt(){V()===!1&&s.timer.positionSeconds>0&&(me(s.timer.positionElement,ee.autoPlay?s.timer.positionSeconds:s.timer.durationSeconds-s.timer.positionSeconds),me(s.timer.durationElement,s.timer.durationSeconds))}const k=N("playback"),_=new Ke(10),we={};let T={},r={},Me=0,rt=1;const M={youTubeIframeIdRegEx:/youtube-uid/i,soundCloudIframeIdRegEx:/soundcloud-uid/i,entriesSelector:"article",trackTitleData:"data-entry-track-title",progressControlsId:"progress-controls",playbackControlsId:"playback-controls",entryMetaControlsSelector:".entry-meta-controls .crossfade-control",updateTimerInterval:200,updateCrossfadeInterval:50,minTrackCrossfadeTime:5,maxBufferingDelay:3},y={LOADING:10,READY:20,MEDIA_PLAYING:30,MEDIA_PAUSED:40,MEDIA_ENDED:50,MEDIA_TIME_REMAINING:60,MEDIA_SHOW:70,CONTINUE_AUTOPLAY:80,RESUME_AUTOPLAY:90,AUTOPLAY_BLOCKED:100,PLAYBACK_BLOCKED:110,MEDIA_UNAVAILABLE:120};function lt(e){T=e,et(M,T,jt,Jt),r=je(M,T,Xt),Qt(),zt()}function it(e={}){Object.assign(we,e)}function U(e,t=null){e in we&&we[e](e,t)}function ut(){let e=0;return document.querySelectorAll("iframe").forEach(t=>{(M.youTubeIframeIdRegEx.test(t.id)||M.soundCloudIframeIdRegEx.test(t.id))&&e++}),k.log(`hasEmbeddedPlayers() - playersCount: ${e}`),Me=e+3,e>0}function un(){const e=document.querySelectorAll(M.entriesSelector);e.forEach(t=>{const n=t.id,a=t.getAttribute(M.trackTitleData),o=t.querySelectorAll("iframe");o.forEach(l=>{const i=l.id;let h={};if(M.youTubeIframeIdRegEx.test(i)){const d=new YT.Player(i,{events:{onReady:Zt,onStateChange:en,onError:tn}});h=new qe(n,i,d)}else if(M.soundCloudIframeIdRegEx.test(i)){const d=SC.Widget(i);h=new ve(n,i,d,an(l.src)),d.bind(SC.Widget.Events.READY,()=>{h.setThumbnail(),nn()}),d.bind(SC.Widget.Events.PLAY,sn),d.bind(SC.Widget.Events.PAUSE,on),d.bind(SC.Widget.Events.FINISH,rn),d.bind(SC.Widget.Events.ERROR,ln)}Ge(h,a),r.add(h)})})}function he(){return{loadingPercent:100*(rt++/Me)}}function ct(){rt>=Me?(nt(Re,te,oe,_e,r.getNumTracks()),U(y.READY),U(y.RESUME_AUTOPLAY)):U(y.LOADING,he())}function te(){V()?(j(),r.current.pause()):(Ne(r.getStatus()),r.current.play(xe))}function Re(e){k.log(`prevClick() - prevTrack: ${r.getCurrentTrack()-1} - numTracks: ${r.getNumTracks()} - event: ${e!==null?e.type:"null"}`),r.getCurrentTrack()>0&&r.current.getPosition(t=>{t>3e3?(r.current.seekTo(0),X.updateCallback(0)):(r.getCurrentTrack()>1&&r.stop(),r.prevTrack(V())&&Ue(r.getStatus()))})}function oe(e){k.log(`nextClick() - nextTrack: ${r.getCurrentTrack()+1} - numTracks: ${r.getNumTracks()} - event: ${e!==null?e.type:"null"}`),r.getCurrentTrack()+1<=r.getNumTracks()?(r.stop(),e!==null||T.autoPlay?r.nextTrack(V())&&ye(r.getStatus()):j()):e===null&&(j(),T.autoPlay?U(y.CONTINUE_AUTOPLAY):r.stop())}function jt(e){r.current.seekTo(e)}function _e(){T.masterMute=!(T.masterMute===!0),r.mute()}function Xt(e,t=!0){U(y.MEDIA_SHOW,{scrollToMedia:t,postId:r.current.getPostId()}),e&&r.current.play(xe)}function dt(e,t=!0){k.log(`skipToTrack(): ${e} - ${t}`),t===!0&&V()===!1&&(_.clear(),_.add(m.ULTRAFUNK,b.RESUME_AUTOPLAY,null),r.jumpToTrack(e,t)&&ye(r.getStatus()))}function gt(){k.log("resumeAutoPlay()"),_.add(m.ULTRAFUNK,b.RESUME_AUTOPLAY,null),te()}function x(){return{isPlaying:V(),currentTrack:r.getCurrentTrack(),numTracks:r.getNumTracks(),postId:r.current.getPostId(),iframeId:r.current.getIframeId()}}function Jt(e){const t=r.uIdFromIframeId(e);r.isCurrent(t)===!1&&r.current.getDuration()>0&&(k.log(`trackCrossfadeClick():
fadeOut: ${r.current.getArtist()} - "${r.current.getTitle()}" (${r.current.getUid()})
fadeIn.: ${r.playerFromUid(t).getArtist()} - "${r.playerFromUid(t).getTitle()}" (${t})`),T.masterMute!==!0&&T.autoPlay===!1&&T.trackCrossfade&&r.current.getPosition(n=>{const a=r.current.getDuration()-n/1e3;a>=M.minTrackCrossfadeTime+M.maxBufferingDelay&&ft(q.TRACK,T.trackCrossfadeCurve,t)}))}function ft(e,t,n=null){_.add(m.ULTRAFUNK,b.CROSSFADE_START,null);const a=r.crossfade.init(e,t,n);a!==null&&F.syncControls(a.fadeOutPlayer,a.fadeInPlayer)}const F=(()=>{const e={PLAY:1,PAUSE:2};let t=function a(o,l){if(k.log(`playersState.syncAll() - previousTrack: ${r.getPlayerIndex()+1} - nextTrack: ${r.indexMap.get(o)+1} - syncState: ${k.getObjectKeyForValue(e,l)}`),r.isCurrent(o))l===e.PLAY?(r.crossfade.start(o),Ne(r.getStatus()),U(y.MEDIA_PLAYING,{postId:r.current.getPostId()})):l===e.PAUSE&&(r.crossfade.stop(),j(),U(y.MEDIA_PAUSED,{postId:r.current.getPostId()}));else{const i=r.getPlayerIndex(),h=r.indexMap.get(o);r.stop(),r.setPlayerIndex(h),n(i,h),a(o,l)}};function n(a,o){o>a?ye(r.getStatus()):Ue(r.getStatus())}return{STATE:e,syncAll:t,syncControls:n}})(),X=(()=>{let e=-1,t=0;return{start:n,stop:a,updateCallback:l};function n(){a(!1),e=setInterval(o,M.updateTimerInterval)}function a(d=!1){e!==-1&&(clearInterval(e),e=-1),d&&(l(0),U(y.MEDIA_ENDED)),t=0,pe(!1)}function o(){r.current.getPosition(l)}function l(d,E=0){const p=Math.round(d/1e3);at(d,E),fe(p,E),p>0&&E>0&&(i(p,E),h(p,E))}function i(d,E){if(T.autoPlay===!1&&T.timeRemainingWarning&&t!==d){const p=E-d;t=d,p<=T.timeRemainingSeconds?(pe(!0),U(y.MEDIA_TIME_REMAINING,{timeRemainingSeconds:p})):pe(!1)}}function h(d,E){T.masterMute!==!0&&T.autoPlay&&T.autoCrossfade&&(E-d===T.autoCrossfadeLength+M.maxBufferingDelay&&(r.getCurrentTrack()+1<=r.getNumTracks()&&ft(q.AUTO,T.autoCrossfadeCurve)))}})();function xe(e,t){k.log("onEmbeddedPlayerError()"),k.log(e);const n=e instanceof ve?m.SOUNDCLOUD:m.YOUTUBE;r.isCurrent(e.getUid())===!1&&r.stop(),_.add(n,b.PLAYER_ERROR,e.getUid()),j(),U(y.MEDIA_UNAVAILABLE,cn(e,t))}function cn(e,t){const n=e.getArtist()||"N/A",a=e.getTitle()||"N/A";return{currentTrack:r.trackFromUid(e.getUid()),numTracks:r.getNumTracks(),postId:e.getPostId(),mediaTitle:`${n} - ${a}`,mediaUrl:t}}function Qt(){k.log("initYouTubeAPI()"),U(y.LOADING,he());let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}window.onYouTubeIframeAPIReady=function(){k.log("onYouTubeIframeAPIReady()"),U(y.LOADING,he()),un()};function Zt(e){k.log("onYouTubePlayerReady()"),ct(),r.playerFromUid(e.target.f.id).setThumbnail(e.target.getVideoData().video_id)}function en(e){_.add(m.YOUTUBE,e.data,e.target.f.id);switch(e.data){case YT.PlayerState.BUFFERING:if(k.log("onYouTubePlayerStateChange: BUFFERING"),r.crossfade.isFading()===!1){const t=r.playerFromUid(e.target.f.id);t.mute(T.masterMute),t.setVolume(T.masterVolume)}break;case YT.PlayerState.CUED:k.log("onYouTubePlayerStateChange: CUED");break;case YT.PlayerState.PLAYING:k.log("onYouTubePlayerStateChange: PLAYING"),F.syncAll(e.target.f.id,F.STATE.PLAY),r.current.setDuration(Math.round(e.target.getDuration())),X.start();break;case YT.PlayerState.PAUSED:k.log(`onYouTubePlayerStateChange: PAUSED (uID: ${e.target.f.id})`),r.isCurrent(e.target.f.id)?(F.syncAll(e.target.f.id,F.STATE.PAUSE),X.stop(!1)):r.crossfade.stop();break;case YT.PlayerState.ENDED:k.log(`onYouTubePlayerStateChange: ENDED (uID: ${e.target.f.id})`),r.isCurrent(e.target.f.id)?(X.stop(!0),oe(null)):r.crossfade.stop();break;default:k.log("onYouTubePlayerStateChange: UNSTARTED (-1)"),_.ytAutoPlayBlocked(e.target.f.id,3e3)&&(j(),U(y.AUTOPLAY_BLOCKED))}}function tn(e){k.log("onYouTubePlayerError: "+e.data);const t=r.playerFromUid(e.target.f.id);t.setPlayable(!1),xe(t,e.target.getVideoUrl())}function zt(){k.log("initSoundCloudAPI()"),U(y.LOADING,he())}function nn(){k.log("onSoundCloudPlayerEventReady()"),ct()}function an(e){if(e!==void 0){const t=new URL(decodeURIComponent(e)),n=t.searchParams.get("url");if(n!==null){const a=n.split("/"),o="tracks".toUpperCase();for(let l=0;l<a.length;l++)if(a[l].toUpperCase()===o)return parseInt(a[l+1])}}return null}function sn(e){k.log(`onSoundCloudPlayerEvent: PLAY (uID: ${e.soundId})`),_.add(m.SOUNDCLOUD,b.STATE_PLAYING,e.soundId),r.crossfade.isFading()&&r.isCurrent(e.soundId)?_.scPlayDoubleTrigger(e.soundId,M.maxBufferingDelay*1e3)&&F.syncAll(e.soundId,F.STATE.PLAY):(F.syncAll(e.soundId,F.STATE.PLAY),r.current.mute(T.masterMute),r.current.setVolume(T.masterVolume)),r.current.getEmbeddedPlayer().getDuration(t=>{r.current.setDuration(Math.round(t/1e3)),X.start()})}function mt(e,t=null){k.log(`soundCloudPlaybackBlocked(): ${k.getObjectKeyForValue(y,e)}`),j(),X.stop(!1),U(e,t)}function on(e){k.log(`onSoundCloudPlayerEvent: PAUSE (uID: ${e.soundId})`),_.add(m.SOUNDCLOUD,b.STATE_PAUSED,e.soundId),_.scAutoPlayBlocked(e.soundId,3e3)?mt(y.AUTOPLAY_BLOCKED):_.scWidgetPlayBlocked(e.soundId,3e4)?mt(y.PLAYBACK_BLOCKED,{currentTrack:r.trackFromUid(e.soundId),numTracks:r.getNumTracks()}):r.isCurrent(e.soundId)?r.current.getPosition(t=>{t>0&&(F.syncAll(e.soundId,F.STATE.PAUSE),X.stop(!1))}):r.crossfade.stop()}function rn(e){k.log(`onSoundCloudPlayerEvent: FINISH (uID: ${e.soundId})`),r.isCurrent(e.soundId)?(X.stop(!0),oe(null)):r.crossfade.stop()}function ln(){this.getCurrentSound(e=>{const t=r.playerFromUid(e.id);k.log(`onSoundCloudPlayerEvent: ERROR for track: ${r.trackFromUid(e.id)}. ${t.getArtist()} - ${t.getTitle()} - [${t.getUid()} / ${t.getIframeId()}]`),t.setPlayable(!1)})}const v={keyboardShortcuts:{description:"Keyboard Shortcuts",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},masterVolume:{description:"Master Volume",values:[0,25,50,75,100],default:100,valueStrings:["0%","25%","50%","75%","100%"]},masterMute:{description:"Master Mute",values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoPlay:{description:"Autoplay next track",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoCrossfade:{description:"Auto Crossfade to next track",values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoCrossfadeLength:{description:"Auto Crossfade Length",values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},autoCrossfadeCurve:{description:"Auto Crossfade Curve",values:[0,1],default:1,valueStrings:["EQUAL POWER","LINEAR"]},autoScroll:{description:"Autoscroll to next track",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},smoothScrolling:{description:"Smooth Scrolling to next track",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoExitFullscreen:{description:"Exit Fullscreen on next track",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},animateNowPlayingIcon:{description:"Animate Playing Track Icon",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoResumePlayback:{description:"Auto Resume Playback on focus",values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackCrossfade:{description:"Track to Track Crossfade",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},trackCrossfadeLength:{description:"Track to Track Crossfade Length",values:[5,10,15,20,25,30],default:10,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},trackCrossfadeCurve:{description:"Track to Track Crossfade Curve",values:[0,1],default:0,valueStrings:["EQUAL POWER","LINEAR"]},timeRemainingWarning:{description:"Time Remaining Warning",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},timeRemainingSeconds:{description:"Time Remaining Warning Seconds",values:[15,30,45,60],default:60,valueStrings:["15 sec","30 sec","45 sec","60 sec"]},autoExitFsOnWarning:{description:"Exit Fullscreen on Time Warning",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},keepMobileScreenOn:{description:"Keep Mobile Screen On when playing",values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackTimesOnMobile:{description:"Show Track Times on mobile",values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackThumbnailOnMobile:{description:"Show Track Thumbnail on mobile",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},pt={version:21,storageChangeSync:!1,user:{keyboardShortcuts:v.keyboardShortcuts.default,masterVolume:v.masterVolume.default,masterMute:v.masterMute.default,autoPlay:v.autoPlay.default,autoCrossfade:v.autoCrossfade.default,autoCrossfadeLength:v.autoCrossfadeLength.default,autoCrossfadeCurve:v.autoCrossfadeCurve.default,autoScroll:v.autoScroll.default,smoothScrolling:v.smoothScrolling.default,autoExitFullscreen:v.autoExitFullscreen.default,animateNowPlayingIcon:v.animateNowPlayingIcon.default,autoResumePlayback:v.autoResumePlayback.default,trackCrossfade:v.trackCrossfade.default,trackCrossfadeLength:v.trackCrossfadeLength.default,trackCrossfadeCurve:v.trackCrossfadeCurve.default,timeRemainingWarning:v.timeRemainingWarning.default,timeRemainingSeconds:v.timeRemainingSeconds.default,autoExitFsOnWarning:v.autoExitFsOnWarning.default,keepMobileScreenOn:v.keepMobileScreenOn.default,trackTimesOnMobile:v.trackTimesOnMobile.default,trackThumbnailOnMobile:v.trackThumbnailOnMobile.default,blurFocusBgChange:!1},priv:{continueAutoPlay:!1,showLeftArrowHint:!0,showRightArrowHint:!0,showDetailsHint:!0,showTrackImageHint:!0}},Ee={theme:{description:"Theme",values:["light","dark","auto"],default:"auto",valueStrings:["LIGHT","DARK","AUTO / SYSTEM"]},trackLayout:{description:"Track Layout",values:["list","2-column","3-column"],default:"3-column",valueStrings:["LIST","2 COLUMN","3 / 4 COLUMN"]},tracksPerPage:{description:"Tracks Per Page for Search &amp; Shuffle",values:[...Array(22).keys()].map(e=>e+3),default:12,valueStrings:[...Array(22).keys()].map(e=>`${e+3}`)},keyboardShortcuts:{description:"Keyboard Shortcuts",values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},$n={version:6,storageChangeSync:!1,user:{theme:Ee.theme.default,trackLayout:Ee.trackLayout.default,tracksPerPage:Ee.tracksPerPage.default,keyboardShortcuts:Ee.keyboardShortcuts.default},priv:{banners:{showFrontpageIntro:!0,showPremiumIntro:!0,showPromoIntro:!0}}};const C=N("interaction"),ne=new We(10);let f={},be=!1;const $={nowPlayingIconsSelector:"h2.entry-title",autoPlayToggleId:"footer-autoplay-toggle",crossfadeToggleId:"footer-crossfade-toggle",allowKeyboardShortcutsEvent:"allowKeyboardShortcuts",denyKeyboardShortcutsEvent:"denyKeyboardShortcuts",doubleClickDelay:500},P={playbackControls:{details:null,thumbnail:null,statePlaying:!1},fullscreenTarget:null,nowPlayingIcons:null,autoPlayToggle:null,crossfadeToggle:null};document.addEventListener("DOMContentLoaded",()=>{C.log("DOMContentLoaded"),yt(),ut()&&(dn(),ht.setHandlers(),lt(f.user),Et(f.user.autoPlay),bt(f.user.autoCrossfade))});document.addEventListener($.allowKeyboardShortcutsEvent,()=>{f.user.keyboardShortcuts&&(be=!0)});document.addEventListener($.denyKeyboardShortcutsEvent,()=>{f.user.keyboardShortcuts&&(be=!1)});function yt(){C.log("readSettings()"),f=Je(J.UF_PLAYBACK_SETTINGS,pt),C.log(f)}function dn(){C.log("initInteraction()"),be=f.user.keyboardShortcuts,P.playbackControls.details=document.getElementById("playback-controls").querySelector(".details-control"),P.playbackControls.thumbnail=document.getElementById("playback-controls").querySelector(".thumbnail-control"),P.nowPlayingIcons=document.querySelectorAll($.nowPlayingIconsSelector),P.autoPlayToggle=document.getElementById($.autoPlayToggleId),P.crossfadeToggle=document.getElementById($.crossfadeToggleId),window.addEventListener("blur",gn),window.addEventListener("focus",fn),window.addEventListener("storage",mn),document.addEventListener("fullscreenchange",St),document.addEventListener("webkitfullscreenchange",St),Ie("i.nav-bar-arrow-back","click",Se,navigationVars.prevUrl),Ie("i.nav-bar-arrow-fwd","click",Se,navigationVars.nextUrl)}document.addEventListener("keydown",e=>{if(ht.isPlaybackReady()&&be&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":kt(e);break}switch(e.key){case" ":e.preventDefault(),te();break;case"ArrowLeft":yn(e);break;case"ArrowRight":hn(e);break;case"A":Tt(e);break;case"f":case"F":pn(e);break;case"m":case"M":e.preventDefault(),_e(),B.show(f.user.masterMute?"Volume is muted (<b>m</b> to unmute)":"Volume is unmuted (<b>m</b> to mute)",3);break;case"x":case"X":P.crossfadeToggle.classList.contains("disabled")===!1&&Pt(e);break}}});function pn(e){e.preventDefault(),P.fullscreenTarget===null?vt():re()}function yn(e){e.preventDefault(),re(),e.shiftKey===!0?Se(e,navigationVars.prevUrl):(ne.add(m.KEYBOARD,b.KEY_ARROW_LEFT,null),En(navigationVars.prevUrl,x())||Re(e))}function En(e,t){return e!==null&&(t.currentTrack===1&&t.isPlaying===!1&&(ke("showLeftArrowHint","<b>Tip:</b> Double click the Left Arrow key to go to the previous page"),ne.doubleClicked(m.KEYBOARD,b.KEY_ARROW_LEFT,$.doubleClickDelay)))?(le(e,!1),!0):!1}function hn(e){e.preventDefault(),re(),e.shiftKey===!0?Se(e,navigationVars.nextUrl):(ne.add(m.KEYBOARD,b.KEY_ARROW_RIGHT,null),bn(navigationVars.nextUrl,x())||oe(e))}function bn(e,t){return e!==null&&(t.currentTrack===t.numTracks&&(ke("showRightArrowHint","<b>Tip:</b> Double click the Right Arrow key to go to the next page"),ne.doubleClicked(m.KEYBOARD,b.KEY_ARROW_RIGHT,$.doubleClickDelay)))?(le(e,t.isPlaying),!0):!1}function ke(e,t,n=0){f.priv[e]&&(B.show(t,n),f.priv[e]=!1)}function le(e,t=!1){C.log(`navigateTo(): ${e} - continueAutoPlay: ${t}`),e!==null&&e.length>0&&(t&&(f.priv.continueAutoPlay=!0),window.location.href=e)}const ht=(()=>{let e=!1;return{isPlaybackReady(){return e},setHandlers:t};function t(){it({[y.LOADING]:n,[y.READY]:a,[y.MEDIA_PLAYING]:o,[y.MEDIA_PAUSED]:l,[y.MEDIA_ENDED]:i,[y.MEDIA_TIME_REMAINING]:h,[y.MEDIA_SHOW]:d,[y.CONTINUE_AUTOPLAY]:E,[y.RESUME_AUTOPLAY]:p,[y.AUTOPLAY_BLOCKED]:O,[y.PLAYBACK_BLOCKED]:I,[y.MEDIA_UNAVAILABLE]:W})}function n(c,u){se(u.loadingPercent)}function a(c){L(c),se(0),P.playbackControls.details.addEventListener("click",Ct),P.playbackControls.thumbnail.addEventListener("click",Ct),P.autoPlayToggle.addEventListener("click",Tt),P.crossfadeToggle.addEventListener("click",Pt),document.addEventListener("visibilitychange",Sn),f.user.keepMobileScreenOn&&At.enable(),e=!0}function o(c,u){if(L(c,u),x().numTracks>1){const R=document.querySelector(`#${u.postId} ${$.nowPlayingIconsSelector}`);S(R),G(R,"playing-paused","now-playing-icon"),f.user.animateNowPlayingIcon&&R.classList.add("playing-animate")}}function l(c,u){L(c,u),x().numTracks>1&&document.querySelector(`#${u.postId} ${$.nowPlayingIconsSelector}`).classList.add("playing-paused")}function i(c){L(c),f.user.autoExitFullscreen&&re(),se(0),x().numTracks>1&&S()}function h(c,u){f.user.autoExitFsOnWarning&&u.timeRemainingSeconds<=f.user.timeRemainingSeconds&&re()}function d(c,u){L(c,u),i(),u.scrollToMedia&&It.id(u.postId)}function E(c){L(c),le(navigationVars.nextUrl,!0)}function p(c){L(c),C.log(`playbackEvents.RESUME_AUTOPLAY: ${f.priv.continueAutoPlay}`),f.priv.continueAutoPlay&&(f.priv.continueAutoPlay=!1,gt())}function O(c){L(c),B.show("Autoplay was blocked, click or tap Play to continue...",30,"play",()=>{x().isPlaying===!1&&te()})}function I(c,u){L(c,u),B.show("Unable to play track, skipping to next...",5),Y(u,5)}function W(c,u){L(c,u),A(u.postId)?(B.show("YouTube Premium track, skipping...",5,"help",()=>{window.location.href="/channel/premium/"}),Y(u,5)):(B.show("Unable to play track, skipping to next...",5),$e("EVENT_MEDIA_UNAVAILABLE",u),Y(u,5))}function L(c=null,u=null){C.isDebug()&&c!==null&&(C.log(`playbackEvents.${C.getObjectKeyForValue(y,c)} (${c})`),u!==null&&C.log(u))}function S(c){P.nowPlayingIcons.forEach(u=>{u!==c&&u.classList.remove("now-playing-icon","playing-animate","playing-paused")})}function Y(c,u=5){setTimeout(()=>{c.currentTrack<c.numTracks?dt(c.currentTrack+1,!0):navigationVars.nextUrl!==null&&le(navigationVars.nextUrl,!0)},u*1e3+250)}function A(c){const u=document.getElementById(c);return u!==null?u.classList.contains("category-premium"):!1}})(),At=(()=>{let e=null;return{enable:n,stateVisible:a};function t(){return"wakeLock"in navigator&&"request"in navigator.wakeLock}async function n(){t()?document.visibilityState==="visible"&&(await o()!==!0&&C.log("screenWakeLock.enable(): Screen Wake Lock request failed")):(C.log("screenWakeLock.enable(): Screen Wake Lock is not supported"),B.show("Keep Screen On is not supported",5,"Turn Off",()=>f.user.keepMobileScreenOn=!1))}function a(){C.log("screenWakeLock.stateVisible()"),t()&&e===null&&o()}async function o(){try{return e=await navigator.wakeLock.request("screen"),C.log("screenWakeLock.request(): Screen Wake Lock is Enabled"),e.addEventListener("release",()=>{C.log("screenWakeLock.request(): Screen Wake Lock was Released"),e=null}),!0}catch(l){C.error(`screenWakeLock.request(): ${l.name} - ${l.message}`)}return!1}})();function gn(){setTimeout(()=>{document.activeElement instanceof HTMLIFrameElement?setTimeout(()=>{document.activeElement.blur(),document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},250):f.user.autoPlay===!1&&f.user.blurFocusBgChange&&document.body.classList.add("blurred")},0)}function fn(){f.user.autoPlay===!1&&f.user.blurFocusBgChange&&document.body.classList.remove("blurred")}function mn(e){if(f.storageChangeSync){const t=Qe(e,J.UF_PLAYBACK_SETTINGS);t!==null&&(C.log(`windowEventStorage(): ${e.key}`),yt())}}function St(){P.fullscreenTarget=document.fullscreenElement!==null?document.fullscreenElement.id:null}function Sn(){document.visibilityState==="visible"?(f.user.autoResumePlayback&&P.playbackControls.statePlaying&&(x().isPlaying===!1&&te()),f.user.keepMobileScreenOn&&At.stateVisible()):document.visibilityState==="hidden"&&(f.user.autoResumePlayback&&x().isPlaying?P.playbackControls.statePlaying=!0:P.playbackControls.statePlaying=!1)}function Ct(e){kt(e),ne.add(m.MOUSE,b.MOUSE_CLICK,null),e.target.tagName.toLowerCase()==="img"?ke("showTrackImageHint","<b>Tip:</b> Double click or double tap on the Track Thumbnail for full screen"):ke("showDetailsHint","<b>Tip:</b> Double click or double tap on Artist &amp; Title for full screen"),ne.doubleClicked(m.MOUSE,b.MOUSE_CLICK,$.doubleClickDelay)&&vt()}function Se(e,t){e!==null&&t!==null&&(e.preventDefault(),le(t,x().isPlaying))}function kt(e){e.preventDefault(),It.id(x().postId)}function vt(){const e=document.getElementById(x().iframeId);e.requestFullscreen()}function re(){P.fullscreenTarget!==null&&(document.exitFullscreen(),P.fullscreenTarget=null)}function Tt(e){e.preventDefault(),f.user.autoPlay=!(f.user.autoPlay===!0),B.show(f.user.autoPlay?"Autoplay enabled (<b>Shift</b> + <b>A</b> to disable)":"Autoplay disabled (<b>Shift</b> + <b>A</b> to enable)",5),Et(f.user.autoPlay)}function Et(e){C.log(`updateAutoPlayDOM() - autoPlay: ${e}`),P.autoPlayToggle.querySelector(".autoplay-on-off").textContent=e?"ON":"OFF",e?G(document.body,"autoplay-off","autoplay-on"):G(document.body,"autoplay-on","autoplay-off"),e?P.crossfadeToggle.classList.remove("disabled"):P.crossfadeToggle.classList.add("disabled"),e?document.body.classList.remove("blurred"):document.hasFocus()===!1&&f.user.blurFocusBgChange&&document.body.classList.add("blurred")}function Pt(e){e.preventDefault(),f.user.autoCrossfade=!(f.user.autoCrossfade===!0),B.show(f.user.autoCrossfade?"Auto Crossfade enabled (<b>x</b> to disable)":"Auto Crossfade disabled (<b>x</b> to enable)",5),bt(f.user.autoCrossfade)}function bt(e){C.log(`updateCrossfadeDOM() - autoCrossfade: ${e}`),P.crossfadeToggle.querySelector(".crossfade-on-off").textContent=e?"ON":"OFF"}const It=(()=>{const e=z("--site-header-down"),t=z("--site-header-down-mobile"),n=z("--site-header-up"),a=z("--site-header-up-mobile");return{id:o};function o(h){if(f.user.autoScroll){const d=Math.round(window.scrollY+document.getElementById(h).getBoundingClientRect().top),E=Math.round(window.pageYOffset);let p=l(d>E);E+p+i()>d&&(p=l(!1)),window.scroll({top:d-(p+i()),left:0,behavior:f.user.smoothScrolling?"smooth":"auto"})}}function l(h){const d=Le(Q.SITE_MAX_WIDTH_MOBILE);return h?d===!0?t:e:d===!0?a:n}function i(){return z("--site-content-margin-top")-1}})();
//# sourceMappingURL=interaction.js.map
