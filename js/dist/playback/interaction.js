import{a as be,b as De,d as xa,e as ba,f as Ct,g as X,i as pt,j as We,m as N,n as le,o as ct,q as I,r as U,s as Z,v as ha,w as la,x as It,y as wa,z as br}from"../chunk.T4NVBIE7.js";function Pt(e,t){let r=t.mediaUrl+" | "+t.mediaTitle;console.log(`DEBUGLOGGER.........: logErrorOnServer(): ${e} - ${r}`),gtag("event",r,{event_category:e,event_label:"Ultrafunk Client Error"})}var tt=I("eventlogger"),d={UNKNOWN:1e3,KEYBOARD:100,MOUSE:110,YOUTUBE:1,SOUNDCLOUD:2,ULTRAFUNK:50},m={UNKNOWN:-2e3,KEY_ARROW_LEFT:80,KEY_ARROW_RIGHT:81,MOUSE_CLICK:82,STATE_ERROR:-5,STATE_UNSTARTED:-1,STATE_ENDED:0,STATE_PLAYING:1,STATE_PAUSED:2,STATE_BUFFERING:3,STATE_CUED:5,RESUME_AUTOPLAY:50,PLAYER_ERROR:60,CROSSFADE_START:70},yr={eventSource:d.UNKNOWN,eventType:m.UNKNOWN,uId:null,timeStamp:0},rt=class{constructor(t=10){this.log=[],this.maxEntries=t,this.lastPos=0,this.matchCount=0}add(t,r,n,o=Date.now()){let c=Object.create(yr);c.eventSource=t,c.eventType=r,c.uId=n,c.timeStamp=o,this.log.length<this.maxEntries?this.log.push(c):(this.log.shift(),this.log.push(c))}clear(){this.log=[]}initMatch(){this.lastPos=this.log.length-1,this.matchCount=0}matchesEvent(t,r,n,o=null){this.log[this.lastPos-t].eventSource===r&&this.log[this.lastPos-t].eventType===n&&this.log[this.lastPos-t].uId===o&&this.matchCount++}matchesDelta(t,r){this.log[this.lastPos].timeStamp-this.log[this.lastPos-t].timeStamp<=r&&this.matchCount++}isPatternMatch(t,r){return this.matchCount===t?(tt.log(`MATCH for: ${r}`),tt.logEventLog(this.log,d,m),!0):!1}},at=class extends rt{constructor(t){super(t)}doubleClicked(t,r,n){return this.initMatch(),this.lastPos>=1&&(this.matchesEvent(1,t,r),this.matchesEvent(0,t,r),this.matchesDelta(1,n)),this.isPatternMatch(3,`${tt.getObjectKeyForValue(d,t)} Double Clicked`)}},Te=class extends rt{constructor(t){super(t)}ytAutoplayBlocked(t,r){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,d.ULTRAFUNK,m.RESUME_AUTOPLAY,null),this.matchesEvent(2,d.YOUTUBE,m.STATE_UNSTARTED,t),this.matchesEvent(1,d.YOUTUBE,m.STATE_BUFFERING,t),this.matchesEvent(0,d.YOUTUBE,m.STATE_UNSTARTED,t),this.matchesDelta(3,r)),this.isPatternMatch(5,"YouTube Autoplay Blocked")}scAutoplayBlocked(t,r){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,d.ULTRAFUNK,m.RESUME_AUTOPLAY,null),this.matchesEvent(2,d.SOUNDCLOUD,m.STATE_PLAYING,t),this.matchesEvent(1,d.SOUNDCLOUD,m.STATE_PAUSED,t),this.matchesEvent(0,d.SOUNDCLOUD,m.STATE_PAUSED,t),this.matchesDelta(3,r)),this.isPatternMatch(5,"SoundCloud Autoplay Blocked")}scWidgetPlayBlocked(t,r){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,d.SOUNDCLOUD,m.STATE_PLAYING,t),this.matchesEvent(1,d.SOUNDCLOUD,m.STATE_PAUSED,t),this.matchesEvent(0,d.SOUNDCLOUD,m.STATE_PAUSED,t),this.matchesDelta(2,r)),this.isPatternMatch(4,"SoundCloud WidgetPlay Blocked")}scPlayDoubleTrigger(t,r){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,d.ULTRAFUNK,m.CROSSFADE_START,null),this.matchesEvent(1,d.SOUNDCLOUD,m.STATE_PLAYING,t),this.matchesEvent(0,d.SOUNDCLOUD,m.STATE_PLAYING,t),this.matchesDelta(1,r)),this.isPatternMatch(4,"SoundCloud Play Double Trigger")}};var re={MIN:0,MAX:100},Q={NONE:-1,AUTO:0,TRACK:1},nt={NONE:-1,EQUAL_POWER:0,LINEAR:1},K={NONE:0,INIT:1,FADING:2},At={intervalEqPow:33,intervalLinear:100},Tr=(e,t)=>{let r=e,n=t,o=K.NONE,c=-1,g=null,b=null,f=0,T=0,v=Q.NONE,W=null,H=0;return{isFading(){return o!==K.NONE},init:Xe,start:ze,stop:y,mute:te};function Xe(O,C,D=null){return o===K.NONE&&Ze(D)===!0?(be.log(`init() - type: ${be.getObjectKeyForValue(Q,O)} - fadeInUid: ${D} - preset: ${C.length} sec ${be.getObjectKeyForValue(nt,C.curve)} (Name: ${C.name})`),o=K.INIT,T=r.masterVolume,v=O,W=C,b.setVolume(0),D===null?n.nextTrack(!0):n.jumpToTrack(n.trackFromUid(D),!0,!1),{fadeOutPlayer:n.indexMap.get(g.getUid()),fadeInPlayer:n.indexMap.get(b.getUid())}):null}function ze(){o===K.INIT&&(o=K.FADING,g.getPosition(O=>{let C=W.curve===nt.EQUAL_POWER?At.intervalEqPow:At.intervalLinear;H=(O+C)/1e3;let D=g.getDuration()-H,J=D-C/1e3;v===Q.AUTO?f=J:v===Q.TRACK&&(f=D>W.length?W.length:J),be.log(`start() - fadeStartTime: ${H.toFixed(2)} sec - timeRemaining: ${D.toFixed(2)} sec - fadeLength: ${f.toFixed(2)} sec - updateInterval: ${C} ms`),c=setInterval(W.curve===nt.EQUAL_POWER?fr:Er,C)}))}function y(){be.log(`stop() - fadeState: ${be.getObjectKeyForValue(K,o)}`),o!==K.NONE&&(c!==-1&&(clearInterval(c),c=-1),g!==null&&(g.pause(),g.seekTo(0),setTimeout(()=>{g.setVolume(r.masterVolume),g=null},200)),b!==null&&(b=null),o=K.NONE,f=0,T=0,v=Q.NONE,W=null,H=0)}function te(O){g!==null&&g.mute(O)}function Ze(O){return g=n.current,b=O===null?n.next:n.playerFromUid(O),!!(g.getPlayable()&&b.getPlayable())}function fr(){g.getPosition(O=>{let C=O/1e3-H,D=C>=0?C:0,J=T-T*(D/f),et=J>=re.MIN?J:re.MIN,pr=Math.round(Math.sqrt(T*et)),St=Math.round(Math.sqrt(T*(T-et)));D>=f&&et<=re.MIN&&St>=T?(g.setVolume(re.MIN),b.setVolume(T),y()):(g.setVolume(pr),b.setVolume(St))})}function Er(){g.getPosition(O=>{let C=O/1e3-H,D=Math.round(T*(C/f)),J=T-D;C>f&&J<re.MIN&&D>T?(g.setVolume(re.MIN),b.setVolume(T),y()):(g.setVolume(J),b.setVolume(D))})}};var Ce=class{constructor(t,r,n){this.trackId=t,this.iframeId=r,this.embeddedPlayer=n,this.playable=!0,this.duration=0,this.artist=null,this.title=null,this.thumbnailSrc=null,this.thumbnailClass="type-default",this.thumbnail=new Image,this.thumbnail.decoding="async"}getTrackId(){return this.trackId}getIframeId(){return this.iframeId}getUid(){return this.iframeId}getEmbeddedPlayer(){return this.embeddedPlayer}getPlayable(){return this.playable}setPlayable(t){this.playable=t}getDuration(){return this.duration}setDuration(t){this.duration=t}getArtist(){return this.artist}setArtist(t){this.artist=t}getTitle(){return this.title}setTitle(t){this.title=t}getThumbnailSrc(){return this.thumbnailSrc}getThumbnailClass(){return this.thumbnailClass}seekTo(t){this.embeddedPlayer.seekTo(t)}setVolume(t){this.embeddedPlayer.setVolume(t)}setThumbnail(t){this.thumbnailSrc=t.src,this.thumbnailClass=t.class,this.thumbnail.src=t.src}},ot=class extends Ce{constructor(t,r,n,o){super(t,r,n);this.previousPlayerState=-1,super.setThumbnail(br(o))}pause(){this.embeddedPlayer.pauseVideo()}stop(){this.embeddedPlayer.stopVideo()}isPlaybackError(t){return De.log(`YouTube.play() - current playerState: ${this.embeddedPlayer.getPlayerState()} - previous playerState: ${this.previousPlayerState} - playable: ${this.playable}`),this.embeddedPlayer.getPlayerState()===-1&&this.previousPlayerState===-1&&this.playable===!0?(De.warn(`MediaPlayer.YouTube.play() - Unable to play track: ${this.getArtist()} - "${this.getTitle()}" with videoId: ${this.embeddedPlayer.getVideoData().video_id} -- No YouTube API error given!`),this.playable=!1,t(this,this.embeddedPlayer.getVideoUrl()),!0):(this.previousPlayerState=this.embeddedPlayer.getPlayerState(),!1)}play(t){this.isPlaybackError(t)===!1&&(this.playable===!0?this.embeddedPlayer.playVideo():t(this,this.embeddedPlayer.getVideoUrl()))}getVolume(t){t(this.embeddedPlayer.getVolume())}mute(t){t?this.embeddedPlayer.mute():this.embeddedPlayer.unMute()}getPosition(t){t(this.embeddedPlayer.getCurrentTime()*1e3,this.duration)}},ve=class extends Ce{constructor(t,r,n,o){super(t,r,n);this.soundId=this.getSoundId(o),this.volume=re.MAX,this.muted=!1}getSoundId(t){if(t!==void 0){let n=new URL(decodeURIComponent(t)).searchParams.get("url");if(n!==null){let o=n.split("/"),c="tracks".toUpperCase();for(let g=0;g<o.length;g++)if(o[g].toUpperCase()===c)return parseInt(o[g+1])}}return De.error(`MediaPlayer.SoundCloud.getSoundId() failed for: ${this.iframeId}`),null}setThumbnail(){this.embeddedPlayer.getCurrentSound(t=>super.setThumbnail(hr(t)))}getUid(){return this.soundId}pause(){this.embeddedPlayer.pause()}play(t){this.playable===!0?this.embeddedPlayer.getCurrentSound(r=>{r.playable===!0?this.embeddedPlayer.play():t(this,r.permalink_url)}):t(this,"https://soundcloud.com")}stop(){this.pause(),super.seekTo(0)}seekTo(t){super.seekTo(t*1e3)}getVolume(t){this.embeddedPlayer.getVolume(r=>t(r))}setVolume(t){t!==0&&(this.volume=t),(this.muted===!1||t===0)&&super.setVolume(t)}mute(t){this.muted=!!t,t?this.setVolume(0):this.setVolume(this.volume)}getPosition(t){this.embeddedPlayer.getPosition(r=>t(r,this.duration))}},st=class extends Ce{constructor(t){super(null,null,t);this.numTracks=3,this.currentTrack=2}get embedded(){return this.embeddedPlayer}getNumTracks(){return this.numTracks}getCurrentTrack(){return this.currentTrack}setArtistTitleThumbnail(t,r){It(t,this),super.setThumbnail(br(`https://www.youtube.com/embed/${r}`))}getStatus(){return{currentTrack:this.getCurrentTrack(),numTracks:this.getNumTracks(),artist:this.getArtist(),title:this.getTitle(),thumbnail:{src:this.getThumbnailSrc(),class:this.getThumbnailClass()}}}};function hr(e,t=wa){let r=e.artwork_url!==null?e.artwork_url:e.user.avatar_url;return r!=null?{src:r,class:"type-soundcloud"}:{src:t,class:"type-default"}}var Lt=()=>{let e=null,t=null,r=null,n=[],o=new Map,c=0;return{indexMap:o,init:g,get crossfade(){return r},add:b,getPlayerIndex(){return c},setPlayerIndex(y){c=y},get current(){return n[c]},get next(){return n[c+1]},getNumTracks(){return n.length},getCurrentTrack(){return c+1},playerFromUid(y){return n[o.get(y)]},trackFromUid(y){return o.get(y)+1},isCurrent(y){return y===this.current.getUid()},uIdFromIframeId:f,stop:T,mute:v,getStatus:W,prevTrack:H,nextTrack:Xe,jumpToTrack:ze};function g(y,te){De.log("init()"),e=y,t=te,r=Tr(y,this)}function b(y){De.log(y),n.push(y),o.set(y.getUid(),n.length-1)}function f(y){return n.find(te=>te.iframeId===y).getUid()}function T(){this.current.stop(),r.stop()}function v(){this.current.mute(e.masterMute),r.mute(e.masterMute)}function W(){return{currentTrack:this.getCurrentTrack(),numTracks:this.getNumTracks(),artist:this.current.getArtist(),title:this.current.getTitle(),thumbnail:{src:this.current.getThumbnailSrc(),class:this.current.getThumbnailClass()}}}function H(y){return c>0?(c--,t(y),!0):!1}function Xe(y){return c++,c<this.getNumTracks()?(t(y),!0):!1}function ze(y,te,Ze=!0){return y>0&&y<=this.getNumTracks()?(c=y-1,t(te,Ze),!0):!1}};function lt(e,t){xa.log(`addSettingsObserver() for property: ${e}`),e in Ct||(Ct[e]=[]),Ct[e].push(t)}var Ue=I("playback-controls"),ne={},he={},Ne={progressControlsId:"progress-controls",playbackControlsId:"playback-controls"},u={DISABLED:"state-disabled",ENABLED:"state-enabled",PLAY:"state-play",PAUSE:"state-pause"},a={progressSeek:{element:null,state:u.DISABLED,click:null},progressBar:{element:null,state:u.DISABLED},details:{element:null,state:u.DISABLED,artistElement:null,titleElement:null},thumbnail:{element:null,state:u.DISABLED,img:null},timer:{element:null,state:u.DISABLED,positionElement:null,durationElement:null,positionSeconds:-1,durationSeconds:-1},prevTrack:{element:null,state:u.DISABLED},playPause:{element:null,state:u.DISABLED,iconElement:null},nextTrack:{element:null,state:u.DISABLED},shuffle:{element:null,state:u.DISABLED},mute:{element:null,state:u.DISABLED,iconElement:null}};function Oe(e,t,r){Ue.log("init()"),ne=e,he=t;let n=document.getElementById(Ne.progressControlsId);n!==null?(a.progressSeek.element=n.querySelector(".seek-control"),a.progressSeek.click=r,a.progressBar.element=n.querySelector(".bar-control")):Ue.error(`init(): Unable to getElementById() for '#${Ne.progressControlsId}'`);let o=document.getElementById(Ne.playbackControlsId);o!==null?(a.details.element=o.querySelector(".details-control"),a.details.artistElement=a.details.element.querySelector(".details-artist"),a.details.titleElement=a.details.element.querySelector(".details-title"),a.thumbnail.element=o.querySelector(".thumbnail-control"),a.thumbnail.img=a.thumbnail.element.querySelector("img"),a.timer.element=o.querySelector(".timer-control"),a.timer.positionElement=a.timer.element.querySelector(".timer-position"),a.timer.durationElement=a.timer.element.querySelector(".timer-duration"),a.prevTrack.element=o.querySelector(".prev-control"),a.playPause.element=o.querySelector(".play-pause-control"),a.playPause.iconElement=a.playPause.element.querySelector("i"),a.nextTrack.element=o.querySelector(".next-control"),a.shuffle.element=o.querySelector(".shuffle-control"),a.mute.element=o.querySelector(".mute-control"),a.mute.iconElement=a.mute.element.querySelector("i")):Ue.error(`init(): Unable to getElementById() for '#${Ne.playbackControlsId}'`)}function Re(e,t,r,n){Ue.log("ready()"),L(a.progressSeek,u.ENABLED),a.progressSeek.element.addEventListener("click",kr),L(a.progressBar,u.ENABLED),L(a.details,u.ENABLED),L(a.thumbnail,u.ENABLED),L(a.timer,u.ENABLED),ne.trackThumbnailOnMobile&&a.thumbnail.element.classList.add("show-on-mobile"),ne.trackTimesOnMobile&&a.timer.element.classList.add("show-on-mobile"),L(a.prevTrack,u.DISABLED),a.prevTrack.element.addEventListener("click",e),L(a.playPause,u.PLAY),a.playPause.element.addEventListener("click",t),L(a.nextTrack,he.getNumTracks()>1?u.ENABLED:u.DISABLED),a.nextTrack.element.addEventListener("click",r),L(a.shuffle,u.ENABLED),L(a.mute,u.ENABLED),a.mute.element.addEventListener("click",n),Dt(),lt("autoplay",Sr),lt("masterMute",Dt)}function L(e,t=u.DISABLED){U(e.element,e.state,t),e.state=t,t===u.PLAY?a.playPause.iconElement.textContent="play_circle_filled":t===u.PAUSE&&(a.playPause.iconElement.textContent="pause_circle_filled")}function _e(e,t){it(t===0?0:e/(t*1e3))}function ke(e){it(e/100)}function it(e){a.progressBar.element.style.transform=`scaleX(${e})`}function kr(e){if(a.timer.durationSeconds>0){let t=e.clientX/document.documentElement.clientWidth*100,r=Math.round(a.timer.durationSeconds*t/100);a.progressSeek.click(r),S()===!1&&(ke(t),oe(r,a.timer.durationSeconds))}}function ut(e){a.details.artistElement.textContent=e.artist||"",a.details.titleElement.textContent=e.title||"",Pr(e.thumbnail),oe(-1,-1)}function Pr(e){e.src!==a.thumbnail.img.src&&(a.thumbnail.element.classList.remove("type-default","type-youtube","type-soundcloud"),a.thumbnail.element.classList.add("loading",e.class),a.thumbnail.img.src=e.src,a.thumbnail.img.decode().then(()=>a.thumbnail.element.classList.remove("loading")))}function oe(e,t){e!==-1&&a.timer.positionSeconds!==e?(a.timer.positionSeconds=e,ne.autoplay===!1&&(e=t-e),Ye(a.timer.positionElement,e)):e===-1&&a.timer.positionSeconds===-1&&(a.timer.positionElement.textContent="00:00"),t!==-1&&a.timer.durationSeconds!==t?(a.timer.durationSeconds=t,Ye(a.timer.durationElement,t)):t===-1&&a.timer.durationSeconds===-1&&(a.timer.durationElement.textContent="00:00")}function Ye(e,t){let r=new Date(t*1e3).toISOString();e.textContent=t>60*60?r.substr(11,8):r.substr(14,5)}function vt(){a.timer.positionElement.textContent="00:00",a.timer.durationElement.textContent="00:00",a.timer.positionSeconds=0,a.timer.durationSeconds=0}function S(){return a.playPause.state===u.PAUSE}function Se(){let e=he.getStatus();vt(),ut(e),S()===!1&&e.currentTrack<=1&&L(a.prevTrack,u.DISABLED),e.currentTrack<e.numTracks&&L(a.nextTrack,u.ENABLED)}function Pe(){let e=he.getStatus();L(a.playPause,u.PAUSE),L(a.prevTrack,u.ENABLED),ut(e)}function V(){L(a.playPause,u.PLAY)}function Me(e){e?a.playPause.element.classList.toggle("time-remaining-warning"):a.playPause.element.classList.remove("time-remaining-warning")}function se(){let e=he.getStatus();vt(),ut(e),L(a.prevTrack,u.ENABLED),e.currentTrack>=e.numTracks&&L(a.nextTrack,u.DISABLED)}function Dt(){a.mute.iconElement.textContent=ne.masterMute?"volume_off":"volume_up"}function Sr(){S()===!1&&a.timer.positionSeconds!==-1&&a.timer.durationSeconds!==-1&&(Ye(a.timer.positionElement,ne.autoplay?a.timer.positionSeconds:a.timer.durationSeconds-a.timer.positionSeconds),Ye(a.timer.durationElement,a.timer.durationSeconds))}var Ae=I("playback-events"),Be={},dt={nowPlayingIconsSelector:"h2.entry-title"},we={nowPlayingIcons:null,snackbarId:0},l={LOADING:"loading",READY:"ready",MEDIA_PLAYING:"mediaPlaying",MEDIA_PAUSED:"mediaPaused",MEDIA_ENDED:"mediaEnded",MEDIA_TIME_REMAINING:"mediaTimeRemaining",MEDIA_SHOW:"mediaShow",MEDIA_UNAVAILABLE:"mediaUnavailable",CONTINUE_AUTOPLAY:"continueAutoplay",RESUME_AUTOPLAY:"resumeAutoplay",AUTOPLAY_BLOCKED:"autoplayBlocked",PLAYBACK_BLOCKED:"playbackBlocked"},gt={[l.LOADING]:[Ar],[l.READY]:[Ir],[l.MEDIA_PLAYING]:[Lr],[l.MEDIA_PAUSED]:[Cr],[l.MEDIA_ENDED]:[Ut],[l.MEDIA_TIME_REMAINING]:[Dr],[l.MEDIA_SHOW]:[vr],[l.CONTINUE_AUTOPLAY]:[Ur],[l.RESUME_AUTOPLAY]:[Nr],[l.AUTOPLAY_BLOCKED]:[Or],[l.PLAYBACK_BLOCKED]:[Rr],[l.MEDIA_UNAVAILABLE]:[_r]};function Nt(e){Ae.log("init()"),Be=e,we.nowPlayingIcons=document.querySelectorAll(dt.nowPlayingIconsSelector)}function z(e,t){e in gt&&gt[e].push(t)}function R(e,t=null,r=null){gt[e].forEach(n=>{n({event:e,data:t,callback:r})})}function Ar(e){ke(e.data.loadingPercent)}function Ir(e){x(e),ke(0)}function Lr(e){if(x(e),ct(we.snackbarId),e.data.numTracks>1){let t=document.querySelector(`#${e.data.trackId} ${dt.nowPlayingIconsSelector}`);Ot(t),U(t,"playing-paused","now-playing-icon"),Be.user.animateNowPlayingIcon&&t.classList.add("playing-animate")}}function Cr(e){x(e),e.data.numTracks>1&&document.querySelector(`#${e.data.trackId} ${dt.nowPlayingIconsSelector}`).classList.add("playing-paused")}function Ut(e){x(e),ke(0),e!==null&&e.data.numTracks>1&&Ot()}function Dr(){}function vr(e){x(e),Ut(null),e.data.scrollToMedia&&mt(e.data.trackId)}function Ur(e){x(e),ie(navigationUrls.next,!0)}function Nr(e){let t=sessionStorage.getItem(X.UF_AUTOPLAY);sessionStorage.removeItem(X.UF_AUTOPLAY),x(e),Ae.log(`RESUME_AUTOPLAY: ${t!==null?"true":"false"}`),t!==null&&e.callback.resumeAutoplay()}function Or(e){x(e),we.snackbarId=N("Autoplay blocked, Play to continue",0,"play",()=>{e.data.isPlaying===!1&&e.callback.togglePlayPause()})}function Rr(e){x(e),N("Unable to play track, skipping to next",5,"Stop",()=>{},()=>ft(e))}function _r(e){x(e),Yr(e.data.trackId)?N("YouTube Premium track, skipping",5,"help",()=>{window.location.href="/channel/premium/"},()=>ft(e)):(N("Unable to play track, skipping to next",5,"Stop",()=>{},()=>ft(e)),Pt("EVENT_MEDIA_UNAVAILABLE",e.data))}function x(e=null){Ae.isDebug()&&e!==null&&Ae.log(e)}function Ot(e){we.nowPlayingIcons.forEach(t=>{t!==e&&t.classList.remove("now-playing-icon","playing-animate","playing-paused")})}function ft(e){e.data.currentTrack<e.data.numTracks?e.callback.skipToTrack(e.data.currentTrack+1,!0):navigationUrls.next!==null&&ie(navigationUrls.next,!0)}function Yr(e){let t=document.getElementById(e);return t!==null?t.classList.contains("category-premium"):!1}function ie(e,t=!1){Ae.log(`navigateTo(): ${e} - continueAutoplay: ${t}`),e!=null&&e.length>0&&(t&&sessionStorage.setItem(X.UF_AUTOPLAY,"true"),window.location.href=e)}function mt(e){if(Be.user.autoScroll){let t=Math.round(window.scrollY+document.getElementById(e).getBoundingClientRect().top),r=Math.round(window.pageYOffset),n=Rt(t>r);r+n+_t()>t&&(n=Rt(!1)),window.scroll({top:t-(n+_t()),left:0,behavior:Be.user.smoothScrolling?"smooth":"auto"})}}function Rt(e){return e?le("--site-header-height-down"):le("--site-header-height-up")}function _t(){return le("--site-content-margin-top")-1}var P=I("embedded-players"),$=new Te(10),Y=null,Et=0,Yt=1,Ie,E,B,j,ue={trackCountData:"data-track-count",youTubeIframeIdRegEx:/youtube-uid/i,soundCloudIframeIdRegEx:/soundcloud-uid/i,entriesSelector:"single-track",artistTrackTitleData:"data-artist-track-title",maxPlaybackStartDelay:3};function Mt(e){({settings:Ie=null,players:E=null,playbackState:B=null,playbackTimer:j=null}=e),Mr(),Br()}function Bt(e){let t=parseInt(document.body.getAttribute(ue.trackCountData));return P.log(`getTrackCount(): ${t}`),Et=t+3,Y=e,t}function Ve(){return{loadingPercent:100*(Yt++/Et)}}function wt(){Yt>=Et?Y(l.READY):Y(l.LOADING,Ve())}function Gr(){document.querySelectorAll(ue.entriesSelector).forEach(t=>{let r=t.id,n=t.getAttribute(ue.artistTrackTitleData);t.querySelectorAll("iframe").forEach(c=>{let g=c.id,b={};if(ue.youTubeIframeIdRegEx.test(g)){let f=new YT.Player(g,{events:{onReady:wr,onStateChange:Vr,onError:xr}});b=new ot(r,g,f,c.src)}else if(ue.soundCloudIframeIdRegEx.test(g)){let f=SC.Widget(g);b=new ve(r,g,f,c.src),f.bind(SC.Widget.Events.READY,()=>{b.setThumbnail(),$r()}),f.bind(SC.Widget.Events.PLAY,Fr),f.bind(SC.Widget.Events.PAUSE,Kr),f.bind(SC.Widget.Events.FINISH,jr),f.bind(SC.Widget.Events.ERROR,qr)}It(n,b),E.add(b)})})}function xe(e,t){P.log("onPlayerError()"),P.log(e);let r=e instanceof ve?d.SOUNDCLOUD:d.YOUTUBE;E.isCurrent(e.getUid())===!1&&E.stop(),$.add(r,m.PLAYER_ERROR,e.getUid()),Y(l.MEDIA_UNAVAILABLE,Wr(e,t))}function Wr(e,t){let r=e.getArtist()||"N/A",n=e.getTitle()||"N/A";return{currentTrack:E.trackFromUid(e.getUid()),numTracks:E.getNumTracks(),trackId:e.getTrackId(),mediaTitle:`${r} - ${n}`,mediaUrl:t}}function Mr(){P.log("initYouTubeAPI()"),Y(l.LOADING,Ve()),window.onYouTubeIframeAPIReady=function(){P.log("onYouTubeIframeAPIReady()"),Y(l.LOADING,Ve()),Gr()};let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function wr(){P.log("onYouTubePlayerReady()"),wt()}function Vr(e){switch($.add(d.YOUTUBE,e.data,e.target.h.id),e.data){case YT.PlayerState.UNSTARTED:Hr(e);break;case YT.PlayerState.BUFFERING:Jr(e);break;case YT.PlayerState.PLAYING:Qr(e);break;case YT.PlayerState.PAUSED:Xr(e);break;case YT.PlayerState.CUED:zr(e);break;case YT.PlayerState.ENDED:Zr(e);break}}function Hr(e){P.log(`onYouTubePlayerStateChange: UNSTARTED (uID: ${e.target.h.id})`),$.ytAutoplayBlocked(e.target.h.id,3e3)&&Y(l.AUTOPLAY_BLOCKED)}function Jr(e){if(P.log(`onYouTubePlayerStateChange: BUFFERING (uID: ${e.target.h.id})`),E.crossfade.isFading()===!1){let t=E.playerFromUid(e.target.h.id);t.mute(Ie.masterMute),t.setVolume(Ie.masterVolume)}}function Qr(e){P.log(`onYouTubePlayerStateChange: PLAYING   (uID: ${e.target.h.id})`),B.syncAll(e.target.h.id,B.STATE.PLAY),E.current.setDuration(Math.round(e.target.getDuration())),j.start()}function Xr(e){P.log(`onYouTubePlayerStateChange: PAUSED    (uID: ${e.target.h.id})`),E.isCurrent(e.target.h.id)?(B.syncAll(e.target.h.id,B.STATE.PAUSE),j.stop(!1)):E.crossfade.stop()}function zr(e){P.log(`onYouTubePlayerStateChange: CUED      (uID: ${e.target.h.id})`)}function Zr(e){P.log(`onYouTubePlayerStateChange: ENDED     (uID: ${e.target.h.id})`),E.isCurrent(e.target.h.id)?(j.stop(!0),Y(l.MEDIA_ENDED)):E.crossfade.stop()}function xr(e){P.log("onYouTubePlayerError: "+e.data);let t=E.playerFromUid(e.target.h.id);t.setPlayable(!1),xe(t,e.target.getVideoUrl())}function Br(){P.log("initSoundCloudAPI()"),Y(l.LOADING,Ve())}function $r(){P.log("onSoundCloudPlayerEventReady()"),wt()}function Fr(e){P.log(`onSoundCloudPlayerEvent: PLAY   (uID: ${e.soundId})`),$.add(d.SOUNDCLOUD,m.STATE_PLAYING,e.soundId),E.crossfade.isFading()&&E.isCurrent(e.soundId)?$.scPlayDoubleTrigger(e.soundId,ue.maxPlaybackStartDelay*1e3)&&B.syncAll(e.soundId,B.STATE.PLAY):(B.syncAll(e.soundId,B.STATE.PLAY),E.current.mute(Ie.masterMute),E.current.setVolume(Ie.masterVolume)),E.current.getEmbeddedPlayer().getDuration(t=>{E.current.setDuration(Math.round(t/1e3)),j.start()})}function Kr(e){P.log(`onSoundCloudPlayerEvent: PAUSE  (uID: ${e.soundId})`),$.add(d.SOUNDCLOUD,m.STATE_PAUSED,e.soundId),$.scAutoplayBlocked(e.soundId,3e3)?(j.stop(!1),Y(l.AUTOPLAY_BLOCKED)):$.scWidgetPlayBlocked(e.soundId,3e4)?(j.stop(!1),Y(l.PLAYBACK_BLOCKED,{currentTrack:E.trackFromUid(e.soundId),numTracks:E.getNumTracks()})):E.isCurrent(e.soundId)?E.current.getPosition(t=>{t>0&&(B.syncAll(e.soundId,B.STATE.PAUSE),j.stop(!1))}):E.crossfade.stop()}function jr(e){P.log(`onSoundCloudPlayerEvent: FINISH (uID: ${e.soundId})`),E.isCurrent(e.soundId)?(j.stop(!0),Y(l.MEDIA_ENDED)):E.crossfade.stop()}function qr(){this.getCurrentSound(e=>{let t=E.playerFromUid(e.id);P.log(`onSoundCloudPlayerEvent: ERROR for track: ${E.trackFromUid(e.id)}. ${t.getArtist()} - ${t.getTitle()} - [${t.getUid()} / ${t.getIframeId()}]`),t.setPlayable(!1)})}var yt=I("crossfade-controls"),Vt={},$e={},ce={crossfadePresetSelector:".crossfade-controls .preset-control",crossfadePresetData:"data-crossfade-preset",crossfadeToSelector:".crossfade-controls .fadeto-control"},M={crossfadePreset:{elements:null},crossfadeTo:{elements:null,click:null}};function $t(e,t,r){yt.log("init()"),Vt=e,$e=t,M.crossfadePreset.elements=document.querySelectorAll(ce.crossfadePresetSelector),M.crossfadeTo.elements=document.querySelectorAll(ce.crossfadeToSelector),M.crossfadePreset.elements.length>1&&M.crossfadeTo.elements.length>1&&(M.crossfadePreset.elements.forEach(n=>xt(n,Vt.trackCrossfadeDefPreset)),M.crossfadeTo.click=r)}function Kt(){yt.log("ready()"),M.crossfadePreset.elements.length>1&&M.crossfadeTo.elements.length>1&&(M.crossfadePreset.elements.forEach(e=>{e.addEventListener("click",ea),U(e,u.DISABLED,u.ENABLED)}),M.crossfadeTo.elements.forEach(e=>e.addEventListener("click",ta)),z(l.MEDIA_PLAYING,Ft),z(l.MEDIA_PAUSED,Ft))}function xt(e,t){e.setAttribute(ce.crossfadePresetData,t),e.textContent=`${t+1}`,e.title=`Preset: ${pt.crossfade[t].name}`}function ea(e){let t=parseInt(e.target.getAttribute(ce.crossfadePresetData));t+1<pt.crossfade.length?t++:t=0,xt(e.target,t)}function ta(e){if(S()&&$e.crossfade.isFading()===!1){let t=e.target.closest("single-track");if(t!==null){let r=t.querySelector("iframe"),n=t.querySelector(ce.crossfadePresetSelector).getAttribute(ce.crossfadePresetData);U(e.target.closest("div.fadeto-control"),u.ENABLED,u.DISABLED),M.crossfadeTo.click($e.uIdFromIframeId(r.id),pt.crossfade[n])}}}function Ft(){let e=S(),t=e?$e.getStatus().currentTrack:-1;yt.log(`updateCrossfadeToState() - playingState: ${e} - currentTrack: ${t}`),M.crossfadeTo.elements.forEach((r,n)=>{t===n+1?U(r,e?u.ENABLED:u.DISABLED,e?u.DISABLED:u.ENABLED):U(r,e?u.DISABLED:u.ENABLED,e?u.ENABLED:u.DISABLED)})}var F=I("playback"),Le=null,h={},s={},Fe={updateTimerInterval:200,minCrossfadeToTime:5,maxBufferingDelay:3};function Gt(e){Le=$,h=e.user,Nt(e),s=Lt(),s.init(h,aa),Oe(h,s,ra),$t(h,s,na),Mt({settings:h,players:s,playbackState:jt,playbackTimer:qt})}function Wt(){return Bt(oa)>0}function de(){S()?(V(),s.current.pause()):(Pe(),s.current.play(xe))}function Tt(e){F.log(`prevClick() - prevTrack: ${s.getCurrentTrack()-1} - numTracks: ${s.getNumTracks()} - event: ${e!==null?e.type:"null"}`),s.getCurrentTrack()>0&&s.current.getPosition(t=>{t>3e3?(s.current.seekTo(0),qt.updateCallback(0)):(s.getCurrentTrack()>1&&s.stop(),s.prevTrack(S())&&Se())})}function Ke(e){F.log(`nextClick() - nextTrack: ${s.getCurrentTrack()+1} - numTracks: ${s.getNumTracks()} - event: ${e!==null?e.type:"null"}`),s.getCurrentTrack()+1<=s.getNumTracks()?(s.stop(),e!==null||h.autoplay?s.nextTrack(S())&&se():V()):e===null&&(V(),h.autoplay?R(l.CONTINUE_AUTOPLAY):s.stop())}function ra(e){s.current.seekTo(e)}function bt(){h.masterMute=h.masterMute!==!0,s.mute()}function aa(e,t=!0){R(l.MEDIA_SHOW,{scrollToMedia:t,trackId:s.current.getTrackId()}),e&&s.current.play(xe)}function Ht(e,t=!0){F.log(`skipToTrack(): ${e} - ${t}`),t===!0&&S()===!1&&(Le.clear(),Le.add(d.ULTRAFUNK,m.RESUME_AUTOPLAY,null),s.jumpToTrack(e,t)&&se())}function sa(){F.log("resumeAutoplay()"),Le.add(d.ULTRAFUNK,m.RESUME_AUTOPLAY,null),de()}function _(){return{isPlaying:S(),currentTrack:s.getCurrentTrack(),numTracks:s.getNumTracks(),trackId:s.current.getTrackId(),iframeId:s.current.getIframeId()}}function oa(e,t=null){switch(F.isDebug()&&e!==l.LOADING&&(F.log(`embeddedEventHandler(): ${e}`),t!==null&&F.log(t)),e){case l.LOADING:R(l.LOADING,t);break;case l.READY:Re(Tt,de,Ke,bt),Kt(),R(l.READY),R(l.RESUME_AUTOPLAY,null,{resumeAutoplay:sa});break;case l.MEDIA_ENDED:Ke(null);break;case l.AUTOPLAY_BLOCKED:V(),R(l.AUTOPLAY_BLOCKED,_(),{togglePlayPause:de});break;case l.PLAYBACK_BLOCKED:V(),R(l.PLAYBACK_BLOCKED,t,{skipToTrack:Ht});break;case l.MEDIA_UNAVAILABLE:V(),R(l.MEDIA_UNAVAILABLE,t,{skipToTrack:Ht});break}}var jt=(()=>{let e={PLAY:1,PAUSE:2},t=function n(o,c){if(F.log(`playbackState.syncAll() - previousTrack: ${s.getPlayerIndex()+1} - nextTrack: ${s.indexMap.get(o)+1} - syncState: ${F.getObjectKeyForValue(e,c)}`),s.isCurrent(o))c===e.PLAY?(s.crossfade.start(),Pe(),R(l.MEDIA_PLAYING,_())):c===e.PAUSE&&(s.crossfade.stop(),V(),R(l.MEDIA_PAUSED,_()));else{let g=s.getPlayerIndex(),b=s.indexMap.get(o);s.stop(),s.setPlayerIndex(b),r(g,b),n(o,c)}};function r(n,o){o>n?se():Se()}return{STATE:e,syncAll:t,syncControls:r}})(),qt=(()=>{let e=-1,t=0,r=!0;return document.addEventListener("visibilitychange",()=>{r=document.visibilityState==="visible"}),{start:n,stop:o,updateCallback:c};function n(){o(!1),e=setInterval(()=>{r&&s.current.getPosition(c)},Fe.updateTimerInterval)}function o(f=!1){e!==-1&&(clearInterval(e),e=-1),f&&(c(0),R(l.MEDIA_ENDED,_())),t=0,Me(!1)}function c(f,T=0){let v=Math.round(f/1e3);_e(f,T),oe(v,T),v>0&&T>0&&(g(v,T),b(v,T))}function g(f,T){if(h.autoplay===!1&&h.timeRemainingWarning&&t!==f){let v=T-f;t=f,v<=h.timeRemainingSeconds?(Me(!0),R(l.MEDIA_TIME_REMAINING,{timeRemainingSeconds:v})):Me(!1)}}function b(f,T){h.masterMute===!1&&h.autoplay&&h.autoCrossfade&&T-f===h.autoCrossfadeLength+Fe.maxBufferingDelay&&s.getCurrentTrack()+1<=s.getNumTracks()&&Jt(Q.AUTO,{name:"Auto Crossfade",length:h.autoCrossfadeLength,curve:h.autoCrossfadeCurve})}})();function na(e,t){s.isCurrent(e)===!1&&s.current.getDuration()>0&&(F.log(`crossfadeToClick():
fadeOut: ${s.current.getArtist()} - "${s.current.getTitle()}" (${s.current.getUid()})
fadeIn.: ${s.playerFromUid(e).getArtist()} - "${s.playerFromUid(e).getTitle()}" (${e})`),h.masterMute===!1&&h.autoplay===!1&&s.current.getPosition(r=>{s.current.getDuration()-r/1e3>=Fe.minCrossfadeToTime+Fe.maxBufferingDelay&&Jt(Q.TRACK,t,e)}))}function Jt(e,t,r=null){Le.add(d.ULTRAFUNK,m.CROSSFADE_START,null);let n=s.crossfade.init(e,t,r);n!==null&&jt.syncControls(n.fadeOutPlayer,n.fadeInPlayer)}var ge=I("screen-wakelock"),je=null;function Qt(){return"wakeLock"in navigator&&"request"in navigator.wakeLock}async function zt(e){Qt()?document.visibilityState==="visible"&&await Xt()!==!0&&ge.log("enable(): Screen Wake Lock request failed"):(ge.log("enable(): Screen Wake Lock is not supported"),N("Keep Screen On is not supported",5,"Turn Off",()=>e.user.keepMobileScreenOn=!1))}function Zt(){ge.log("stateVisible()"),Qt()&&je===null&&Xt()}async function Xt(){try{return je=await navigator.wakeLock.request("screen"),ge.log("request(): Screen Wake Lock is Enabled"),je.addEventListener("release",()=>{ge.log("request(): Screen Wake Lock was Released"),je=null}),!0}catch(e){ge.error(`request(): ${e.name} - ${e.message}`)}return!1}var ae=I("player-playlist"),me=new Te(10),q={},A=null,qe=null,er=!0,w={container:null,observer:null},i={trackId:null,element:null,snackbarId:0,autoplayValue:null};function tr(e,t){ae.log("init"),q=e,qe=t,w.container=document.getElementById("tracklist-container"),w.observer=new IntersectionObserver(da,{root:w.container}),Z.init(),ca(),ga(),w.container.addEventListener("click",r=>{let n=r.target.closest("div.thumbnail");if(n!==null)return fe(n.closest("div.track-entry").id,!0,!0);let o=r.target.closest("div.share-playon-button");if(o!==null)return ia(o)}),document.addEventListener("keydown",ua),document.getElementById("footer-autoplay-toggle").addEventListener("click",r=>qe(r)),document.getElementById("playback-controls").querySelector(".details-control").addEventListener("click",Ge),document.getElementById("playback-controls").querySelector(".thumbnail-control").addEventListener("click",Ge),document.getElementById("playback-controls").querySelector(".timer-control").addEventListener("click",r=>qe(r))}function ia(e){let t=e.closest("div.track-entry"),r=t.getAttribute("data-artist-track-title"),n=t.getAttribute("data-track-url");la.show({string:r,filterString:!0,url:n})}function ua(e){if(e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":e.preventDefault(),Ge(e);break}switch(e.key){case" ":e.preventDefault(),i.trackId!==null?fe(i.trackId):fe(w.container.querySelector(".track-entry.current").id);break;case"ArrowLeft":e.shiftKey===!1&&(e.preventDefault(),ar());break;case"ArrowRight":e.shiftKey===!1&&(e.preventDefault(),nr());break;case"A":qe(e);break;case"f":case"F":e.preventDefault(),Z.toggle(document.getElementById("youtube-player"));break;case"m":case"M":e.preventDefault(),rr();break}}}function Ge(){let e=0;document.documentElement.scrollTop===0&&(e=le("--site-header-height")-le("--site-header-height-down")),window.scroll({top:e,left:0,behavior:q.user.smoothScrolling?"smooth":"auto"})}function rr(){q.user.masterMute?q.user.masterMute=!1:q.user.masterMute=!0,q.user.masterMute?A.embedded.mute():A.embedded.unMute()}function ca(){if(i.trackId=w.container.querySelector(".track-entry").id,i.autoplayValue=sessionStorage.getItem(X.UF_AUTOPLAY),sessionStorage.removeItem(X.UF_AUTOPLAY),i.autoplayValue!==null){let e=i.autoplayValue.match(/^[a-zA-Z0-9-_]{11}$/);e!==null&&(i.trackId=e[0])}ae.log(`setCurrentIdAndElement() - autoplayValue: ${i.autoplayValue!==null?i.autoplayValue:"N/A"} - current.trackId: ${i.trackId}`),i.element=document.getElementById(i.trackId),w.observer.observe(i.element)}function da(e){w.observer.unobserve(i.element),Math.ceil(e[0].intersectionRatio*100)/100!=1&&(w.container.scrollTop=i.element.offsetTop-w.container.offsetHeight+i.element.offsetHeight)}function fe(e,t=!0,r=!1){if(e===void 0){ee(!1);return}e===i.trackId?sr():(S()&&A.embedded.stopVideo(),i.element.classList.remove("current","playing","paused"),i.trackId=e,i.element=document.getElementById(i.trackId),r===!1&&w.observer.observe(i.element),i.element.classList.add("current"),or(t))}function or(e){A.setArtistTitleThumbnail(i.element.getAttribute("data-artist-track-title"),i.trackId),e?(A.embedded.loadVideoById(i.trackId),ee(!0)):(A.embedded.cueVideoById(i.trackId),ee(!1))}function sr(){S()?A.embedded.pauseVideo():A.embedded.playVideo()}function lr(e=!1){e?fe(i.element.nextElementSibling?.id):ee(!1)}function ar(){let e=i.element.previousElementSibling?.id,t=A.embeddedPlayer.getCurrentTime();e!==void 0&&t<=5?(fe(e,S()),Se()):t!==0&&(A.seekTo(0),ht.update(0,0))}function nr(){let e=i.element.nextElementSibling?.id;e!==void 0&&(fe(e,S()),se())}function ee(e){e?U(i.element,"paused","playing"):U(i.element,"playing","paused")}function ma(){S()===!1&&i.autoplayValue!==null&&(me.add(d.ULTRAFUNK,m.RESUME_AUTOPLAY,null),me.add(d.YOUTUBE,-1,i.element.nextElementSibling?.id)),lr(!0)}function fa(){i.trackId=null,ee(!1)}function ga(){ae.log("initYouTubeAPI()"),window.onYouTubeIframeAPIReady=function(){ae.log("onYouTubeIframeAPIReady()");let r=new YT.Player("youtube-player",{events:{onReady:Ea,onStateChange:pa,onError:ya}});A=new st(r),Oe(q.user,A,n=>{A.seekTo(n)}),ae.log(A)};let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function Ea(){i.element.classList.add("current"),i.autoplayValue!==null&&me.add(d.ULTRAFUNK,m.RESUME_AUTOPLAY,null),Re(ar,sr,nr,rr),or(i.autoplayValue!==null)}function pa(e){switch(ae.log(`onYouTubePlayerStateChange(): ${e.data} - trackId: ${i.trackId}`),me.add(d.YOUTUBE,e.data,i.trackId),e.data!==YT.PlayerState.PLAYING&&V(),e.data){case YT.PlayerState.UNSTARTED:me.ytAutoplayBlocked(i.trackId,3e3)&&(ee(!1),i.snackbarId=N("Autoplay blocked, Play to continue",0,"play",()=>A.embedded.playVideo()));break;case YT.PlayerState.ENDED:ht.stop(!0),lr(q.user.autoplay);break;case YT.PlayerState.PLAYING:Ta(e),ht.start(),Pe(),ee(!0);break;case YT.PlayerState.PAUSED:ee(!1);break}}function Ta(e){ct(i.snackbarId),A.setDuration(Math.round(e.target.getDuration())),er&&(er=!1,i.autoplayValue=null,setTimeout(()=>{document.documentElement.scrollTop===0&&q.user.autoplay&&Ge()},3e3))}function ya(e){ae.log(`onYouTubePlayerError(): ${e.data} - trackId: ${i.trackId}`),i.element.querySelector(".track-duration").innerText="Error",i.element.querySelector(".track-duration").style.display="block",me.add(d.YOUTUBE,m.PLAYER_ERROR,i.trackId),N("Unable to play track, skipping to next",5,"Stop",fa,ma)}var ht=(()=>{let e=-1,t=!0;return document.addEventListener("visibilitychange",()=>{t=document.visibilityState==="visible"}),{start:r,stop:n,update:o};function r(){n(),e=setInterval(()=>{t&&S()&&o(A.embedded.getCurrentTime()*1e3,A.getDuration())},250)}function n(c=!1){e!==-1&&(clearInterval(e),e=-1),c&&o(0,0)}function o(c,g){_e(c,g),oe(Math.round(c/1e3),g)}})();var Ee=I("playback-interaction"),pe=new at(10),p={},He=!1,ir=!1,G={autoplayToggleId:"footer-autoplay-toggle",crossfadeToggleId:"footer-crossfade-toggle",allowKeyboardShortcutsEvent:"allowKeyboardShortcuts",denyKeyboardShortcutsEvent:"denyKeyboardShortcuts",doubleClickDelay:500},k={playbackControls:{details:null,thumbnail:null,timer:null,statePlaying:!1},autoplayToggle:null,crossfadeToggle:null};document.addEventListener("DOMContentLoaded",()=>{Ee.log("DOMContentLoaded"),ka(),Wt()?(Sa(),Pa(),kt(p.user.autoplay),ur(p.user.autoCrossfade)):document.getElementById("player-playlist")&&(k.autoplayToggle=document.getElementById(G.autoplayToggleId),k.crossfadeToggle=document.getElementById(G.crossfadeToggleId),kt(p.user.autoplay),tr(p,Je))});function ka(){Ee.log("readSettings()"),p=ha(X.UF_PLAYBACK_SETTINGS,ba,!0),Ee.log(p)}function Sa(){Ee.log("initInteraction()"),Z.init(),He=p.user.keyboardShortcuts,k.playbackControls.details=document.getElementById("playback-controls").querySelector(".details-control"),k.playbackControls.thumbnail=document.getElementById("playback-controls").querySelector(".thumbnail-control"),k.playbackControls.timer=document.getElementById("playback-controls").querySelector(".timer-control"),k.autoplayToggle=document.getElementById(G.autoplayToggleId),k.crossfadeToggle=document.getElementById(G.crossfadeToggleId),We("i.nav-bar-arrow-back","click",ye,navigationUrls.prev),We("i.nav-bar-arrow-fwd","click",ye,navigationUrls.next),We("nav.post-navigation .nav-previous a","click",ye,navigationUrls.prev),We("nav.post-navigation .nav-next a","click",ye,navigationUrls.next),document.addEventListener(G.allowKeyboardShortcutsEvent,()=>{p.user.keyboardShortcuts&&(He=!0)}),document.addEventListener(G.denyKeyboardShortcutsEvent,()=>{p.user.keyboardShortcuts&&(He=!1)}),document.addEventListener("keydown",Aa),window.addEventListener("blur",Ia)}function Pa(){Gt(p),z(l.READY,La),z(l.MEDIA_SHOW,cr),z(l.MEDIA_ENDED,cr),z(l.MEDIA_TIME_REMAINING,Ca)}function Aa(e){if(ir&&He&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":dr(e);break}switch(e.key){case" ":e.preventDefault(),de();break;case"ArrowLeft":Da(e);break;case"ArrowRight":va(e);break;case"A":Je(e);break;case"f":case"F":e.preventDefault(),Z.toggle(document.getElementById(_().iframeId));break;case"m":case"M":e.preventDefault(),bt(),N(p.user.masterMute?"Volume is muted (<b>m</b> to unmute)":"Volume is unmuted (<b>m</b> to mute)",3);break;case"x":case"X":k.crossfadeToggle.classList.contains("disabled")===!1&&gr(e);break}}}function Da(e){e.preventDefault(),e.shiftKey===!0?ye(e,navigationUrls.prev):(pe.add(d.KEYBOARD,m.KEY_ARROW_LEFT,null),Ua(navigationUrls.prev,_())||Tt(e))}function Ua(e,t){return e!==null&&t.currentTrack===1&&t.isPlaying===!1&&(Qe("showLeftArrowHint","<b>Tip:</b> Double click the Left Arrow key to go to the previous page"),pe.doubleClicked(d.KEYBOARD,m.KEY_ARROW_LEFT,G.doubleClickDelay))?(ie(e,!1),!0):!1}function va(e){e.preventDefault(),e.shiftKey===!0?ye(e,navigationUrls.next):(pe.add(d.KEYBOARD,m.KEY_ARROW_RIGHT,null),Na(navigationUrls.next,_())||Ke(e))}function Na(e,t){return e!==null&&t.currentTrack===t.numTracks&&(Qe("showRightArrowHint","<b>Tip:</b> Double click the Right Arrow key to go to the next page"),pe.doubleClicked(d.KEYBOARD,m.KEY_ARROW_RIGHT,G.doubleClickDelay))?(ie(e,t.isPlaying),!0):!1}function Qe(e,t,r=0){p.priv.tips[e]&&(N(t,r),p.priv.tips[e]=!1)}function La(){k.playbackControls.details.addEventListener("click",mr),k.playbackControls.thumbnail.addEventListener("click",mr),k.playbackControls.timer.addEventListener("click",Je),k.autoplayToggle.addEventListener("click",Je),k.crossfadeToggle.addEventListener("click",gr),document.addEventListener("visibilitychange",Oa),p.user.keepMobileScreenOn&&zt(p),ir=!0}function cr(){p.user.autoExitFullscreen&&Z.exit()}function Ca(e){p.user.autoExitFsOnWarning&&e.data.timeRemainingSeconds<=p.user.timeRemainingSeconds&&Z.exit()}function Ia(){setTimeout(()=>{document.activeElement instanceof HTMLIFrameElement&&setTimeout(()=>{document.activeElement.blur(),document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},250)},0)}function Oa(){document.visibilityState==="visible"?(p.user.autoResumePlayback&&k.playbackControls.statePlaying&&_().isPlaying===!1&&de(),p.user.keepMobileScreenOn&&Zt()):document.visibilityState==="hidden"&&(p.user.autoResumePlayback&&_().isPlaying?k.playbackControls.statePlaying=!0:k.playbackControls.statePlaying=!1)}function mr(e){dr(e),pe.add(d.MOUSE,m.MOUSE_CLICK,null),e.target.tagName.toLowerCase()==="img"?Qe("showTrackImageHint","<b>Tip:</b> Double click or tap on the Track Thumbnail for full screen"):Qe("showDetailsHint","<b>Tip:</b> Double click or tap on Artist &amp; Title for full screen"),pe.doubleClicked(d.MOUSE,m.MOUSE_CLICK,G.doubleClickDelay)&&Z.enter(document.getElementById(_().iframeId))}function ye(e,t){e!==null&&t!==null&&(e.preventDefault(),ie(t,_().isPlaying))}function dr(e){e.preventDefault(),mt(_().trackId)}function Je(e){e.preventDefault(),p.user.autoplay=p.user.autoplay!==!0,N(p.user.autoplay?"Autoplay enabled (<b>Shift</b> + <b>A</b> to disable)":"Autoplay disabled (<b>Shift</b> + <b>A</b> to enable)",5),kt(p.user.autoplay)}function kt(e){Ee.log(`updateAutoplayDOM() - autoplay: ${e}`),k.autoplayToggle.querySelector(".autoplay-on-off").textContent=e?"ON":"OFF",e?U(document.body,"autoplay-off","autoplay-on"):U(document.body,"autoplay-on","autoplay-off"),e?k.crossfadeToggle.classList.remove("disabled"):k.crossfadeToggle.classList.add("disabled")}function gr(e){e.preventDefault(),p.user.autoCrossfade=p.user.autoCrossfade!==!0,N(p.user.autoCrossfade?"Auto Crossfade enabled (<b>x</b> to disable)":"Auto Crossfade disabled (<b>x</b> to enable)",5),ur(p.user.autoCrossfade)}function ur(e){Ee.log(`updateCrossfadeDOM() - autoCrossfade: ${e}`),k.crossfadeToggle.querySelector(".crossfade-on-off").textContent=e?"ON":"OFF"}
//# sourceMappingURL=interaction.js.map
