import{B as et,C as Oe,D as tt,E as Re,F as at,H as st,a as S,b as Je,d as Xe,f as ge,g as R,j as ze,k as Ue,m as N,n as X,o as K,q as A,r as Ze,s as V,t as se,u as pe,v as Qe,w as T,x as ye}from"../chunk-776PIORV.js";var we=S("eventlogger"),g={UNKNOWN:1e3,KEYBOARD:100,MOUSE:110,YOUTUBE:1,SOUNDCLOUD:2,ULTRAFUNK:50},y={UNKNOWN:-2e3,KEY_ARROW_LEFT:80,KEY_ARROW_RIGHT:81,MOUSE_CLICK:82,STATE_ERROR:-5,STATE_UNSTARTED:-1,STATE_ENDED:0,STATE_PLAYING:1,STATE_PAUSED:2,STATE_BUFFERING:3,STATE_CUED:5,RESUME_AUTOPLAY:50,PLAYER_ERROR:60,CROSSFADE_START:70},Ft={eventSource:g.UNKNOWN,eventType:y.UNKNOWN,uId:null,timeStamp:0},Ye=class{constructor(t=10){this.log=[],this.maxEntries=t,this.lastPos=0,this.matchCount=0}add(t,a,n,u=Date.now()){let p=Object.create(Ft);p.eventSource=t,p.eventType=a,p.uId=n,p.timeStamp=u,this.log.length<this.maxEntries?this.log.push(p):(this.log.shift(),this.log.push(p))}clear(){this.log=[]}initMatch(){this.lastPos=this.log.length-1,this.matchCount=0}matchesEvent(t,a,n,u=null){this.log[this.lastPos-t].eventSource===a&&this.log[this.lastPos-t].eventType===n&&this.log[this.lastPos-t].uId===u&&this.matchCount++}matchesDelta(t,a){this.log[this.lastPos].timeStamp-this.log[this.lastPos-t].timeStamp<=a&&this.matchCount++}isPatternMatch(t,a){return this.matchCount===t?(we.log(`MATCH for: ${a}`),we.logEventLog(this.log,g,y),!0):!1}},Be=class extends Ye{constructor(t){super(t)}doubleClicked(t,a,n){return this.initMatch(),this.lastPos>=1&&(this.matchesEvent(1,t,a),this.matchesEvent(0,t,a),this.matchesDelta(1,n)),this.isPatternMatch(3,`${we.getObjectKeyForValue(g,t)} Double Clicked`)}},re=class extends Ye{constructor(t){super(t)}ytAutoplayBlocked(t,a){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,g.ULTRAFUNK,y.RESUME_AUTOPLAY,null),this.matchesEvent(2,g.YOUTUBE,y.STATE_UNSTARTED,t),this.matchesEvent(1,g.YOUTUBE,y.STATE_BUFFERING,t),this.matchesEvent(0,g.YOUTUBE,y.STATE_UNSTARTED,t),this.matchesDelta(3,a)),this.isPatternMatch(5,"YouTube Autoplay Blocked")}scAutoplayBlocked(t,a){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,g.ULTRAFUNK,y.RESUME_AUTOPLAY,null),this.matchesEvent(2,g.SOUNDCLOUD,y.STATE_PLAYING,t),this.matchesEvent(1,g.SOUNDCLOUD,y.STATE_PAUSED,t),this.matchesEvent(0,g.SOUNDCLOUD,y.STATE_PAUSED,t),this.matchesDelta(3,a)),this.isPatternMatch(5,"SoundCloud Autoplay Blocked")}scWidgetPlayBlocked(t,a){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,g.SOUNDCLOUD,y.STATE_PLAYING,t),this.matchesEvent(1,g.SOUNDCLOUD,y.STATE_PAUSED,t),this.matchesEvent(0,g.SOUNDCLOUD,y.STATE_PAUSED,t),this.matchesDelta(2,a)),this.isPatternMatch(4,"SoundCloud WidgetPlay Blocked")}scPlayDoubleTrigger(t,a){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,g.ULTRAFUNK,y.CROSSFADE_START,null),this.matchesEvent(1,g.SOUNDCLOUD,y.STATE_PLAYING,t),this.matchesEvent(0,g.SOUNDCLOUD,y.STATE_PLAYING,t),this.matchesDelta(1,a)),this.isPatternMatch(4,"SoundCloud Play Double Trigger")}};var me=S("playback-controls"),D={settings:{},players:{}},c={DISABLED:{CLASS:"state-disabled",ID:10},ENABLED:{CLASS:"state-enabled",ID:20},HIDDEN:{CLASS:"state-hidden",ID:30},PLAYING:{CLASS:"state-playing",ID:40},PAUSED:{CLASS:"state-paused",ID:50}},s={progressSeek:{element:null,STATE:c.DISABLED,click:null},progressBar:{element:null,STATE:c.DISABLED},details:{element:null,STATE:c.DISABLED,artist:null,title:null},thumbnail:{element:null,STATE:c.DISABLED,img:null},timer:{element:null,STATE:c.DISABLED,position:null,duration:null,positionSeconds:-1,durationSeconds:-1},prevTrack:{element:null,STATE:c.DISABLED},playPause:{element:null,STATE:c.DISABLED,icon:null},nextTrack:{element:null,STATE:c.DISABLED},repeat:{element:null,STATE:c.DISABLED,icon:null},shuffle:{element:null,STATE:c.DISABLED},mute:{element:null,STATE:c.DISABLED,icon:null}};function fe(e,t,a){me.log("init()"),D.settings=e,D.players=t;let n=document.getElementById("progress-controls");n!==null?(s.progressSeek.element=n.querySelector(".progress-seek-control"),s.progressSeek.click=a,s.progressBar.element=n.querySelector(".progress-bar-control")):me.error("init(): Unable to getElementById() for #progress-controls");let u=document.getElementById("playback-controls");u!==null?(s.details.element=u.querySelector(".playback-details-control"),s.details.artist=s.details.element.querySelector(".playback-details-artist"),s.details.title=s.details.element.querySelector(".playback-details-title"),s.thumbnail.element=u.querySelector(".playback-thumbnail-control"),s.thumbnail.img=s.thumbnail.element.querySelector("img"),s.timer.element=u.querySelector(".playback-timer-control"),s.timer.position=s.timer.element.querySelector(".playback-timer-position"),s.timer.duration=s.timer.element.querySelector(".playback-timer-duration"),s.prevTrack.element=u.querySelector(".playback-prev-control"),s.playPause.element=u.querySelector(".playback-play-pause-control"),s.playPause.icon=s.playPause.element.querySelector("span"),s.nextTrack.element=u.querySelector(".playback-next-control"),s.repeat.element=u.querySelector(".playback-repeat-control"),s.repeat.icon=s.repeat.element.querySelector("span"),s.shuffle.element=u.querySelector(".playback-shuffle-control"),s.mute.element=u.querySelector(".playback-mute-control"),s.mute.icon=s.mute.element.querySelector("span")):me.error("init(): Unable to getElementById() for #playback-controls")}function Ee(e,t,a,n){me.log("ready()"),E(s.progressSeek,c.ENABLED),s.progressSeek.element.addEventListener("click",jt),E(s.progressBar,c.ENABLED),E(s.details,c.HIDDEN),E(s.thumbnail,c.HIDDEN),E(s.timer,c.HIDDEN),D.settings.trackThumbnailOnMobile&&s.thumbnail.element.classList.add("show-on-mobile"),D.settings.trackTimesOnMobile&&s.timer.element.classList.add("show-on-mobile"),E(s.prevTrack,D.players.getCurrentTrack()>1?c.ENABLED:c.DISABLED),s.prevTrack.element.addEventListener("click",e),E(s.playPause,c.PAUSED),s.playPause.element.addEventListener("click",t),E(s.nextTrack,D.players.getNumTracks()>1?c.ENABLED:c.DISABLED),s.nextTrack.element.addEventListener("click",()=>a()),E(s.repeat,c.ENABLED),s.repeat.element.addEventListener("click",qt),E(s.shuffle,c.ENABLED),E(s.mute,c.ENABLED),s.mute.element.addEventListener("click",n),nt(),Ue("autoplay",Ht),Ue("masterMute",nt)}function E(e,t=t.DISABLED){A(e.element,e.STATE.CLASS,t.CLASS),e.STATE=t}function Te(e,t){Me(t===0?0:e/(t*1e3))}function ne(e){Me(e/100)}function Me(e){s.progressBar.element.style.transform=`scaleX(${e})`}function jt(e){if(s.timer.durationSeconds>0){let t=e.clientX/document.documentElement.clientWidth*100,a=Math.round(s.timer.durationSeconds*t/100);s.progressSeek.click(a),f()===!1&&(ne(t),z(a,s.timer.durationSeconds))}}function xe(e){s.details.STATE.ID===c.HIDDEN.ID&&(E(s.details,c.ENABLED),E(s.thumbnail,c.ENABLED),E(s.timer,c.ENABLED)),s.details.artist.textContent=e.artist||"",s.details.title.textContent=e.title||"",Kt(e.thumbnail),z(-1,-1)}function Kt(e){e.src!==s.thumbnail.img.src&&(s.thumbnail.element.classList.remove("type-default","type-youtube","type-soundcloud"),s.thumbnail.element.classList.add("loading",e.class),s.thumbnail.img.src=e.src,s.thumbnail.img.decode().then(()=>s.thumbnail.element.classList.remove("loading")))}function z(e,t){e!==-1&&s.timer.positionSeconds!==e?(s.timer.positionSeconds=e,D.settings.autoplay===!1&&(e=t-e),ke(s.timer.position,e)):e===-1&&s.timer.positionSeconds===-1&&(s.timer.position.textContent="00:00"),t!==-1&&s.timer.durationSeconds!==t?(s.timer.durationSeconds=t,ke(s.timer.duration,t)):t===-1&&s.timer.durationSeconds===-1&&(s.timer.duration.textContent="00:00")}function ke(e,t){let a=new Date(t*1e3).toISOString();e.textContent=t>60*60?a.substr(11,8):a.substr(14,5)}function rt(){s.timer.position.textContent="00:00",s.timer.duration.textContent="00:00",s.timer.positionSeconds=0,s.timer.durationSeconds=0}function f(){return s.playPause.STATE.ID===c.PLAYING.ID}function le(){let e=D.players.getStatus();rt(),xe(e),f()===!1&&e.currentTrack<=1&&E(s.prevTrack,c.DISABLED),e.currentTrack<e.numTracks&&E(s.nextTrack,c.ENABLED)}function oe(){let e=D.players.getStatus();E(s.playPause,c.PLAYING),s.playPause.icon.textContent="pause_circle_filled",E(s.prevTrack,c.ENABLED),xe(e)}function w(){E(s.playPause,c.PAUSED),s.playPause.icon.textContent="play_circle_filled"}function Se(e){e?s.playPause.element.classList.toggle("time-remaining-warning"):s.playPause.element.classList.remove("time-remaining-warning")}function q(){let e=D.players.getStatus();rt(),xe(e),E(s.prevTrack,c.ENABLED),e.currentTrack>=e.numTracks&&E(s.nextTrack,c.DISABLED)}var _={OFF:0,ALL:1,ONE:2},_e=[{title:"Repeat Off",icon:"repeat"},{title:"Repeat All",icon:"repeat"},{title:"Repeat One",icon:"repeat_one"}];function Z(){return parseInt(s.repeat.element.getAttribute("data-repeat-mode"))}function qt(){let e=Z()+1<_e.length?Z()+1:0;s.repeat.element.setAttribute("data-repeat-mode",e),s.repeat.element.title=_e[e].title,s.repeat.icon.textContent=_e[e].icon}function nt(){s.mute.icon.textContent=D.settings.masterMute?"volume_off":"volume_up"}function Ht(){f()===!1&&s.timer.positionSeconds!==-1&&s.timer.durationSeconds!==-1&&(ke(s.timer.position,D.settings.autoplay?s.timer.positionSeconds:s.timer.durationSeconds-s.timer.positionSeconds),ke(s.timer.duration,s.timer.durationSeconds))}var ie=S("playback-events"),$={settings:{},snackbarId:0,nowPlayingIcons:null},Ve={nowPlayingIconsSelector:"h2.entry-title"},o={LOADING:"loading",READY:"ready",MEDIA_PLAYING:"mediaPlaying",MEDIA_PAUSED:"mediaPaused",MEDIA_ENDED:"mediaEnded",MEDIA_TIME_REMAINING:"mediaTimeRemaining",MEDIA_SHOW:"mediaShow",MEDIA_UNAVAILABLE:"mediaUnavailable",CONTINUE_AUTOPLAY:"continueAutoplay",RESUME_AUTOPLAY:"resumeAutoplay",AUTOPLAY_BLOCKED:"autoplayBlocked",PLAYBACK_BLOCKED:"playbackBlocked"},$e={[o.LOADING]:[Gt],[o.READY]:[Wt],[o.MEDIA_PLAYING]:[Jt],[o.MEDIA_PAUSED]:[Xt],[o.MEDIA_ENDED]:[ot],[o.MEDIA_TIME_REMAINING]:[zt],[o.MEDIA_SHOW]:[Zt],[o.CONTINUE_AUTOPLAY]:[Qt],[o.RESUME_AUTOPLAY]:[ea],[o.AUTOPLAY_BLOCKED]:[ta],[o.PLAYBACK_BLOCKED]:[aa],[o.MEDIA_UNAVAILABLE]:[sa]};function lt(e){ie.log("init()"),$.settings=e,$.nowPlayingIcons=document.querySelectorAll(Ve.nowPlayingIconsSelector)}function F(e,t){e in $e&&$e[e].push(t)}function L(e,t=null,a=null){$e[e].forEach(n=>{n({event:e,data:t,callback:a})})}function Gt(e){ne(e.data.loadingPercent)}function Wt(e){Y(e),ne(0)}function Jt(e){if(Y(e),ye($.snackbarId),e.data.numTracks>1){let t=document.querySelector(`#${e.data.trackId} ${Ve.nowPlayingIconsSelector}`);it(t),A(t,"playing-paused","now-playing-icon"),$.settings.user.animateNowPlayingIcon&&t.classList.add("playing-animate")}}function Xt(e){Y(e),e.data.numTracks>1&&document.querySelector(`#${e.data.trackId} ${Ve.nowPlayingIconsSelector}`).classList.add("playing-paused")}function ot(e){Y(e),ne(0),e!==null&&e.data.numTracks>1&&it()}function zt(){}function Zt(e){Y(e),ot(null),e.data.scrollToMedia&&be(e.data.trackId)}function Qt(e){Y(e),H(navigationVars.next,!0)}function ea(e){let t=JSON.parse(sessionStorage.getItem(R.UF_AUTOPLAY));if(sessionStorage.removeItem(R.UF_AUTOPLAY),Y(e),ie.log(`RESUME_AUTOPLAY: ${t!==null?JSON.stringify(t):"NO"}`),t!==null){let a=document.getElementById(t.trackId)?.querySelector("iframe").id;e.callback.resumeAutoplay(t,a)}}function ta(e){Y(e),$.snackbarId=T("Autoplay blocked, Play to continue",0,"play",()=>e.callback.togglePlayPause())}function aa(e){Y(e),T("Unable to play track, skipping to next",5,"Stop",()=>{},()=>Fe(e))}function sa(e){Y(e),ra(e.data.trackId)?T("YouTube Premium track, skipping",5,"help",()=>{window.location.href="/channel/premium/"},()=>Fe(e)):(T("Unable to play track, skipping to next",5,"Stop",()=>{},()=>Fe(e)),Je("EVENT_MEDIA_UNAVAILABLE",e.data))}function Y(e=null){ie.isDebug()&&e!==null&&ie.log(e)}function it(e){$.nowPlayingIcons.forEach(t=>{t!==e&&t.classList.remove("now-playing-icon","playing-animate","playing-paused")})}function Fe(e){e.data.currentTrack<e.data.numTracks?e.callback.skipToTrack(e.data.currentTrack+1,!0):navigationVars.next!==null&&H(navigationVars.next,!0)}function ra(e){let t=document.getElementById(e);return t!==null?t.classList.contains("category-premium"):!1}function H(e,t=!1){ie.log(`navigateTo(): ${e} - continueAutoplay: ${t}`),e!=null&&e.length>0&&(sessionStorage.setItem(R.UF_AUTOPLAY,JSON.stringify({autoplay:t,trackId:null,position:0})),window.location.href=e)}function be(e){if($.settings.user.autoScroll){let t=Math.round(window.scrollY+document.getElementById(e).getBoundingClientRect().top),a=Math.round(window.pageYOffset),n=ct(t>a);a+n+ut()>t&&(n=ct(!1)),window.scroll({top:t-(n+ut()),left:0,behavior:$.settings.user.smoothScrolling?"smooth":"auto"})}}function ct(e){return e?K("--site-header-height-down"):K("--site-header-height-up")}function ut(){return K("--site-content-margin-top")-1}var k=S("embedded-players"),B=new re(10),l={settings:{},players:{},playbackState:null,playbackTimer:null,eventHandler:null,loadEventsTotal:0,loadEventsCount:1},je={youTubeIframeIdRegEx:/youtube-uid/i,soundCloudIframeIdRegEx:/soundcloud-uid/i,maxPlaybackStartDelay:3};function dt(e){({settings:l.settings,players:l.players,playbackState:l.playbackState,playbackTimer:l.playbackTimer}=e),oa(),Ea()}function gt(e){let t=document.body.getAttribute("data-gallery-track-count");return t===null?t=0:t=parseInt(t),k.log(`getTrackCount(): ${t}`),l.loadEventsTotal=t+3,l.eventHandler=e,t}function Ae(){return{loadingPercent:100*(l.loadEventsCount++/l.loadEventsTotal)}}function pt(){l.loadEventsCount>=l.loadEventsTotal?l.eventHandler(o.READY):l.eventHandler(o.LOADING,Ae())}function na(){document.querySelectorAll("single-track").forEach(t=>{let a=t.querySelector("iframe"),n=null;if(je.youTubeIframeIdRegEx.test(a.id)){let u=new YT.Player(a.id,{events:{onReady:ia,onStateChange:ca,onError:fa}});n=new tt(t.id,a.id,u,t.getAttribute("data-track-source-data"))}else if(je.soundCloudIframeIdRegEx.test(a.id)){let u=SC.Widget(a.id);n=new Re(t.id,a.id,u,a.src),u.bind(SC.Widget.Events.READY,()=>{n.setThumbnail(),Ta()}),u.bind(SC.Widget.Events.PLAY,ka),u.bind(SC.Widget.Events.PAUSE,Sa),u.bind(SC.Widget.Events.FINISH,ba),u.bind(SC.Widget.Events.ERROR,Aa)}n!==null&&(n.setTitle(t.getAttribute("data-track-title")),n.setArtist(t.getAttribute("data-track-artist")),l.players.add(n))})}function Pe(e,t){k.log("onPlayerError()"),k.log(e);let a=e instanceof Re?g.SOUNDCLOUD:g.YOUTUBE;l.players.isCurrent(e.getUid())===!1&&l.players.stop(),B.add(a,y.PLAYER_ERROR,e.getUid()),l.eventHandler(o.MEDIA_UNAVAILABLE,la(e,t))}function la(e,t){let a=e.getArtist()||"N/A",n=e.getTitle()||"N/A";return{currentTrack:l.players.trackFromUid(e.getUid()),numTracks:l.players.getNumTracks(),trackId:e.getTrackId(),mediaTitle:`${a} - ${n}`,mediaUrl:t}}function oa(){k.log("initYouTubeAPI()"),l.eventHandler(o.LOADING,Ae()),window.onYouTubeIframeAPIReady=function(){k.log("onYouTubeIframeAPIReady()"),l.eventHandler(o.LOADING,Ae()),na()};let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function ia(){k.log("onYouTubePlayerReady()"),pt()}function ca(e){switch(B.add(g.YOUTUBE,e.data,e.target.h.id),e.data){case YT.PlayerState.UNSTARTED:ua(e);break;case YT.PlayerState.BUFFERING:da(e);break;case YT.PlayerState.PLAYING:ga(e);break;case YT.PlayerState.PAUSED:pa(e);break;case YT.PlayerState.CUED:ya(e);break;case YT.PlayerState.ENDED:ma(e);break}}function ua(e){k.log(`onYouTubePlayerStateChange: UNSTARTED (uID: ${e.target.h.id})`),B.ytAutoplayBlocked(e.target.h.id,3e3)&&l.eventHandler(o.AUTOPLAY_BLOCKED)}function da(e){if(k.log(`onYouTubePlayerStateChange: BUFFERING (uID: ${e.target.h.id})`),l.players.crossfade.isFading()===!1){let t=l.players.playerFromUid(e.target.h.id);t.mute(l.settings.masterMute),t.setVolume(l.settings.masterVolume)}}function ga(e){k.log(`onYouTubePlayerStateChange: PLAYING   (uID: ${e.target.h.id})`),l.playbackState.syncAll(e.target.h.id,l.playbackState.STATE.PLAY),l.players.current.setDuration(Math.round(e.target.getDuration())),l.playbackTimer.start()}function pa(e){k.log(`onYouTubePlayerStateChange: PAUSED    (uID: ${e.target.h.id})`),l.players.isCurrent(e.target.h.id)?(l.playbackState.syncAll(e.target.h.id,l.playbackState.STATE.PAUSE),l.playbackTimer.stop(!1)):l.players.crossfade.stop()}function ya(e){k.log(`onYouTubePlayerStateChange: CUED      (uID: ${e.target.h.id})`)}function ma(e){k.log(`onYouTubePlayerStateChange: ENDED     (uID: ${e.target.h.id})`),l.players.isCurrent(e.target.h.id)?(l.playbackTimer.stop(!0),l.eventHandler(o.MEDIA_ENDED)):l.players.crossfade.stop()}function fa(e){k.log("onYouTubePlayerError: "+e.data);let t=l.players.playerFromUid(e.target.h.id);t.setPlayable(!1),Pe(t,e.target.getVideoUrl())}function Ea(){k.log("initSoundCloudAPI()"),l.eventHandler(o.LOADING,Ae())}function Ta(){k.log("onSoundCloudPlayerEventReady()"),pt()}function ka(e){k.log(`onSoundCloudPlayerEvent: PLAY   (uID: ${e.soundId})`),B.add(g.SOUNDCLOUD,y.STATE_PLAYING,e.soundId),l.players.crossfade.isFading()&&l.players.isCurrent(e.soundId)?B.scPlayDoubleTrigger(e.soundId,je.maxPlaybackStartDelay*1e3)&&l.playbackState.syncAll(e.soundId,l.playbackState.STATE.PLAY):(l.playbackState.syncAll(e.soundId,l.playbackState.STATE.PLAY),l.players.current.mute(l.settings.masterMute),l.players.current.setVolume(l.settings.masterVolume)),l.players.current.getEmbeddedPlayer().getDuration(t=>{l.players.current.setDuration(Math.round(t/1e3)),l.playbackTimer.start()})}function Sa(e){k.log(`onSoundCloudPlayerEvent: PAUSE  (uID: ${e.soundId})`),B.add(g.SOUNDCLOUD,y.STATE_PAUSED,e.soundId),B.scAutoplayBlocked(e.soundId,3e3)?(l.playbackTimer.stop(!1),l.eventHandler(o.AUTOPLAY_BLOCKED)):B.scWidgetPlayBlocked(e.soundId,3e4)?(l.playbackTimer.stop(!1),l.eventHandler(o.PLAYBACK_BLOCKED,{currentTrack:l.players.trackFromUid(e.soundId),numTracks:l.players.getNumTracks()})):l.players.isCurrent(e.soundId)?l.players.current.getPosition(t=>{t>0&&(l.playbackState.syncAll(e.soundId,l.playbackState.STATE.PAUSE),l.playbackTimer.stop(!1))}):l.players.crossfade.stop()}function ba(e){k.log(`onSoundCloudPlayerEvent: FINISH (uID: ${e.soundId})`),l.players.isCurrent(e.soundId)?(l.playbackTimer.stop(!0),l.eventHandler(o.MEDIA_ENDED)):l.players.crossfade.stop()}function Aa(){this.getCurrentSound(e=>{let t=l.players.playerFromUid(e.id);k.log(`onSoundCloudPlayerEvent: ERROR for track: ${l.players.trackFromUid(e.id)}. ${t.getArtist()} - ${t.getTitle()} - [${t.getUid()} / ${t.getIframeId()}]`),t.setPlayable(!1)})}var Ke=S("crossfade-controls"),Q={settings:{},players:{}},G={crossfadePresetSelector:".crossfade-preset-control",crossfadePresetData:"data-crossfade-preset",crossfadeToSelector:".crossfade-fadeto-control"},v={crossfadePreset:{elements:null},crossfadeTo:{elements:null,click:null}};function yt(e,t,a){Ke.log("init()"),Q.settings=e,Q.players=t,v.crossfadePreset.elements=document.querySelectorAll(G.crossfadePresetSelector),v.crossfadeTo.elements=document.querySelectorAll(G.crossfadeToSelector),v.crossfadePreset.elements.length>1&&v.crossfadeTo.elements.length>1&&(v.crossfadePreset.elements.forEach(n=>ft(n,Q.settings.trackCrossfadeDefPreset)),v.crossfadeTo.click=a)}function mt(){Ke.log("ready()"),v.crossfadePreset.elements.length>1&&v.crossfadeTo.elements.length>1&&(v.crossfadePreset.elements.forEach(e=>{e.addEventListener("click",Pa),A(e,c.DISABLED.CLASS,c.ENABLED.CLASS)}),v.crossfadeTo.elements.forEach(e=>e.addEventListener("click",ha)),F(o.MEDIA_PLAYING,Et),F(o.MEDIA_PAUSED,Et))}function ft(e,t){e.setAttribute(G.crossfadePresetData,t),e.textContent=`${t+1}`,e.title=`Preset: ${ge.crossfade[t].name}`}function Pa(e){let t=parseInt(e.target.getAttribute(G.crossfadePresetData));ft(e.target,t+1<ge.crossfade.length?t+1:0)}function ha(e){if(f()&&Q.players.crossfade.isFading()===!1){let t=e.target.closest("single-track");if(t!==null){let a=t.querySelector("iframe"),n=t.querySelector(G.crossfadePresetSelector).getAttribute(G.crossfadePresetData);A(e.target.closest(`div${G.crossfadeToSelector}`),c.ENABLED.CLASS,c.DISABLED.CLASS),v.crossfadeTo.click(Q.players.uIdFromIframeId(a.id),ge.crossfade[n])}}}function Et(){let e=f(),t=e?Q.players.getStatus().currentTrack:-1;Ke.log(`updateCrossfadeToState() - playingState: ${e} - currentTrack: ${t}`),v.crossfadeTo.elements.forEach((a,n)=>{t===n+1?A(a,e?c.ENABLED.CLASS:c.DISABLED.CLASS,e?c.DISABLED.CLASS:c.ENABLED.CLASS):A(a,e?c.DISABLED.CLASS:c.ENABLED.CLASS,e?c.ENABLED.CLASS:c.DISABLED.CLASS)})}var I=S("gallery-player"),r={eventLog:null,settings:{},players:{}},he={updateTimerInterval:200,minCrossfadeToTime:5,maxBufferingDelay:3};function Tt(e){r.eventLog=B,r.settings=e.user,lt(e),r.players=st(),r.players.init(r.settings,St),fe(r.settings,r.players,Ia),yt(r.settings,r.players,Na),dt({settings:r.settings,players:r.players,playbackState:bt,playbackTimer:At})}function kt(){return gt(Ca)>0}function ce(){f()?(w(),r.players.current.pause()):(oe(),r.players.current.play(Pe))}function qe(){I.log(`prevClick() - prevTrack: ${r.players.getCurrentTrack()-1} - numTracks: ${r.players.getNumTracks()}`),r.players.getCurrentTrack()>0&&r.players.current.getPosition(e=>{e>5e3?(r.players.current.seekTo(0),At.updateCallback(0)):(r.players.getCurrentTrack()>1&&r.players.stop(),r.players.prevTrack(f())&&le())})}function Le(e=!1){let t=r.players.getCurrentTrack()+1>r.players.getNumTracks();I.log(`nextClick() - isMediaEnded: ${e} - isLastTrack: ${t} - autoplay: ${r.settings.autoplay}`),!La(e,t)&&(t===!1?(r.players.stop(),e&&r.settings.autoplay===!1?w():r.players.nextTrack(f())&&q()):e&&(w(),r.settings.autoplay?L(o.CONTINUE_AUTOPLAY):r.players.stop()))}function La(e,t){if(e&&r.settings.autoplay){let a=Z();if(I.log(`repeatPlayback(): ${I.getObjectKeyForValue(_,a)}`),a===_.ONE)return r.players.current.seekTo(0),r.players.current.play(),!0;if(t&&a===_.ALL)return r.players.stop(),r.players.setPlayerIndex(0),St(!0),!0}return!1}function Ia(e){r.players.current.seekTo(e)}function He(){r.settings.masterMute=r.settings.masterMute!==!0,r.players.mute()}function Da(e,t=!0){I.log(`cueTrack(): ${e}`),r.players.setPlayerIndex(r.players.indexMap.get(e)),L(o.MEDIA_SHOW,{scrollToMedia:t,trackId:r.players.current.getTrackId()}),q()}function St(e,t=!0){L(o.MEDIA_SHOW,{scrollToMedia:t,trackId:r.players.current.getTrackId()}),e&&r.players.current.play(Pe)}function Ge(e,t=!0){I.log(`skipToTrack(): ${e} - ${t}`),t===!0&&f()===!1&&(r.eventLog.clear(),r.eventLog.add(g.ULTRAFUNK,y.RESUME_AUTOPLAY,null),r.players.jumpToTrack(e,t)&&q())}function va(e,t=null){I.log(`resumeAutoplay(): ${e.autoplay}${t!==null?" - "+t:""}`),t!==null?e.autoplay?Ge(r.players.trackFromUid(t),!0):Da(t):e.autoplay&&(r.eventLog.add(g.ULTRAFUNK,y.RESUME_AUTOPLAY,null),ce())}function M(){return{isPlaying:f(),currentTrack:r.players.getCurrentTrack(),position:0,numTracks:r.players.getNumTracks(),trackId:r.players.current.getTrackId(),iframeId:r.players.current.getIframeId()}}function Ca(e,t=null){switch(I.isDebug()&&e!==o.LOADING&&(I.log(`embeddedEventHandler(): ${e}`),t!==null&&I.log(t)),e){case o.LOADING:L(o.LOADING,t);break;case o.READY:Ee(qe,ce,Le,He),mt(),L(o.READY),L(o.RESUME_AUTOPLAY,null,{resumeAutoplay:va});break;case o.MEDIA_ENDED:Le(!0);break;case o.AUTOPLAY_BLOCKED:w(),L(o.AUTOPLAY_BLOCKED,null,{togglePlayPause:ce});break;case o.PLAYBACK_BLOCKED:w(),L(o.PLAYBACK_BLOCKED,t,{skipToTrack:Ge});break;case o.MEDIA_UNAVAILABLE:w(),L(o.MEDIA_UNAVAILABLE,t,{skipToTrack:Ge});break}}var bt=(()=>{let e={PLAY:1,PAUSE:2},t=function n(u,p){if(I.log(`playbackState.syncAll() - previousTrack: ${r.players.getPlayerIndex()+1} - nextTrack: ${r.players.indexMap.get(u)+1} - syncState: ${I.getObjectKeyForValue(e,p)}`),r.players.isCurrent(u))p===e.PLAY?(r.players.crossfade.start(),oe(),L(o.MEDIA_PLAYING,M())):p===e.PAUSE&&(r.players.crossfade.stop(),w(),L(o.MEDIA_PAUSED,M()));else{let O=r.players.getPlayerIndex(),b=r.players.indexMap.get(u);r.players.stop(),r.players.setPlayerIndex(b),a(O,b),n(u,p)}};function a(n,u){u>n?q():le()}return{STATE:e,syncAll:t,syncControls:a}})(),At=(()=>{let e=-1,t=0,a=!0;return document.addEventListener("visibilitychange",()=>{a=document.visibilityState==="visible"}),{start:n,stop:u,updateCallback:p};function n(){u(!1),e=setInterval(()=>{a&&r.players.current.getPosition(p)},he.updateTimerInterval)}function u(h=!1){e!==-1&&(clearInterval(e),e=-1),h&&(p(0),L(o.MEDIA_ENDED,M())),t=0,Se(!1)}function p(h,C=0){let j=Math.round(h/1e3);Te(h,C),z(j,C),j>0&&C>0&&(O(j,C),b(j,C))}function O(h,C){if(r.settings.autoplay===!1&&r.settings.timeRemainingWarning&&t!==h){let j=C-h;t=h,j<=r.settings.timeRemainingSeconds?(Se(!0),L(o.MEDIA_TIME_REMAINING,{timeRemainingSeconds:j})):Se(!1)}}function b(h,C){r.settings.masterMute===!1&&r.settings.autoplay&&r.settings.autoCrossfade&&C-h===r.settings.autoCrossfadeLength+he.maxBufferingDelay&&r.players.getCurrentTrack()+1<=r.players.getNumTracks()&&Pt(Oe.AUTO,{name:"Auto Crossfade",length:r.settings.autoCrossfadeLength,curve:r.settings.autoCrossfadeCurve})}})();function Na(e,t){r.players.isCurrent(e)===!1&&r.players.current.getDuration()>0&&(I.log(`crossfadeToClick():
      fadeOut: ${r.players.current.getArtist()} - "${r.players.current.getTitle()}" (${r.players.current.getUid()})
      fadeIn.: ${r.players.playerFromUid(e).getArtist()} - "${r.players.playerFromUid(e).getTitle()}" (${e})`),r.settings.masterMute===!1&&r.settings.autoplay===!1&&r.players.current.getPosition(a=>{r.players.current.getDuration()-a/1e3>=he.minCrossfadeToTime+he.maxBufferingDelay&&Pt(Oe.TRACK,t,e)}))}function Pt(e,t,a=null){r.eventLog.add(g.ULTRAFUNK,y.CROSSFADE_START,null);let n=r.players.crossfade.init(e,t,a);n!==null&&bt.syncControls(n.fadeOutPlayer,n.fadeInPlayer)}var ee=S("screen-wakelock"),Ie={wakeLock:null};function ht(){return"wakeLock"in navigator&&"request"in navigator.wakeLock}async function De(e){ht()?document.visibilityState==="visible"&&await Lt()!==!0&&ee.log("enable(): Screen Wake Lock request failed"):(ee.log("enable(): Screen Wake Lock is not supported"),T("Keep Screen On is not supported",5,"Disable",()=>e.user.keepMobileScreenOn=!1))}function ve(){ee.log("stateVisible()"),ht()&&Ie.wakeLock===null&&Lt()}async function Lt(){try{return Ie.wakeLock=await navigator.wakeLock.request("screen"),ee.log("request(): Screen Wake Lock is Enabled"),Ie.wakeLock.addEventListener("release",()=>{ee.log("request(): Screen Wake Lock was Released"),Ie.wakeLock=null}),!0}catch(e){ee.error(`request(): ${e.name} - ${e.message}`)}return!1}var U=S("list-player"),te=new re(10),i={settings:{},player:null,autoplayData:null,autoplayToggle:null,firstStatePlaying:!0},P={container:null,observer:null},d={trackId:null,element:null,snackbarId:0};function It(e,t){U.log("init"),i.settings=e,i.autoplayToggle=t,P.container=document.getElementById("tracklist-container"),P.observer=new IntersectionObserver(Ya,{root:P.container}),wa()!==null?_a():T("No playable YouTube tracks!",0,"help",()=>{window.location.href="/help/#list-player"}),X("span.nav-bar-arrow-back","click",Ce,navigationVars.prev),X("span.nav-bar-arrow-fwd","click",Ce,navigationVars.next),P.container.addEventListener("click",a=>{let n=a.target.closest("div.thumbnail");if(n!==null)return W(n.closest("div.track-entry").id,!0,!0);let u=a.target.closest("div.share-playon-button");if(u!==null)return Oa(u);let p=a.target.closest("div.menu-button");if(p!==null)return Ra(p)})}function Ua(e){if(se.allow()&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":e.preventDefault(),ue(e);break}switch(e.key){case" ":e.preventDefault(),d.trackId!==null?W(d.trackId):W(P.container.querySelector(".track-entry.current").id);break;case"ArrowLeft":e.preventDefault(),e.shiftKey===!0?Ce(null,navigationVars.prev):Ot();break;case"ArrowRight":e.preventDefault(),e.shiftKey===!0?Ce(null,navigationVars.next):Rt();break;case"A":i.autoplayToggle.toggle(e);break;case"f":case"F":e.preventDefault(),V.toggle(document.getElementById("youtube-player"));break;case"m":case"M":e.preventDefault(),Dt(),T(i.settings.user.masterMute?"Volume is muted (<b>m</b> to unmute)":"Volume is unmuted (<b>m</b> to mute)",3);break}}}function Oa(e){let t=e.closest("div.track-entry"),a=`${t.getAttribute("data-track-artist")} - ${t.getAttribute("data-track-title")}`,n=t.getAttribute("data-track-url");et.show({string:a,filterString:!0,url:n})}function Ra(e){let t=[],a=e.closest("div.track-entry"),n=a.getAttribute("data-track-artist"),u=a.getAttribute("data-track-title"),p=a.querySelector(".track-artists-links").querySelectorAll("a"),O=a.querySelector(".track-channels-links").querySelectorAll("a");t.push({id:null,class:"dialog-body-text",text:`<b>${n}</b><br><span class="light-text">${u}</span>`}),t.push({id:null,class:"dialog-body-title",text:"Artists"}),p.forEach(b=>t.push({id:`modal-item-id-${t.length+1}`,class:b.classList[0],text:b.innerText,link:b.href,icon:"link"})),t.push({id:null,class:"dialog-body-title",text:"Channels"}),O.forEach(b=>t.push({id:`modal-item-id-${t.length+1}`,text:b.innerText,link:b.href,icon:"link"})),Qe("Track Details",t,b=>{window.location.href=t[t.findIndex(h=>h.id===b)].link})}function ue(){let e=0;window.pageYOffset<1&&(e=K("--site-header-height")-K("--site-header-height-down")),window.scroll({top:e,left:0,behavior:i.settings.user.smoothScrolling?"smooth":"auto"})}function Dt(){i.settings.user.masterMute?i.settings.user.masterMute=!1:i.settings.user.masterMute=!0,i.settings.user.masterMute?i.player.embedded.mute():i.player.embedded.unMute()}function wa(){if(d.trackId=de(),i.autoplayData=JSON.parse(sessionStorage.getItem(R.UF_AUTOPLAY)),sessionStorage.removeItem(R.UF_AUTOPLAY),d.trackId!==null){if(i.autoplayData!==null&&i.autoplayData.trackId!==null){let e=i.autoplayData.trackId.match(/^[a-zA-Z0-9-_]{11}$/);if(e!==null)d.trackId=e[0];else if(i.autoplayData.trackId.match(/^track-(?!0)\d{1,6}$/i)!==null){let t=P.container.querySelectorAll(`[data-post-id="${i.autoplayData.trackId.slice(6)}"]`);t.length===1?t[0].id.length!==0?d.trackId=t[0].id:T("Cannot play SoundCloud track",5,"help",()=>{window.location.href="/help/#list-player"}):T("Unable to cue track (not found)",5)}}d.element=document.getElementById(d.trackId),P.observer.observe(d.element)}return U.log(`cueInitialTrack() - current.trackId: ${d.trackId} - autoplayData: ${i.autoplayData!==null?JSON.stringify(i.autoplayData):"N/A"}`),d.trackId}function Ya(e){P.observer.unobserve(d.element),Math.ceil(e[0].intersectionRatio*100)/100!=1&&(P.container.scrollTop=d.element.offsetTop-P.container.offsetHeight+d.element.offsetHeight)}function Ce(e,t){e?.preventDefault(),H(t,f())}function Ba(){let e=d.element!==null?d.element.previousElementSibling:null;for(;e!==null&&e.id.length===0;)e=e.previousElementSibling;return e!==null?e.id:null}function de(e=d.element){let t=e!==null?e.nextElementSibling:P.container.querySelector(".track-entry");for(;t!==null&&t.id.length===0;)t=t.nextElementSibling;return t!==null?t.id:null}function W(e,t=!0,a=!1){if(U.log(`setCurrentTrack() - nextTrackId: ${e.length!==0?e:"N/A"} - playNextTrack: ${t} - isPointerClick: ${a}`),e.length===0&&a){T("Cannot play SoundCloud track",5,"help",()=>{window.location.href="/help/#list-player"});return}e===d.trackId?Nt():(f()&&i.player.embedded.stopVideo(),d.element.classList.remove("current","playing","paused"),d.trackId=e,d.element=document.getElementById(d.trackId),a===!1&&P.observer.observe(d.element),d.element.classList.add("current"),vt(t))}function vt(e){i.player.setArtist(d.element.getAttribute("data-track-artist")),i.player.setTitle(d.element.getAttribute("data-track-title")),i.player.setThumbnail(d.trackId),e?(i.player.embedded.loadVideoById(d.trackId),J(!0)):(i.player.embedded.cueVideoById(d.trackId),J(!1))}function Ct(){let e={isPlaying:!1,currentTrack:1,position:0,trackId:0},t=P.container.querySelector(".track-entry.current")?.id;return t===void 0||P.container.querySelectorAll(".track-entry").forEach((a,n)=>{a.id===t&&(e={isPlaying:f(),currentTrack:n+1,position:Math.ceil(i.player.embedded.getCurrentTime()),trackId:`track-${a.getAttribute("data-post-id")}`})}),e}function Nt(){f()?i.player.embedded.pauseVideo():i.player.embedded.playVideo()}function Ut(e=!1,t=!1){let a=t?_.OFF:Z(),n=de();U.log(`advanceToNextTrack() autoplay: ${e} - isPlaybackError: ${t} - nextTrackId: ${n} - repeatMode: ${U.getObjectKeyForValue(_,a)}`),e&&a===_.ONE?(i.player.embeddedPlayer.seekTo(0),i.player.embeddedPlayer.playVideo()):e&&n===null&&a===_.ALL?(W(de(P.container.querySelector(".track-entry"))),ue()):n===null?H(navigationVars.next,e):e?W(n):J(!1)}function Ot(){let e=Ba(),t=i.player.embeddedPlayer.getCurrentTime();e!==null&&t<=5?(W(e,f()),le()):t!==0&&(i.player.seekTo(0),We.update(0,0))}function Rt(){let e=de();e!==null&&(W(e,f()),q())}function J(e){e?A(d.element,"paused","playing"):A(d.element,"playing","paused")}function Ma(){f()===!1&&i.autoplayData!==null&&(te.add(g.ULTRAFUNK,y.RESUME_AUTOPLAY,null),te.add(g.YOUTUBE,-1,de())),f()===!1&&Ut(!0,!0)}function xa(){d.trackId=null,J(!1)}function _a(){U.log("initYouTubeAPI()"),window.onYouTubeIframeAPIReady=function(){U.log("onYouTubeIframeAPIReady()");let a=new YT.Player("youtube-player",{events:{onReady:Va,onStateChange:$a,onError:ja}});i.player=new at(a),fe(i.settings.user,i.player,n=>{i.player.seekTo(n)}),U.log(i.player)};let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function Va(){U.log("onYouTubePlayerReady()"),d.element.classList.add("current"),i.autoplayData?.autoplay===!0&&te.add(g.ULTRAFUNK,y.RESUME_AUTOPLAY,null),Ee(Ot,Nt,Rt,Dt),vt(i.autoplayData?.autoplay===!0),N(".playback-details-control","click",ue),N(".playback-thumbnail-control","click",ue),N(".playback-timer-control","click",e=>i.autoplayToggle.toggle(e)),document.addEventListener("keydown",Ua),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&i.settings.user.keepMobileScreenOn&&ve()}),i.settings.user.keepMobileScreenOn&&De(i.settings)}function $a(e){switch(U.log(`onYouTubePlayerStateChange(): ${e.data} - trackId: ${d.trackId}`),te.add(g.YOUTUBE,e.data,d.trackId),e.data!==YT.PlayerState.PLAYING&&w(),e.data){case YT.PlayerState.UNSTARTED:te.ytAutoplayBlocked(d.trackId,3e3)&&(J(!1),d.snackbarId=T("Autoplay blocked, Play to continue",0,"play",()=>i.player.embedded.playVideo()));break;case YT.PlayerState.ENDED:We.stop(!0),Ut(i.settings.user.autoplay);break;case YT.PlayerState.PLAYING:Fa(e),We.start(),oe(),J(!0);break;case YT.PlayerState.PAUSED:J(!1);break}}function Fa(e){ye(d.snackbarId),i.player.setDuration(Math.round(e.target.getDuration())),i.firstStatePlaying&&(i.firstStatePlaying=!1,i.autoplayData=null,setTimeout(()=>{i.settings.user.autoplay&&f()&&window.pageYOffset<1&&ue()},6e3))}function ja(e){U.log(`onYouTubePlayerError(): ${e.data} - trackId: ${d.trackId}`),d.element.querySelector(".track-duration").innerText="Error",d.element.querySelector(".track-duration").style.display="block",te.add(g.YOUTUBE,y.PLAYER_ERROR,d.trackId),T("Unable to play track, skipping to next",5,"Stop",xa,Ma)}var We=(()=>{let e=-1,t=!0;return document.addEventListener("visibilitychange",()=>{t=document.visibilityState==="visible"}),{start:a,stop:n,update:u};function a(){n(),e=setInterval(()=>{t&&f()&&u(i.player.embedded.getCurrentTime()*1e3,i.player.getDuration())},250)}function n(p=!1){e!==-1&&(clearInterval(e),e=-1),p&&u(0,0)}function u(p,O){Number.isNaN(p)===!1&&(Te(p,O),z(Math.round(p/1e3),O))}})();var Ne=S("playback-interaction"),wt=new Be(10),m={settings:{},isPlaybackReady:!1},Ka={doubleClickDelay:500},x={playerToggle:null,autoplayToggle:null,crossfadeToggle:null};document.addEventListener("DOMContentLoaded",()=>{Ne.log("DOMContentLoaded"),qa(),kt()?(Ha(),Ga(),Yt()):document.getElementById("list-player-container")!==null&&(Yt(),It(m.settings,x.autoplayToggle))});function qa(){Ne.log("readSettings()"),m.settings=ze(R.UF_PLAYBACK_SETTINGS,Xe,!0),Ne.log(m.settings)}function Ha(){Ne.log("initInteraction()"),X("span.nav-bar-arrow-back","click",ae,navigationVars.prev),X("span.nav-bar-arrow-fwd","click",ae,navigationVars.next),N("nav.post-navigation .nav-previous a","click",ae,navigationVars.prev),N("nav.post-navigation .nav-next a","click",ae,navigationVars.next),document.addEventListener("keydown",Wa),window.addEventListener("blur",za)}function Ga(){Tt(m.settings),F(o.READY,Ja),F(o.MEDIA_SHOW,Bt),F(o.MEDIA_ENDED,Bt),F(o.MEDIA_TIME_REMAINING,Xa)}function Yt(){V.init(),se.init(m.settings.user),x.playerToggle=new _t("footer-player-toggle"),x.crossfadeToggle=new $t("footer-crossfade-toggle"),x.autoplayToggle=new Vt("footer-autoplay-toggle"),N(".playback-shuffle-control span","click",Ze)}function Wa(e){if(m.isPlaybackReady&&se.allow()&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":e.preventDefault(),be(M().trackId);break}switch(e.key){case" ":e.preventDefault(),ce();break;case"ArrowLeft":e.preventDefault(),e.shiftKey===!0?ae(null,navigationVars.prev):qe();break;case"ArrowRight":e.preventDefault(),e.shiftKey===!0?ae(null,navigationVars.next):Le();break;case"A":x.autoplayToggle.toggle(e);break;case"f":case"F":e.preventDefault(),V.toggle(document.getElementById(M().iframeId));break;case"m":case"M":e.preventDefault(),He(),T(m.settings.user.masterMute?"Volume is muted (<b>m</b> to unmute)":"Volume is unmuted (<b>m</b> to mute)",3);break;case"x":case"X":x.crossfadeToggle.classList.contains("disabled")===!1&&x.crossfadeToggle.toggle(e);break}}}function Ja(){N(".playback-details-control","click",Mt),N(".playback-thumbnail-control","click",Mt),N(".playback-timer-control","click",e=>x.autoplayToggle.toggle(e)),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&m.settings.user.keepMobileScreenOn&&ve()}),m.settings.user.keepMobileScreenOn&&De(m.settings),m.isPlaybackReady=!0}function Bt(){m.settings.user.autoExitFullscreen&&V.exit()}function Xa(e){m.settings.user.autoExitFsOnWarning&&e.data.timeRemainingSeconds<=m.settings.user.timeRemainingSeconds&&V.exit()}function za(){setTimeout(()=>{document.activeElement instanceof HTMLIFrameElement&&setTimeout(()=>{document.activeElement.blur(),document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},250)},0)}function Mt(e){be(M().trackId),wt.add(g.MOUSE,y.MOUSE_CLICK,null),e.target.tagName.toLowerCase()==="img"?xt("showTrackImageHint","<b>Tip:</b> Double click or tap on the Track Thumbnail for full screen"):xt("showDetailsHint","<b>Tip:</b> Double click or tap on Artist &amp; Title for full screen"),wt.doubleClicked(g.MOUSE,y.MOUSE_CLICK,Ka.doubleClickDelay)&&V.enter(document.getElementById(M().iframeId))}function xt(e,t,a=0){m.settings.priv.tips[e]&&(T(t,a),m.settings.priv.tips[e]=!1)}function ae(e,t){e?.preventDefault(),H(t,M().isPlaying)}var _t=class extends pe{constructor(t){super(t)}toggle(){let t=document.body.classList.contains("list-player"),a=this.getDestData(t),n=window.location.href.replace(/\/page\/(?!0)\d{1,6}/,"");a.pageNum>1&&(n=`${n}page/${a.pageNum}/`),sessionStorage.setItem(R.UF_AUTOPLAY,JSON.stringify(a.trackData)),t?window.location.href=n.replace(/list\//,""):window.location.href=n.replace(/ultrafunk\.com\//,"ultrafunk.com/list/")}update(){this.textContent=document.body.classList.contains("list-player")?"List":"Gallery"}getDestData(t){let a=window.location.href.split("/"),n=a.findIndex(C=>C.toLowerCase()==="page"),u=n!==-1?parseInt(a[n+1]):1,p=t?Ct():M(),O=t?navigationVars.listItemsPerPage:navigationVars.galleryItemsPerPage,b=t?navigationVars.galleryItemsPerPage:navigationVars.listItemsPerPage,h=p.currentTrack+(u-1)*O;return{pageNum:Math.ceil(h/b),trackData:{autoplay:p?.isPlaying,trackId:p?.trackId,position:p?.position}}}},Vt=class extends pe{constructor(t){super(t)}toggle(){m.settings.user.autoplay=m.settings.user.autoplay!==!0,T(m.settings.user.autoplay?"Autoplay enabled (<b>Shift</b> + <b>A</b> to disable)":"Autoplay disabled (<b>Shift</b> + <b>A</b> to enable)",5),this.update()}update(){this.textContent=m.settings.user.autoplay?"ON":"OFF",m.settings.user.autoplay?A(document.body,"autoplay-off","autoplay-on"):A(document.body,"autoplay-on","autoplay-off"),m.settings.user.autoplay?x.crossfadeToggle.classList.remove("disabled"):x.crossfadeToggle.classList.add("disabled")}},$t=class extends pe{constructor(t){super(t)}toggle(){m.settings.user.autoCrossfade=m.settings.user.autoCrossfade!==!0,T(m.settings.user.autoCrossfade?"Auto Crossfade enabled (<b>x</b> to disable)":"Auto Crossfade disabled (<b>x</b> to enable)",5),this.update()}update(){this.textContent=m.settings.user.autoCrossfade?"ON":"OFF"}};
//# sourceMappingURL=interaction.js.map
