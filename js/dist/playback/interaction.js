import{A as ze,B as Ne,C as Ze,D as Ue,E as Qe,F as de,H as et,a as S,b as He,c as Ge,e as ie,f as O,i as We,j as ve,l as v,m as W,n as F,p as b,q as Je,r as _,s as ae,t as ce,u as Xe,v as E,w as ue}from"../chunk-3BPQNNYH.js";var Oe=S("eventlogger"),y={UNKNOWN:1e3,KEYBOARD:100,MOUSE:110,YOUTUBE:1,SOUNDCLOUD:2,ULTRAFUNK:50},p={UNKNOWN:-2e3,KEY_ARROW_LEFT:80,KEY_ARROW_RIGHT:81,MOUSE_CLICK:82,STATE_ERROR:-5,STATE_UNSTARTED:-1,STATE_ENDED:0,STATE_PLAYING:1,STATE_PAUSED:2,STATE_BUFFERING:3,STATE_CUED:5,RESUME_AUTOPLAY:50,PLAYER_ERROR:60,CROSSFADE_START:70},Vt={eventSource:y.UNKNOWN,eventType:p.UNKNOWN,uId:null,timeStamp:0},we=class{constructor(t=10){this.log=[],this.maxEntries=t,this.lastPos=0,this.matchCount=0}add(t,a,l,u=Date.now()){let g=Object.create(Vt);g.eventSource=t,g.eventType=a,g.uId=l,g.timeStamp=u,this.log.length<this.maxEntries?this.log.push(g):(this.log.shift(),this.log.push(g))}clear(){this.log=[]}initMatch(){this.lastPos=this.log.length-1,this.matchCount=0}matchesEvent(t,a,l,u=null){this.log[this.lastPos-t].eventSource===a&&this.log[this.lastPos-t].eventType===l&&this.log[this.lastPos-t].uId===u&&this.matchCount++}matchesDelta(t,a){this.log[this.lastPos].timeStamp-this.log[this.lastPos-t].timeStamp<=a&&this.matchCount++}isPatternMatch(t,a){return this.matchCount===t?(Oe.log(`MATCH for: ${a}`),Oe.logEventLog(this.log,y,p),!0):!1}},Ye=class extends we{constructor(t){super(t)}doubleClicked(t,a,l){return this.initMatch(),this.lastPos>=1&&(this.matchesEvent(1,t,a),this.matchesEvent(0,t,a),this.matchesDelta(1,l)),this.isPatternMatch(3,`${Oe.getObjectKeyForValue(y,t)} Double Clicked`)}},se=class extends we{constructor(t){super(t)}ytAutoplayBlocked(t,a){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,y.ULTRAFUNK,p.RESUME_AUTOPLAY,null),this.matchesEvent(2,y.YOUTUBE,p.STATE_UNSTARTED,t),this.matchesEvent(1,y.YOUTUBE,p.STATE_BUFFERING,t),this.matchesEvent(0,y.YOUTUBE,p.STATE_UNSTARTED,t),this.matchesDelta(3,a)),this.isPatternMatch(5,"YouTube Autoplay Blocked")}scAutoplayBlocked(t,a){return this.initMatch(),this.lastPos>=3&&(this.matchesEvent(3,y.ULTRAFUNK,p.RESUME_AUTOPLAY,null),this.matchesEvent(2,y.SOUNDCLOUD,p.STATE_PLAYING,t),this.matchesEvent(1,y.SOUNDCLOUD,p.STATE_PAUSED,t),this.matchesEvent(0,y.SOUNDCLOUD,p.STATE_PAUSED,t),this.matchesDelta(3,a)),this.isPatternMatch(5,"SoundCloud Autoplay Blocked")}scWidgetPlayBlocked(t,a){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,y.SOUNDCLOUD,p.STATE_PLAYING,t),this.matchesEvent(1,y.SOUNDCLOUD,p.STATE_PAUSED,t),this.matchesEvent(0,y.SOUNDCLOUD,p.STATE_PAUSED,t),this.matchesDelta(2,a)),this.isPatternMatch(4,"SoundCloud WidgetPlay Blocked")}scPlayDoubleTrigger(t,a){return this.initMatch(),this.lastPos>=2&&(this.matchesEvent(2,y.ULTRAFUNK,p.CROSSFADE_START,null),this.matchesEvent(1,y.SOUNDCLOUD,p.STATE_PLAYING,t),this.matchesEvent(0,y.SOUNDCLOUD,p.STATE_PLAYING,t),this.matchesDelta(1,a)),this.isPatternMatch(4,"SoundCloud Play Double Trigger")}};var ge=S("playback-controls"),L={settings:{},players:{}},ye={progressControlsId:"progress-controls",playbackControlsId:"playback-controls"},i={DISABLED:{CLASS:"state-disabled",ID:10},ENABLED:{CLASS:"state-enabled",ID:20},HIDDEN:{CLASS:"state-hidden",ID:30},PLAYING:{CLASS:"state-playing",ID:40},PAUSED:{CLASS:"state-paused",ID:50}},s={progressSeek:{element:null,STATE:i.DISABLED,click:null},progressBar:{element:null,STATE:i.DISABLED},details:{element:null,STATE:i.DISABLED,artistElement:null,titleElement:null},thumbnail:{element:null,STATE:i.DISABLED,img:null},timer:{element:null,STATE:i.DISABLED,positionElement:null,durationElement:null,positionSeconds:-1,durationSeconds:-1},prevTrack:{element:null,STATE:i.DISABLED},playPause:{element:null,STATE:i.DISABLED,iconElement:null},nextTrack:{element:null,STATE:i.DISABLED},shuffle:{element:null,STATE:i.DISABLED},mute:{element:null,STATE:i.DISABLED,iconElement:null}};function pe(e,t,a){ge.log("init()"),L.settings=e,L.players=t;let l=document.getElementById(ye.progressControlsId);l!==null?(s.progressSeek.element=l.querySelector(".progress-seek-control"),s.progressSeek.click=a,s.progressBar.element=l.querySelector(".progress-bar-control")):ge.error(`init(): Unable to getElementById() for '#${ye.progressControlsId}'`);let u=document.getElementById(ye.playbackControlsId);u!==null?(s.details.element=u.querySelector(".playback-details-control"),s.details.artistElement=s.details.element.querySelector(".playback-details-artist"),s.details.titleElement=s.details.element.querySelector(".playback-details-title"),s.thumbnail.element=u.querySelector(".playback-thumbnail-control"),s.thumbnail.img=s.thumbnail.element.querySelector("img"),s.timer.element=u.querySelector(".playback-timer-control"),s.timer.positionElement=s.timer.element.querySelector(".playback-timer-position"),s.timer.durationElement=s.timer.element.querySelector(".playback-timer-duration"),s.prevTrack.element=u.querySelector(".playback-prev-control"),s.playPause.element=u.querySelector(".playback-play-pause-control"),s.playPause.iconElement=s.playPause.element.querySelector("span"),s.nextTrack.element=u.querySelector(".playback-next-control"),s.shuffle.element=u.querySelector(".playback-shuffle-control"),s.mute.element=u.querySelector(".playback-mute-control"),s.mute.iconElement=s.mute.element.querySelector("span")):ge.error(`init(): Unable to getElementById() for '#${ye.playbackControlsId}'`)}function me(e,t,a,l){ge.log("ready()"),T(s.progressSeek,i.ENABLED),s.progressSeek.element.addEventListener("click",$t),T(s.progressBar,i.ENABLED),T(s.details,i.HIDDEN),T(s.thumbnail,i.HIDDEN),T(s.timer,i.HIDDEN),L.settings.trackThumbnailOnMobile&&s.thumbnail.element.classList.add("show-on-mobile"),L.settings.trackTimesOnMobile&&s.timer.element.classList.add("show-on-mobile"),T(s.prevTrack,L.players.getCurrentTrack()>1?i.ENABLED:i.DISABLED),s.prevTrack.element.addEventListener("click",e),T(s.playPause,i.PAUSED),s.playPause.element.addEventListener("click",t),T(s.nextTrack,L.players.getNumTracks()>1?i.ENABLED:i.DISABLED),s.nextTrack.element.addEventListener("click",a),T(s.shuffle,i.ENABLED),T(s.mute,i.ENABLED),s.mute.element.addEventListener("click",l),tt(),ve("autoplay",Ft),ve("masterMute",tt)}function T(e,t=t.DISABLED){b(e.element,e.STATE.CLASS,t.CLASS),e.STATE=t}function fe(e,t){Re(t===0?0:e/(t*1e3))}function ne(e){Re(e/100)}function Re(e){s.progressBar.element.style.transform=`scaleX(${e})`}function $t(e){if(s.timer.durationSeconds>0){let t=e.clientX/document.documentElement.clientWidth*100,a=Math.round(s.timer.durationSeconds*t/100);s.progressSeek.click(a),f()===!1&&(ne(t),J(a,s.timer.durationSeconds))}}function Be(e){s.details.STATE.ID===i.HIDDEN.ID&&(T(s.details,i.ENABLED),T(s.thumbnail,i.ENABLED),T(s.timer,i.ENABLED)),s.details.artistElement.textContent=e.artist||"",s.details.titleElement.textContent=e.title||"",Kt(e.thumbnail),J(-1,-1)}function Kt(e){e.src!==s.thumbnail.img.src&&(s.thumbnail.element.classList.remove("type-default","type-youtube","type-soundcloud"),s.thumbnail.element.classList.add("loading",e.class),s.thumbnail.img.src=e.src,s.thumbnail.img.decode().then(()=>s.thumbnail.element.classList.remove("loading")))}function J(e,t){e!==-1&&s.timer.positionSeconds!==e?(s.timer.positionSeconds=e,L.settings.autoplay===!1&&(e=t-e),Ee(s.timer.positionElement,e)):e===-1&&s.timer.positionSeconds===-1&&(s.timer.positionElement.textContent="00:00"),t!==-1&&s.timer.durationSeconds!==t?(s.timer.durationSeconds=t,Ee(s.timer.durationElement,t)):t===-1&&s.timer.durationSeconds===-1&&(s.timer.durationElement.textContent="00:00")}function Ee(e,t){let a=new Date(t*1e3).toISOString();e.textContent=t>60*60?a.substr(11,8):a.substr(14,5)}function at(){s.timer.positionElement.textContent="00:00",s.timer.durationElement.textContent="00:00",s.timer.positionSeconds=0,s.timer.durationSeconds=0}function f(){return s.playPause.STATE.ID===i.PLAYING.ID}function re(){let e=L.players.getStatus();at(),Be(e),f()===!1&&e.currentTrack<=1&&T(s.prevTrack,i.DISABLED),e.currentTrack<e.numTracks&&T(s.nextTrack,i.ENABLED)}function le(){let e=L.players.getStatus();T(s.playPause,i.PLAYING),s.playPause.iconElement.textContent="pause_circle_filled",T(s.prevTrack,i.ENABLED),Be(e)}function w(){T(s.playPause,i.PAUSED),s.playPause.iconElement.textContent="play_circle_filled"}function Te(e){e?s.playPause.element.classList.toggle("time-remaining-warning"):s.playPause.element.classList.remove("time-remaining-warning")}function K(){let e=L.players.getStatus();at(),Be(e),T(s.prevTrack,i.ENABLED),e.currentTrack>=e.numTracks&&T(s.nextTrack,i.DISABLED)}function tt(){s.mute.iconElement.textContent=L.settings.masterMute?"volume_off":"volume_up"}function Ft(){f()===!1&&s.timer.positionSeconds!==-1&&s.timer.durationSeconds!==-1&&(Ee(s.timer.positionElement,L.settings.autoplay?s.timer.positionSeconds:s.timer.durationSeconds-s.timer.positionSeconds),Ee(s.timer.durationElement,s.timer.durationSeconds))}var oe=S("playback-events"),x={settings:{},snackbarId:0,nowPlayingIcons:null},Me={nowPlayingIconsSelector:"h2.entry-title"},o={LOADING:"loading",READY:"ready",MEDIA_PLAYING:"mediaPlaying",MEDIA_PAUSED:"mediaPaused",MEDIA_ENDED:"mediaEnded",MEDIA_TIME_REMAINING:"mediaTimeRemaining",MEDIA_SHOW:"mediaShow",MEDIA_UNAVAILABLE:"mediaUnavailable",CONTINUE_AUTOPLAY:"continueAutoplay",RESUME_AUTOPLAY:"resumeAutoplay",AUTOPLAY_BLOCKED:"autoplayBlocked",PLAYBACK_BLOCKED:"playbackBlocked"},_e={[o.LOADING]:[jt],[o.READY]:[qt],[o.MEDIA_PLAYING]:[Ht],[o.MEDIA_PAUSED]:[Gt],[o.MEDIA_ENDED]:[st],[o.MEDIA_TIME_REMAINING]:[Wt],[o.MEDIA_SHOW]:[Jt],[o.CONTINUE_AUTOPLAY]:[Xt],[o.RESUME_AUTOPLAY]:[zt],[o.AUTOPLAY_BLOCKED]:[Zt],[o.PLAYBACK_BLOCKED]:[Qt],[o.MEDIA_UNAVAILABLE]:[ea]};function nt(e){oe.log("init()"),x.settings=e,x.nowPlayingIcons=document.querySelectorAll(Me.nowPlayingIconsSelector)}function V(e,t){e in _e&&_e[e].push(t)}function A(e,t=null,a=null){_e[e].forEach(l=>{l({event:e,data:t,callback:a})})}function jt(e){ne(e.data.loadingPercent)}function qt(e){Y(e),ne(0)}function Ht(e){if(Y(e),ue(x.snackbarId),e.data.numTracks>1){let t=document.querySelector(`#${e.data.trackId} ${Me.nowPlayingIconsSelector}`);rt(t),b(t,"playing-paused","now-playing-icon"),x.settings.user.animateNowPlayingIcon&&t.classList.add("playing-animate")}}function Gt(e){Y(e),e.data.numTracks>1&&document.querySelector(`#${e.data.trackId} ${Me.nowPlayingIconsSelector}`).classList.add("playing-paused")}function st(e){Y(e),ne(0),e!==null&&e.data.numTracks>1&&rt()}function Wt(){}function Jt(e){Y(e),st(null),e.data.scrollToMedia&&ke(e.data.trackId)}function Xt(e){Y(e),j(navigationVars.next,!0)}function zt(e){let t=JSON.parse(sessionStorage.getItem(O.UF_AUTOPLAY));if(sessionStorage.removeItem(O.UF_AUTOPLAY),Y(e),oe.log(`RESUME_AUTOPLAY: ${t!==null?JSON.stringify(t):"NO"}`),t!==null){let a=document.getElementById(t.trackId)?.querySelector("iframe").id;e.callback.resumeAutoplay(t,a)}}function Zt(e){Y(e),x.snackbarId=E("Autoplay blocked, Play to continue",0,"play",()=>e.callback.togglePlayPause())}function Qt(e){Y(e),E("Unable to play track, skipping to next",5,"Stop",()=>{},()=>xe(e))}function ea(e){Y(e),ta(e.data.trackId)?E("YouTube Premium track, skipping",5,"help",()=>{window.location.href="/channel/premium/"},()=>xe(e)):(E("Unable to play track, skipping to next",5,"Stop",()=>{},()=>xe(e)),He("EVENT_MEDIA_UNAVAILABLE",e.data))}function Y(e=null){oe.isDebug()&&e!==null&&oe.log(e)}function rt(e){x.nowPlayingIcons.forEach(t=>{t!==e&&t.classList.remove("now-playing-icon","playing-animate","playing-paused")})}function xe(e){e.data.currentTrack<e.data.numTracks?e.callback.skipToTrack(e.data.currentTrack+1,!0):navigationVars.next!==null&&j(navigationVars.next,!0)}function ta(e){let t=document.getElementById(e);return t!==null?t.classList.contains("category-premium"):!1}function j(e,t=!1){oe.log(`navigateTo(): ${e} - continueAutoplay: ${t}`),e!=null&&e.length>0&&(sessionStorage.setItem(O.UF_AUTOPLAY,JSON.stringify({autoplay:t,trackId:null,position:0})),window.location.href=e)}function ke(e){if(x.settings.user.autoScroll){let t=Math.round(window.scrollY+document.getElementById(e).getBoundingClientRect().top),a=Math.round(window.pageYOffset),l=lt(t>a);a+l+ot()>t&&(l=lt(!1)),window.scroll({top:t-(l+ot()),left:0,behavior:x.settings.user.smoothScrolling?"smooth":"auto"})}}function lt(e){return e?F("--site-header-height-down"):F("--site-header-height-up")}function ot(){return F("--site-content-margin-top")-1}var k=S("embedded-players"),R=new se(10),r={settings:{},players:{},playbackState:null,playbackTimer:null,eventHandler:null,loadEventsTotal:0,loadEventsCount:1},Ve={youTubeIframeIdRegEx:/youtube-uid/i,soundCloudIframeIdRegEx:/soundcloud-uid/i,maxPlaybackStartDelay:3};function it(e){({settings:r.settings,players:r.players,playbackState:r.playbackState,playbackTimer:r.playbackTimer}=e),aa(),sa()}function ct(e){let t=document.body.getAttribute("data-gallery-track-count");return t===null?t=0:t=parseInt(t),k.log(`getTrackCount(): ${t}`),r.loadEventsTotal=t+3,r.eventHandler=e,t}function Se(){return{loadingPercent:100*(r.loadEventsCount++/r.loadEventsTotal)}}function ut(){r.loadEventsCount>=r.loadEventsTotal?r.eventHandler(o.READY):r.eventHandler(o.LOADING,Se())}function ga(){document.querySelectorAll("single-track").forEach(t=>{let a=t.querySelector("iframe"),l={};if(Ve.youTubeIframeIdRegEx.test(a.id)){let u=new YT.Player(a.id,{events:{onReady:na,onStateChange:ra,onError:la}});l=new Ze(t.id,a.id,u,a.src)}else if(Ve.soundCloudIframeIdRegEx.test(a.id)){let u=SC.Widget(a.id);l=new Ue(t.id,a.id,u,a.src),u.bind(SC.Widget.Events.READY,()=>{l.setThumbnail(),oa()}),u.bind(SC.Widget.Events.PLAY,ia),u.bind(SC.Widget.Events.PAUSE,ca),u.bind(SC.Widget.Events.FINISH,ua),u.bind(SC.Widget.Events.ERROR,da)}de(t.getAttribute("data-artist-track-title"),l),r.players.add(l)})}function be(e,t){k.log("onPlayerError()"),k.log(e);let a=e instanceof Ue?y.SOUNDCLOUD:y.YOUTUBE;r.players.isCurrent(e.getUid())===!1&&r.players.stop(),R.add(a,p.PLAYER_ERROR,e.getUid()),r.eventHandler(o.MEDIA_UNAVAILABLE,ya(e,t))}function ya(e,t){let a=e.getArtist()||"N/A",l=e.getTitle()||"N/A";return{currentTrack:r.players.trackFromUid(e.getUid()),numTracks:r.players.getNumTracks(),trackId:e.getTrackId(),mediaTitle:`${a} - ${l}`,mediaUrl:t}}function aa(){k.log("initYouTubeAPI()"),r.eventHandler(o.LOADING,Se()),window.onYouTubeIframeAPIReady=function(){k.log("onYouTubeIframeAPIReady()"),r.eventHandler(o.LOADING,Se()),ga()};let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function na(){k.log("onYouTubePlayerReady()"),ut()}function ra(e){switch(R.add(y.YOUTUBE,e.data,e.target.h.id),e.data){case YT.PlayerState.UNSTARTED:pa(e);break;case YT.PlayerState.BUFFERING:ma(e);break;case YT.PlayerState.PLAYING:fa(e);break;case YT.PlayerState.PAUSED:Ea(e);break;case YT.PlayerState.CUED:Ta(e);break;case YT.PlayerState.ENDED:ka(e);break}}function pa(e){k.log(`onYouTubePlayerStateChange: UNSTARTED (uID: ${e.target.h.id})`),R.ytAutoplayBlocked(e.target.h.id,3e3)&&r.eventHandler(o.AUTOPLAY_BLOCKED)}function ma(e){if(k.log(`onYouTubePlayerStateChange: BUFFERING (uID: ${e.target.h.id})`),r.players.crossfade.isFading()===!1){let t=r.players.playerFromUid(e.target.h.id);t.mute(r.settings.masterMute),t.setVolume(r.settings.masterVolume)}}function fa(e){k.log(`onYouTubePlayerStateChange: PLAYING   (uID: ${e.target.h.id})`),r.playbackState.syncAll(e.target.h.id,r.playbackState.STATE.PLAY),r.players.current.setDuration(Math.round(e.target.getDuration())),r.playbackTimer.start()}function Ea(e){k.log(`onYouTubePlayerStateChange: PAUSED    (uID: ${e.target.h.id})`),r.players.isCurrent(e.target.h.id)?(r.playbackState.syncAll(e.target.h.id,r.playbackState.STATE.PAUSE),r.playbackTimer.stop(!1)):r.players.crossfade.stop()}function Ta(e){k.log(`onYouTubePlayerStateChange: CUED      (uID: ${e.target.h.id})`)}function ka(e){k.log(`onYouTubePlayerStateChange: ENDED     (uID: ${e.target.h.id})`),r.players.isCurrent(e.target.h.id)?(r.playbackTimer.stop(!0),r.eventHandler(o.MEDIA_ENDED)):r.players.crossfade.stop()}function la(e){k.log("onYouTubePlayerError: "+e.data);let t=r.players.playerFromUid(e.target.h.id);t.setPlayable(!1),be(t,e.target.getVideoUrl())}function sa(){k.log("initSoundCloudAPI()"),r.eventHandler(o.LOADING,Se())}function oa(){k.log("onSoundCloudPlayerEventReady()"),ut()}function ia(e){k.log(`onSoundCloudPlayerEvent: PLAY   (uID: ${e.soundId})`),R.add(y.SOUNDCLOUD,p.STATE_PLAYING,e.soundId),r.players.crossfade.isFading()&&r.players.isCurrent(e.soundId)?R.scPlayDoubleTrigger(e.soundId,Ve.maxPlaybackStartDelay*1e3)&&r.playbackState.syncAll(e.soundId,r.playbackState.STATE.PLAY):(r.playbackState.syncAll(e.soundId,r.playbackState.STATE.PLAY),r.players.current.mute(r.settings.masterMute),r.players.current.setVolume(r.settings.masterVolume)),r.players.current.getEmbeddedPlayer().getDuration(t=>{r.players.current.setDuration(Math.round(t/1e3)),r.playbackTimer.start()})}function ca(e){k.log(`onSoundCloudPlayerEvent: PAUSE  (uID: ${e.soundId})`),R.add(y.SOUNDCLOUD,p.STATE_PAUSED,e.soundId),R.scAutoplayBlocked(e.soundId,3e3)?(r.playbackTimer.stop(!1),r.eventHandler(o.AUTOPLAY_BLOCKED)):R.scWidgetPlayBlocked(e.soundId,3e4)?(r.playbackTimer.stop(!1),r.eventHandler(o.PLAYBACK_BLOCKED,{currentTrack:r.players.trackFromUid(e.soundId),numTracks:r.players.getNumTracks()})):r.players.isCurrent(e.soundId)?r.players.current.getPosition(t=>{t>0&&(r.playbackState.syncAll(e.soundId,r.playbackState.STATE.PAUSE),r.playbackTimer.stop(!1))}):r.players.crossfade.stop()}function ua(e){k.log(`onSoundCloudPlayerEvent: FINISH (uID: ${e.soundId})`),r.players.isCurrent(e.soundId)?(r.playbackTimer.stop(!0),r.eventHandler(o.MEDIA_ENDED)):r.players.crossfade.stop()}function da(){this.getCurrentSound(e=>{let t=r.players.playerFromUid(e.id);k.log(`onSoundCloudPlayerEvent: ERROR for track: ${r.players.trackFromUid(e.id)}. ${t.getArtist()} - ${t.getTitle()} - [${t.getUid()} / ${t.getIframeId()}]`),t.setPlayable(!1)})}var $e=S("crossfade-controls"),X={settings:{},players:{}},q={crossfadePresetSelector:".crossfade-preset-control",crossfadePresetData:"data-crossfade-preset",crossfadeToSelector:".crossfade-fadeto-control"},I={crossfadePreset:{elements:null},crossfadeTo:{elements:null,click:null}};function gt(e,t,a){$e.log("init()"),X.settings=e,X.players=t,I.crossfadePreset.elements=document.querySelectorAll(q.crossfadePresetSelector),I.crossfadeTo.elements=document.querySelectorAll(q.crossfadeToSelector),I.crossfadePreset.elements.length>1&&I.crossfadeTo.elements.length>1&&(I.crossfadePreset.elements.forEach(l=>dt(l,X.settings.trackCrossfadeDefPreset)),I.crossfadeTo.click=a)}function pt(){$e.log("ready()"),I.crossfadePreset.elements.length>1&&I.crossfadeTo.elements.length>1&&(I.crossfadePreset.elements.forEach(e=>{e.addEventListener("click",Sa),b(e,i.DISABLED.CLASS,i.ENABLED.CLASS)}),I.crossfadeTo.elements.forEach(e=>e.addEventListener("click",ba)),V(o.MEDIA_PLAYING,yt),V(o.MEDIA_PAUSED,yt))}function dt(e,t){e.setAttribute(q.crossfadePresetData,t),e.textContent=`${t+1}`,e.title=`Preset: ${ie.crossfade[t].name}`}function Sa(e){let t=parseInt(e.target.getAttribute(q.crossfadePresetData));t+1<ie.crossfade.length?t++:t=0,dt(e.target,t)}function ba(e){if(f()&&X.players.crossfade.isFading()===!1){let t=e.target.closest("single-track");if(t!==null){let a=t.querySelector("iframe"),l=t.querySelector(q.crossfadePresetSelector).getAttribute(q.crossfadePresetData);b(e.target.closest(`div${q.crossfadeToSelector}`),i.ENABLED.CLASS,i.DISABLED.CLASS),I.crossfadeTo.click(X.players.uIdFromIframeId(a.id),ie.crossfade[l])}}}function yt(){let e=f(),t=e?X.players.getStatus().currentTrack:-1;$e.log(`updateCrossfadeToState() - playingState: ${e} - currentTrack: ${t}`),I.crossfadeTo.elements.forEach((a,l)=>{t===l+1?b(a,e?i.ENABLED.CLASS:i.DISABLED.CLASS,e?i.DISABLED.CLASS:i.ENABLED.CLASS):b(a,e?i.DISABLED.CLASS:i.ENABLED.CLASS,e?i.ENABLED.CLASS:i.DISABLED.CLASS)})}var N=S("gallery-player"),n={eventLog:null,settings:{},players:{}},Ae={updateTimerInterval:200,minCrossfadeToTime:5,maxBufferingDelay:3};function Et(e){n.eventLog=R,n.settings=e.user,nt(e),n.players=et(),n.players.init(n.settings,Pa),pe(n.settings,n.players,Aa),gt(n.settings,n.players,ha),it({settings:n.settings,players:n.players,playbackState:mt,playbackTimer:ft})}function Tt(){return ct(La)>0}function z(){f()?(w(),n.players.current.pause()):(le(),n.players.current.play(be))}function Fe(e){N.log(`prevClick() - prevTrack: ${n.players.getCurrentTrack()-1} - numTracks: ${n.players.getNumTracks()} - event: ${e!==null?e.type:"null"}`),n.players.getCurrentTrack()>0&&n.players.current.getPosition(t=>{t>5e3?(n.players.current.seekTo(0),ft.updateCallback(0)):(n.players.getCurrentTrack()>1&&n.players.stop(),n.players.prevTrack(f())&&re())})}function Pe(e){N.log(`nextClick() - nextTrack: ${n.players.getCurrentTrack()+1} - numTracks: ${n.players.getNumTracks()} - event: ${e!==null?e.type:"null"}`),n.players.getCurrentTrack()+1<=n.players.getNumTracks()?(n.players.stop(),e!==null||n.settings.autoplay?n.players.nextTrack(f())&&K():w()):e===null&&(w(),n.settings.autoplay?A(o.CONTINUE_AUTOPLAY):n.players.stop())}function Aa(e){n.players.current.seekTo(e)}function Ke(){n.settings.masterMute=n.settings.masterMute!==!0,n.players.mute()}function Ia(e,t=!0){N.log(`cueTrack(): ${e}`),n.players.setPlayerIndex(n.players.indexMap.get(e)),A(o.MEDIA_SHOW,{scrollToMedia:t,trackId:n.players.current.getTrackId()}),K()}function Pa(e,t=!0){A(o.MEDIA_SHOW,{scrollToMedia:t,trackId:n.players.current.getTrackId()}),e&&n.players.current.play(be)}function je(e,t=!0){N.log(`skipToTrack(): ${e} - ${t}`),t===!0&&f()===!1&&(n.eventLog.clear(),n.eventLog.add(y.ULTRAFUNK,p.RESUME_AUTOPLAY,null),n.players.jumpToTrack(e,t)&&K())}function Da(e,t=null){N.log(`resumeAutoplay(): ${e.autoplay}${t!==null?" - "+t:""}`),t!==null?e.autoplay?je(n.players.trackFromUid(t),!0):Ia(t):e.autoplay&&(n.eventLog.add(y.ULTRAFUNK,p.RESUME_AUTOPLAY,null),z())}function D(){return{isPlaying:f(),currentTrack:n.players.getCurrentTrack(),position:0,numTracks:n.players.getNumTracks(),trackId:n.players.current.getTrackId(),iframeId:n.players.current.getIframeId()}}function La(e,t=null){switch(N.isDebug()&&e!==o.LOADING&&(N.log(`embeddedEventHandler(): ${e}`),t!==null&&N.log(t)),e){case o.LOADING:A(o.LOADING,t);break;case o.READY:me(Fe,z,Pe,Ke),pt(),A(o.READY),A(o.RESUME_AUTOPLAY,null,{resumeAutoplay:Da});break;case o.MEDIA_ENDED:Pe(null);break;case o.AUTOPLAY_BLOCKED:w(),A(o.AUTOPLAY_BLOCKED,null,{togglePlayPause:z});break;case o.PLAYBACK_BLOCKED:w(),A(o.PLAYBACK_BLOCKED,t,{skipToTrack:je});break;case o.MEDIA_UNAVAILABLE:w(),A(o.MEDIA_UNAVAILABLE,t,{skipToTrack:je});break}}var mt=(()=>{let e={PLAY:1,PAUSE:2},t=function l(u,g){if(N.log(`playbackState.syncAll() - previousTrack: ${n.players.getPlayerIndex()+1} - nextTrack: ${n.players.indexMap.get(u)+1} - syncState: ${N.getObjectKeyForValue(e,g)}`),n.players.isCurrent(u))g===e.PLAY?(n.players.crossfade.start(),le(),A(o.MEDIA_PLAYING,D())):g===e.PAUSE&&(n.players.crossfade.stop(),w(),A(o.MEDIA_PAUSED,D()));else{let U=n.players.getPlayerIndex(),G=n.players.indexMap.get(u);n.players.stop(),n.players.setPlayerIndex(G),a(U,G),l(u,g)}};function a(l,u){u>l?K():re()}return{STATE:e,syncAll:t,syncControls:a}})(),ft=(()=>{let e=-1,t=0,a=!0;return document.addEventListener("visibilitychange",()=>{a=document.visibilityState==="visible"}),{start:l,stop:u,updateCallback:g};function l(){u(!1),e=setInterval(()=>{a&&n.players.current.getPosition(g)},Ae.updateTimerInterval)}function u(h=!1){e!==-1&&(clearInterval(e),e=-1),h&&(g(0),A(o.MEDIA_ENDED,D())),t=0,Te(!1)}function g(h,C=0){let $=Math.round(h/1e3);fe(h,C),J($,C),$>0&&C>0&&(U($,C),G($,C))}function U(h,C){if(n.settings.autoplay===!1&&n.settings.timeRemainingWarning&&t!==h){let $=C-h;t=h,$<=n.settings.timeRemainingSeconds?(Te(!0),A(o.MEDIA_TIME_REMAINING,{timeRemainingSeconds:$})):Te(!1)}}function G(h,C){n.settings.masterMute===!1&&n.settings.autoplay&&n.settings.autoCrossfade&&C-h===n.settings.autoCrossfadeLength+Ae.maxBufferingDelay&&n.players.getCurrentTrack()+1<=n.players.getNumTracks()&&kt(Ne.AUTO,{name:"Auto Crossfade",length:n.settings.autoCrossfadeLength,curve:n.settings.autoCrossfadeCurve})}})();function ha(e,t){n.players.isCurrent(e)===!1&&n.players.current.getDuration()>0&&(N.log(`crossfadeToClick():
      fadeOut: ${n.players.current.getArtist()} - "${n.players.current.getTitle()}" (${n.players.current.getUid()})
      fadeIn.: ${n.players.playerFromUid(e).getArtist()} - "${n.players.playerFromUid(e).getTitle()}" (${e})`),n.settings.masterMute===!1&&n.settings.autoplay===!1&&n.players.current.getPosition(a=>{n.players.current.getDuration()-a/1e3>=Ae.minCrossfadeToTime+Ae.maxBufferingDelay&&kt(Ne.TRACK,t,e)}))}function kt(e,t,a=null){n.eventLog.add(y.ULTRAFUNK,p.CROSSFADE_START,null);let l=n.players.crossfade.init(e,t,a);l!==null&&mt.syncControls(l.fadeOutPlayer,l.fadeInPlayer)}var Z=S("screen-wakelock"),he={wakeLock:null};function St(){return"wakeLock"in navigator&&"request"in navigator.wakeLock}async function At(e){St()?document.visibilityState==="visible"&&await bt()!==!0&&Z.log("enable(): Screen Wake Lock request failed"):(Z.log("enable(): Screen Wake Lock is not supported"),E("Keep Screen On is not supported",5,"Turn Off",()=>e.user.keepMobileScreenOn=!1))}function Pt(){Z.log("stateVisible()"),St()&&he.wakeLock===null&&bt()}async function bt(){try{return he.wakeLock=await navigator.wakeLock.request("screen"),Z.log("request(): Screen Wake Lock is Enabled"),he.wakeLock.addEventListener("release",()=>{Z.log("request(): Screen Wake Lock was Released"),he.wakeLock=null}),!0}catch(e){Z.error(`request(): ${e.name} - ${e.message}`)}return!1}var M=S("list-player"),Q=new se(10),c={settings:{},player:null,autoplayData:null,autoplayToggle:null,firstStatePlaying:!0},P={container:null,observer:null},d={trackId:null,element:null,snackbarId:0};function ht(e,t){M.log("init"),c.settings=e,c.autoplayToggle=t,P.container=document.getElementById("tracklist-container"),P.observer=new IntersectionObserver(Ua,{root:P.container}),Na()!==null?Oa():E("No playable YouTube tracks!",0,"help",()=>{window.location.href="/help/#list-player"}),W("span.nav-bar-arrow-back","click",Le,navigationVars.prev),W("span.nav-bar-arrow-fwd","click",Le,navigationVars.next),P.container.addEventListener("click",a=>{let l=a.target.closest("div.thumbnail");if(l!==null)return ee(l.closest("div.track-entry").id,!0,!0);let u=a.target.closest("div.share-playon-button");if(u!==null)return Ca(u);let g=a.target.closest("div.menu-button");if(g!==null)return va(g)})}function wa(e){if(ae.allow()&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":e.preventDefault(),Ie(e);break}switch(e.key){case" ":e.preventDefault(),d.trackId!==null?ee(d.trackId):ee(P.container.querySelector(".track-entry.current").id);break;case"ArrowLeft":e.preventDefault(),e.shiftKey===!0?Le(null,navigationVars.prev):It();break;case"ArrowRight":e.preventDefault(),e.shiftKey===!0?Le(null,navigationVars.next):Dt();break;case"A":c.autoplayToggle.toggle(e);break;case"f":case"F":e.preventDefault(),_.toggle(document.getElementById("youtube-player"));break;case"m":case"M":e.preventDefault(),Lt(),E(c.settings.user.masterMute?"Volume is muted (<b>m</b> to unmute)":"Volume is unmuted (<b>m</b> to mute)",3);break}}}function Ca(e){let t=e.closest("div.track-entry").getAttribute("data-artist-track-title"),a=e.closest("div.track-entry").getAttribute("data-track-url");ze.show({string:t,filterString:!0,url:a})}function va(e){let t=[],a={},l=e.closest("div.track-entry").querySelector(".track-artists-links").querySelectorAll("a"),u=e.closest("div.track-entry").querySelector(".track-channels-links").querySelectorAll("a");de(e.closest("div.track-entry").getAttribute("data-artist-track-title"),a),t.push({id:null,class:"dialog-body-text",text:`<b>${a.artist}</b><br><span class="light-text">${a.title}</span>`}),t.push({id:null,class:"dialog-body-title",text:"Artists"}),l.forEach(g=>t.push({id:`modal-item-id-${t.length+1}`,text:g.innerText,link:g.href,icon:"link"})),t.push({id:null,class:"dialog-body-title",text:"Channels"}),u.forEach(g=>t.push({id:`modal-item-id-${t.length+1}`,text:g.innerText,link:g.href,icon:"link"})),Xe("Track Details",t,g=>{window.location.href=t[t.findIndex(U=>U.id===g)].link})}function Ie(){let e=0;window.pageYOffset<1&&(e=F("--site-header-height")-F("--site-header-height-down")),window.scroll({top:e,left:0,behavior:c.settings.user.smoothScrolling?"smooth":"auto"})}function Lt(){c.settings.user.masterMute?c.settings.user.masterMute=!1:c.settings.user.masterMute=!0,c.settings.user.masterMute?c.player.embedded.mute():c.player.embedded.unMute()}function Na(){if(d.trackId=De(),d.trackId!==null){if(c.autoplayData=JSON.parse(sessionStorage.getItem(O.UF_AUTOPLAY)),sessionStorage.removeItem(O.UF_AUTOPLAY),c.autoplayData!==null&&c.autoplayData.trackId!==null){let e=c.autoplayData.trackId.match(/^[a-zA-Z0-9-_]{11}$/);if(e!==null)d.trackId=e[0];else if(c.autoplayData.trackId.match(/^track-(?!0)\d{1,6}$/i)!==null){let t=P.container.querySelectorAll(`[data-post-id="${c.autoplayData.trackId.slice(6)}"]`);t.length===1?t[0].id.length!==0?d.trackId=t[0].id:E("Cannot play SoundCloud track",5,"help",()=>{window.location.href="/help/#list-player"}):E("Unable to cue track (not found)",5)}}d.element=document.getElementById(d.trackId),P.observer.observe(d.element)}return M.log(`cueInitialTrack() - current.trackId: ${d.trackId} - autoplayData: ${c.autoplayData!==null?JSON.stringify(c.autoplayData):"N/A"}`),d.trackId}function Ua(e){P.observer.unobserve(d.element),Math.ceil(e[0].intersectionRatio*100)/100!=1&&(P.container.scrollTop=d.element.offsetTop-P.container.offsetHeight+d.element.offsetHeight)}function Le(e,t){e?.preventDefault(),j(t,f())}function Ya(){let e=d.element!==null?d.element.previousElementSibling:null;for(;e!==null&&e.id.length===0;)e=e.previousElementSibling;return e!==null?e.id:null}function De(){let e=d.element!==null?d.element.nextElementSibling:P.container.querySelector(".track-entry");for(;e!==null&&e.id.length===0;)e=e.nextElementSibling;return e!==null?e.id:null}function ee(e,t=!0,a=!1){if(M.log(`setCurrentTrack() - nextTrackId: ${e.length!==0?e:"N/A"} - playNextTrack: ${t} - isPointerClick: ${a}`),e.length===0&&a){E("Cannot play SoundCloud track",5,"help",()=>{window.location.href="/help/#list-player"});return}e===d.trackId?vt():(f()&&c.player.embedded.stopVideo(),d.element.classList.remove("current","playing","paused"),d.trackId=e,d.element=document.getElementById(d.trackId),a===!1&&P.observer.observe(d.element),d.element.classList.add("current"),Ct(t))}function Ct(e){c.player.setArtistTitleThumbnail(d.element.getAttribute("data-artist-track-title"),d.trackId),e?(c.player.embedded.loadVideoById(d.trackId),H(!0)):(c.player.embedded.cueVideoById(d.trackId),H(!1))}function Nt(){let e={},t=P.container.querySelector(".track-entry.current").id;return P.container.querySelectorAll(".track-entry").forEach((a,l)=>{a.id===t&&(e={isPlaying:f(),currentTrack:l+1,position:Math.ceil(c.player.embedded.getCurrentTime()),trackId:`track-${a.getAttribute("data-post-id")}`})}),e}function vt(){f()?c.player.embedded.pauseVideo():c.player.embedded.playVideo()}function Ut(e=!1){let t=De();t===null?j(navigationVars.next,e):e?ee(t):H(!1)}function It(){let e=Ya(),t=c.player.embeddedPlayer.getCurrentTime();e!==null&&t<=5?(ee(e,f()),re()):t!==0&&(c.player.seekTo(0),qe.update(0,0))}function Dt(){let e=De();e!==null&&(ee(e,f()),K())}function H(e){e?b(d.element,"paused","playing"):b(d.element,"playing","paused")}function Ra(){f()===!1&&c.autoplayData!==null&&(Q.add(y.ULTRAFUNK,p.RESUME_AUTOPLAY,null),Q.add(y.YOUTUBE,-1,De())),f()===!1&&Ut(!0)}function Ba(){d.trackId=null,H(!1)}function Oa(){M.log("initYouTubeAPI()"),window.onYouTubeIframeAPIReady=function(){M.log("onYouTubeIframeAPIReady()");let a=new YT.Player("youtube-player",{events:{onReady:Ma,onStateChange:_a,onError:xa}});c.player=new Qe(a),pe(c.settings.user,c.player,l=>{c.player.seekTo(l)}),M.log(c.player)};let e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function Ma(){M.log("onYouTubePlayerReady()"),d.element.classList.add("current"),c.autoplayData?.autoplay===!0&&Q.add(y.ULTRAFUNK,p.RESUME_AUTOPLAY,null),me(It,vt,Dt,Lt),Ct(c.autoplayData?.autoplay===!0),v(".playback-details-control","click",Ie),v(".playback-thumbnail-control","click",Ie),v(".playback-timer-control","click",e=>c.autoplayToggle.toggle(e)),document.addEventListener("keydown",wa)}function _a(e){switch(M.log(`onYouTubePlayerStateChange(): ${e.data} - trackId: ${d.trackId}`),Q.add(y.YOUTUBE,e.data,d.trackId),e.data!==YT.PlayerState.PLAYING&&w(),e.data){case YT.PlayerState.UNSTARTED:Q.ytAutoplayBlocked(d.trackId,3e3)&&(H(!1),d.snackbarId=E("Autoplay blocked, Play to continue",0,"play",()=>c.player.embedded.playVideo()));break;case YT.PlayerState.ENDED:qe.stop(!0),Ut(c.settings.user.autoplay);break;case YT.PlayerState.PLAYING:Va(e),qe.start(),le(),H(!0);break;case YT.PlayerState.PAUSED:H(!1);break}}function Va(e){ue(d.snackbarId),c.player.setDuration(Math.round(e.target.getDuration())),c.firstStatePlaying&&(c.firstStatePlaying=!1,c.autoplayData=null,setTimeout(()=>{c.settings.user.autoplay&&f()&&window.pageYOffset<1&&Ie()},6e3))}function xa(e){M.log(`onYouTubePlayerError(): ${e.data} - trackId: ${d.trackId}`),d.element.querySelector(".track-duration").innerText="Error",d.element.querySelector(".track-duration").style.display="block",Q.add(y.YOUTUBE,p.PLAYER_ERROR,d.trackId),E("Unable to play track, skipping to next",5,"Stop",Ba,Ra)}var qe=(()=>{let e=-1,t=!0;return document.addEventListener("visibilitychange",()=>{t=document.visibilityState==="visible"}),{start:a,stop:l,update:u};function a(){l(),e=setInterval(()=>{t&&f()&&u(c.player.embedded.getCurrentTime()*1e3,c.player.getDuration())},250)}function l(g=!1){e!==-1&&(clearInterval(e),e=-1),g&&u(0,0)}function u(g,U){Number.isNaN(g)===!1&&(fe(g,U),J(Math.round(g/1e3),U))}})();var Ce=S("playback-interaction"),Ot=new Ye(10),m={settings:{},isPlaybackReady:!1,statePlaying:!1},$a={doubleClickDelay:500},B={playerToggle:null,autoplayToggle:null,crossfadeToggle:null};document.addEventListener("DOMContentLoaded",()=>{Ce.log("DOMContentLoaded"),Fa(),Tt()?(Ka(),ja(),wt()):document.getElementById("list-player-container")!==null&&(wt(),ht(m.settings,B.autoplayToggle))});function Fa(){Ce.log("readSettings()"),m.settings=We(O.UF_PLAYBACK_SETTINGS,Ge,!0),Ce.log(m.settings)}function Ka(){Ce.log("initInteraction()"),W("span.nav-bar-arrow-back","click",te,navigationVars.prev),W("span.nav-bar-arrow-fwd","click",te,navigationVars.next),v("nav.post-navigation .nav-previous a","click",te,navigationVars.prev),v("nav.post-navigation .nav-next a","click",te,navigationVars.next),document.addEventListener("keydown",qa),window.addEventListener("blur",Ha)}function ja(){Et(m.settings),V(o.READY,Ga),V(o.MEDIA_SHOW,Yt),V(o.MEDIA_ENDED,Yt),V(o.MEDIA_TIME_REMAINING,Wa)}function wt(){_.init(),ae.init(m.settings.user),B.playerToggle=new Rt("footer-player-toggle"),B.crossfadeToggle=new Mt("footer-crossfade-toggle"),B.autoplayToggle=new Bt("footer-autoplay-toggle"),v(".playback-shuffle-control","click",Je)}function qa(e){if(m.isPlaybackReady&&ae.allow()&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1){switch(e.code){case"Backquote":e.preventDefault(),ke(D().trackId);break}switch(e.key){case" ":e.preventDefault(),z();break;case"ArrowLeft":e.preventDefault(),e.shiftKey===!0?te(null,navigationVars.prev):Fe(e);break;case"ArrowRight":e.preventDefault(),e.shiftKey===!0?te(null,navigationVars.next):Pe(e);break;case"A":B.autoplayToggle.toggle(e);break;case"f":case"F":e.preventDefault(),_.toggle(document.getElementById(D().iframeId));break;case"m":case"M":e.preventDefault(),Ke(),E(m.settings.user.masterMute?"Volume is muted (<b>m</b> to unmute)":"Volume is unmuted (<b>m</b> to mute)",3);break;case"x":case"X":B.crossfadeToggle.classList.contains("disabled")===!1&&B.crossfadeToggle.toggle(e);break}}}function Ga(){v(".playback-details-control","click",_t),v(".playback-thumbnail-control","click",_t),v(".playback-timer-control","click",e=>B.autoplayToggle.toggle(e)),document.addEventListener("visibilitychange",Ja),m.settings.user.keepMobileScreenOn&&At(m.settings),m.isPlaybackReady=!0}function Yt(){m.settings.user.autoExitFullscreen&&_.exit()}function Wa(e){m.settings.user.autoExitFsOnWarning&&e.data.timeRemainingSeconds<=m.settings.user.timeRemainingSeconds&&_.exit()}function Ha(){setTimeout(()=>{document.activeElement instanceof HTMLIFrameElement&&setTimeout(()=>{document.activeElement.blur(),document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},250)},0)}function Ja(){document.visibilityState==="visible"?(m.settings.user.autoResumePlayback&&m.statePlaying&&D().isPlaying===!1&&z(),m.settings.user.keepMobileScreenOn&&Pt()):document.visibilityState==="hidden"&&(m.settings.user.autoResumePlayback&&D().isPlaying?m.statePlaying=!0:m.statePlaying=!1)}function _t(e){ke(D().trackId),Ot.add(y.MOUSE,p.MOUSE_CLICK,null),e.target.tagName.toLowerCase()==="img"?xt("showTrackImageHint","<b>Tip:</b> Double click or tap on the Track Thumbnail for full screen"):xt("showDetailsHint","<b>Tip:</b> Double click or tap on Artist &amp; Title for full screen"),Ot.doubleClicked(y.MOUSE,p.MOUSE_CLICK,$a.doubleClickDelay)&&_.enter(document.getElementById(D().iframeId))}function xt(e,t,a=0){m.settings.priv.tips[e]&&(E(t,a),m.settings.priv.tips[e]=!1)}function te(e,t){e?.preventDefault(),j(t,D().isPlaying)}var Rt=class extends ce{constructor(t){super(t)}toggle(){let t=document.body.classList.contains("list-player"),a=this.getDestData(t),l=window.location.href.replace(/\/page\/(?!0)\d{1,6}/,"");a.pageNum>1&&(l=`${l}page/${a.pageNum}/`),sessionStorage.setItem(O.UF_AUTOPLAY,JSON.stringify(a.trackData)),t?window.location.href=l.replace(/list\//,""):window.location.href=l.replace(/ultrafunk\.com\//,"ultrafunk.com/list/")}update(){this.textContent=document.body.classList.contains("list-player")?"List":"Gallery"}getDestData(t){let a=window.location.href.split("/"),l=a.findIndex(C=>C.toLowerCase()==="page"),u=l!==-1?parseInt(a[l+1]):1,g=t?Nt():D(),U=t?navigationVars.listItemsPerPage:navigationVars.galleryItemsPerPage,G=t?navigationVars.galleryItemsPerPage:navigationVars.listItemsPerPage,h=g.currentTrack+(u-1)*U;return{pageNum:Math.ceil(h/G),trackData:{autoplay:g?.isPlaying,trackId:g?.trackId,position:g?.position}}}},Bt=class extends ce{constructor(t){super(t)}toggle(){m.settings.user.autoplay=m.settings.user.autoplay!==!0,E(m.settings.user.autoplay?"Autoplay enabled (<b>Shift</b> + <b>A</b> to disable)":"Autoplay disabled (<b>Shift</b> + <b>A</b> to enable)",5),this.update()}update(){this.textContent=m.settings.user.autoplay?"ON":"OFF",m.settings.user.autoplay?b(document.body,"autoplay-off","autoplay-on"):b(document.body,"autoplay-on","autoplay-off"),m.settings.user.autoplay?B.crossfadeToggle.classList.remove("disabled"):B.crossfadeToggle.classList.add("disabled")}},Mt=class extends ce{constructor(t){super(t)}toggle(){m.settings.user.autoCrossfade=m.settings.user.autoCrossfade!==!0,E(m.settings.user.autoCrossfade?"Auto Crossfade enabled (<b>x</b> to disable)":"Auto Crossfade disabled (<b>x</b> to enable)",5),this.update()}update(){this.textContent=m.settings.user.autoCrossfade?"ON":"OFF"}};
//# sourceMappingURL=interaction.js.map
