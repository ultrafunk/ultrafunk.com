import{c as D,g,h as me,j as _,k as de,l as fe,n as A,p as q,q as b,r as v,t as ge,u as he,v as ue,w as z,x as Q,z as X}from"./chunk.T4NVBIE7.js";function I(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function R(e,t="",n=60*60*24*365,r="/"){document.cookie=`${e}=${t}; Max-Age=${n}; Path=${r}; Secure; SameSite=Strict`}var p=b("term-rest"),u={};function U(e,t,n,r){t in u?r(u[t].posts):(p.log(`fetchPosts() - termType: ${e} - termId: ${t} - maxItems: ${n}`),fetch(`/wp-json/wp/v2/posts?${e}=${t}&per_page=${n}&_fields=title,link,content,tags,categories`).then(s=>s.ok?s.json():(p.error(s),null)).then(s=>{u[t]={posts:s},r(s)}).catch(s=>{p.warn(s),r(null)}))}function H(e,t,n,r){if("categories"in u[t]&&"tags"in u[t])r("categories",u[t].categories),r("tags",u[t].tags);else{let s=[],i=[];e.forEach(a=>{s.push.apply(s,a.categories),i.push.apply(i,a.tags)}),i=i.filter(a=>a!==t),M("categories",t,[...new Set(s)],n,r),M("tags",t,[...new Set(i)],n,r)}}function M(e,t,n,r,s){n.length>0?(p.log(`fetchMetadata() - termType: ${e} - termIds: ${n.length>0?n:"Empty"} - maxItems: ${r}`),fetch(`/wp-json/wp/v2/${e}?include=${n.join(",")}&per_page=${r}&_fields=link,name`).then(i=>i.ok?i.json():(p.error(i),null)).then(i=>{u[t][e]=i,s(e,i)}).catch(i=>{p.warn(i),s(null)})):(u[t][e]=null,s(e,null))}function P(){u=JSON.parse(sessionStorage.getItem(g.UF_TERMLIST_CACHE)),u===null&&(u={})}function x(){sessionStorage.setItem(g.UF_TERMLIST_CACHE,JSON.stringify(u))}function F(){sessionStorage.removeItem(g.UF_TERMLIST_CACHE)}function O(){return Object.keys(u).length>0}var Z=b("termlist"),ee=/\s{1,}[–·-]\s{1,}|\s{1,}(&#8211;)\s{1,}/,te=/(?<=src=").*?(?=[?"])/i,T=null;function j(){Z.log("init()"),T=document.getElementById("termlist-container"),T.addEventListener("click",e=>{let t=e.target.closest("div.play-button");if(t!==null)return C(e,t.querySelector("a").href);let n=e.target.closest("div.shuffle-button");if(n!==null)return C(e,n.querySelector("a").href);let r=e.target.closest("div.share-find-button");if(r!==null)return re(r);if(e.target.closest("div.termlist-header")!==null)return ie(e);let i=e.target.closest("div.thumbnail");if(i!==null)return se(e,i);if(e.target.closest("a")!==null)return B()}),ne()}function B(){if(O()){let e={pageUrl:window.location.href,scrollPos:Math.round(window.pageYOffset),openTermIds:[]};document.querySelectorAll(".termlist-entry").forEach(t=>{t.classList.contains("open")&&e.openTermIds.push(t.id)}),sessionStorage.setItem(g.UF_TERMLIST_STATE,JSON.stringify(e)),x()}}function ne(){if(P(),performance.navigation.type!==performance.navigation.TYPE_RELOAD){let e=JSON.parse(sessionStorage.getItem(g.UF_TERMLIST_STATE));e!==null&&e.pageUrl===window.location.href?(history.scrollRestoration="manual",e.openTermIds.forEach(t=>document.getElementById(t).querySelector("div.termlist-header").click()),window.scroll({top:e.scrollPos,left:0,behavior:"auto"})):history.scrollRestoration="auto"}sessionStorage.removeItem(g.UF_TERMLIST_STATE),F()}function C(e,t,n="true"){e.preventDefault(),B(),e.shiftKey===!1&&sessionStorage.setItem(g.UF_AUTOPLAY,n),window.location.href=t}function re(e){let t=e.getAttribute("data-term-path"),n=e.getAttribute("data-term-name"),r=e.getAttribute("data-term-url");z.show({title:`Share / Find ${t}`,string:n,url:r,verb:"Find"})}function se(e,t){let n=T.getAttribute("data-term-type"),r=t.getAttribute("data-term-slug"),s=t.getAttribute("data-term-uid");return n==="categories"||s===null?C(e,t.getAttribute("data-track-url")):C(e,`/player/artist/${r}/`,s)}function ie(e){let t=e.target.closest("div.termlist-entry"),n=t.querySelector("div.expand-toggle span"),r=t.querySelector("div.termlist-body"),s=r.style.display.length!==0;v(t,s?"open":"closed",s?"closed":"open"),n.innerText=s?"expand_more":"expand_less",r.style.display=s?"":"flex",s||oe(t,r)}function oe(e,t){let n=T.getAttribute("data-term-type"),r=parseInt(e.getAttribute("data-term-id")),s=e.getAttribute("data-term-slug"),i=n==="categories";U(n,r,i?10:50,a=>{let l=i?"Latest Tracks":"All Tracks",d=t.querySelector(".body-left");a!==null?ae(l,s,a,d):d.innerHTML="<b>Error!</b><br>Unable to fetch track data...",!i&&a!==null&&H(a,r,50,(E,S)=>{l=E==="tags"?"Related Artists":"In Channels",d=E==="tags"?t.querySelector(".artists"):t.querySelector(".channels"),S!==null?le(l,S,d):d.innerHTML=`<b>${l}</b><br>None found`})})}function ce(e){return e.includes('id="soundcloud-uid')?{src:"/wp-content/themes/ultrafunk/inc/img/soundcloud_icon.png",class:"type-soundcloud"}:X(e.match(te))}function ae(e,t,n,r){let s={},i=`<b>${e}</b>`;n.forEach(a=>{Q(a.title.rendered,s,ee);let l=ce(a.content.rendered),d=l?.uid!==void 0?`data-term-uid="${l.uid}"`:"";i+=`
    <div class="track">
      <div class="thumbnail ${l.class}" data-track-url="${a.link}" data-term-slug="${t}" ${d} title="Play Track">
        <img src="${l.src}">
        <div class="thumbnail-overlay"><span class="material-icons">play_arrow</span></div>
      </div>
      <div class="artist-title text-nowrap-ellipsis">
        <a href="${a.link}" title="Go to track"><span><b>${s.artist}</b></span><br><span>${s.title}</span></a>
      </div>
    </div>`}),r.innerHTML=i}function le(e,t,n){let r=`<b>${e}</b><br>`;t.forEach(s=>r+=`<a href="${s.link}">${s.name}</a>, `),n.innerHTML=r.slice(0,r.length-2)}var L=b("index"),h={},K={smoothScrolling:!1,settingsUpdatedEvent:"settingsUpdated",fullscreenElementEvent:"fullscreenElement"},o={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{L.log("DOMContentLoaded"),Y(),pe(),o.introBanner!==null&&Ee(),document.getElementById("termlist-container")!==null&&j(),o.siteContentSearch!==null&&(o.siteContentSearch.focus(),o.siteContentSearch.setSelectionRange(9999,9999)),be(),document.addEventListener(K.settingsUpdatedEvent,()=>{Y(),fe(h),R(g.UF_TRACKS_PER_PAGE,h.user.tracksPerPage,60*60*24*365*5)}),document.addEventListener(K.fullscreenElementEvent,e=>o.fullscreenTarget=e.fullscreenTarget),document.addEventListener("keydown",ye)});function Y(){L.log("readSettings()"),h=ue(g.UF_SITE_SETTINGS,me,!0),L.log(h)}function pe(){L.log("initIndex()"),o.siteHeader=document.getElementById("site-header"),o.introBanner=document.getElementById("intro-banner"),o.siteContent=document.getElementById("site-content"),o.siteContentSearch=document.querySelector("#site-content form input.search-field"),de(h),k.init(),m.init(),y.addEventListener(),Se.addEventListener()}function ye(e){if(e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"Escape":m.isVisible()&&(e.preventDefault(),m.toggle());return}if(h.user.keyboardShortcuts&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"c":case"C":w()&&(e.preventDefault(),m.toggle());break;case"L":w()&&N()&&(he.toggle(e),y.trigger());break;case"s":case"S":w()&&ve()&&(e.preventDefault(),k.toggle());break;case"T":w()&&N()&&ge.toggle(e);break;case"ArrowLeft":e.shiftKey&&$()&&G(navigationUrls.prev);break;case"ArrowRight":e.shiftKey&&$()&&G(navigationUrls.next);break}}function w(){return k.isVisible()===!1&&o.siteContentSearch!==document.activeElement}function N(){return document.body.classList.contains("page-settings")===!1}function ve(){return o.fullscreenTarget===null}function $(){return document.body.classList.contains("no-playback")||document.body.classList.contains("player-playlist")}function G(e){e!=null&&e.length>0&&(window.location.href=e)}function Ee(){I("localStorage")&&typeof bannerProperty!="undefined"&&bannerProperty!==null&&h.priv.banners[bannerProperty]&&(o.introBanner.style.display="block",y.trigger(),_("#intro-banner .intro-banner-close-button","click",()=>{o.introBanner.style.display="",o.siteContent.style.marginTop="",h.priv.banners[bannerProperty]=!1}))}function be(){if(document.querySelector(".nav-bar-title .go-back-to")!==null){let e="";if(document.referrer.length===0)e="Previous Page";else{let t=new URL(decodeURIComponent(document.referrer));if(t.search.length!==0)e="Search Results";else if(t.pathname.length>1){let n=t.pathname.slice(-1)==="/"?1:0,r=t.pathname.slice(1,t.pathname.length-n).replace(/-/gi," ").split("/");r.forEach((s,i)=>e+=i+1<r.length?s+" / ":s)}}document.querySelectorAll("#site-navigation .nav-bar-title").forEach(t=>{t.querySelector(".go-back-title").textContent=e.length>0?e:"Ultrafunk (home)",t.querySelector(".go-back-to").style.opacity=1})}}var m=(()=>{let e=new ResizeObserver(i),t={navMenu:null,modalOverlay:null},n=!1;return{isVisible(){return n},scrolledTop(){t.navMenu.style.display=""},init:r,toggle:s};function r(){t.navMenu=document.querySelector("#site-navigation .nav-menu-outer"),t.modalOverlay=document.getElementById("nav-menu-modal-overlay"),_(".nav-menu-toggle","click",s),t.modalOverlay.addEventListener("click",s),t.modalOverlay.addEventListener("transitionend",a),e.observe(t.navMenu.querySelector(".menu-primary-menu-container"))}function s(){o.siteHeader.classList.contains("sticky-nav-up")?n?t.navMenu.style.display="none":t.navMenu.style.display="flex":o.siteHeader.classList.contains("sticky-nav-down")===!1&&o.siteHeader.classList.toggle("hide-nav-menu")}function i(l){n=l[0].contentRect.height!==0,n?(t.modalOverlay.className="",t.modalOverlay.classList.add("show"),setTimeout(()=>t.modalOverlay.classList.add("fadein"),50)):t.modalOverlay.classList.add("fadeout")}function a(){n===!1&&(t.modalOverlay.className="",t.navMenu.style.display="")}})(),k=(()=>{let e=new Event("allowKeyboardShortcuts"),t=new Event("denyKeyboardShortcuts"),n={searchContainer:null,searchField:null,brandingContainer:null},r=!1;return{isVisible(){return r},init:s,toggle:i,hide:a};function s(){n.searchContainer=document.getElementById("search-container"),n.searchField=n.searchContainer.querySelector(".search-field"),n.brandingContainer=o.siteHeader.querySelector("div.site-branding-container"),_(".nav-search-toggle","click",i),_(".nav-search-toggle","mousedown",c=>c.preventDefault()),n.searchField.addEventListener("blur",a),n.searchField.addEventListener("keydown",c=>{c.key==="Escape"&&(c.stopPropagation(),a())})}function i(){l()?d():a()}function a(){r&&E(!1,e,"","search")}function l(){return n.searchContainer.style.display.length===0?!(o.siteHeader.offsetHeight===0||q(D.SITE_MAX_WIDTH_MOBILE)&&o.siteHeader.querySelector(".nav-bar-container-mobile-top").offsetHeight===0&&o.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetHeight===0):!1}function d(){S(),E(!0,t,"flex","clear"),n.searchField.focus(),n.searchField.setSelectionRange(9999,9999)}function E(c,f,J,V){r=c,document.dispatchEvent(f),n.searchContainer.style.display=J,document.querySelectorAll("div.nav-search-toggle i").forEach(W=>W.textContent=V),r?document.getElementById("playback-controls").classList.add("hide"):document.getElementById("playback-controls").classList.remove("hide")}function S(){let c={};if(q(D.SITE_MAX_WIDTH_MOBILE))n.brandingContainer.offsetHeight!==0?c.top=n.brandingContainer.offsetTop:c.top=o.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetTop,c=new DOMRect(63,c.top+3,document.body.clientWidth-63,30);else if(n.brandingContainer.offsetHeight!==0){let f=n.brandingContainer.getBoundingClientRect();c=new DOMRect(f.left,f.top+10,f.right,f.height-20)}else{let f=o.siteHeader.querySelector(".nav-bar-container").getBoundingClientRect();c=new DOMRect(f.left+105,f.top+2,f.right-105,f.height-4)}n.searchContainer.style.left=`${c.left}px`,n.searchContainer.style.top=`${c.top}px`,n.searchContainer.style.width=`${c.width-c.left}px`,n.searchContainer.style.height=`${c.height}px`}})(),y=(()=>{let e=0;return{getHeaderHeight(){return e},addEventListener:t,trigger:n};function t(){n(),window.addEventListener("resize",n)}function n(){$()?e=A("--site-header-height-no-playback"):e=A("--site-header-height"),o.introBanner!==null&&o.introBanner.style.display.length!==0&&(o.introBanner.style.marginTop=`${e}px`,o.siteContent.style.marginTop=`${A("--site-content-margin-top")}px`)}})(),Se=(()=>{let e=0,t=!1;return{addEventListener:n};function n(){r(),window.addEventListener("scroll",r)}function r(){let l=window.pageYOffset,d=Math.round(y.getHeaderHeight()>150?y.getHeaderHeight()/2:y.getHeaderHeight()/3);l<1?s():l>d&&l>e?i():a(),k.hide(),e=l}function s(){o.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),o.siteHeader.classList.add("hide-nav-menu"),m.scrolledTop()}function i(){t===!1&&(t=!0,v(o.siteHeader,"sticky-nav-up","sticky-nav-down"))}function a(){t===!0&&(t=!1,v(o.siteHeader,"sticky-nav-down","sticky-nav-up")),m.isVisible()&&m.toggle()}})();
//# sourceMappingURL=index.js.map
