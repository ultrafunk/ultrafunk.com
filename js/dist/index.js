import{c as ie,d as qe,g as f,h as Ue,j as b,k as N,l as be,m as R,o as re,p as _,q as y,r as Ae,s as Se,t as Ee}from"./chunk.3BM3N373.js";function F(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function j(e,t="",n=60*60*24*365,o="/"){document.cookie=`${e}=${t}; Max-Age=${n}; Path=${o}; Secure; SameSite=Strict`}function U(e,t){try{localStorage.setItem(e,t)}catch(n){qe.error(n)}}var fe=y("modal"),m={id:"modal"},he=`
  <div id="${m.id}-dialog" tabindex="-1">
    <div class="${m.id}-container">
      <div class="${m.id}-header">
        <div class="${m.id}-title"></div>
        <div class="${m.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
      </div>
      <div class="${m.id}-body"></div>
    </div>
  </div>
`,d={overlay:null,container:null,body:null},q=null;function Y(e,t,n){fe.log(`showModal(): ${e}`),me(),q=n,pe(t),d.container.querySelector(`.${m.id}-title`).innerHTML=e,d.overlay.classList.add("show"),d.overlay.addEventListener("keydown",D),d.overlay.focus(),B(!0)}function me(){d.container===null&&(document.body.insertAdjacentHTML("beforeend",he),d.overlay=document.getElementById(`${m.id}-dialog`),d.container=d.overlay.querySelector(`.${m.id}-container`),d.body=d.overlay.querySelector(`.${m.id}-body`),d.overlay.addEventListener("click",e=>{e.target===d.overlay&&C()}),d.overlay.addEventListener("animationend",()=>{d.overlay.classList.contains("hide")&&(d.overlay.className="",B(!1))}),d.overlay.querySelector(`.${m.id}-close-button`).addEventListener("click",C))}function pe(e){let t="";e.forEach(n=>t+=`<div id="${n.id}" class="${m.id}-single-choice">${n.description}</div>`),d.body.innerHTML=t,e.forEach(n=>d.body.querySelector(`#${n.id}`).addEventListener("click",ye))}function ye(){C(),setTimeout(()=>q(this.id),150)}function D(e){e.stopPropagation(),e.key==="Escape"&&C()}function C(){d.overlay.removeEventListener("keydown",D),d.overlay.classList.replace("show","hide")}function B(e){let t=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow=e?"hidden":"",document.body.style.paddingRight=e?`${t}px`:"",document.getElementById("site-header").style.paddingRight=e?`${t}px`:""}var k=y("site-interaction"),p=document.documentElement.classList,E={};function K(e){k.log("init()"),E=e,L.init(),w.init(),b(".entry-meta-controls .track-share-control","click",ve)}function W(e){E=e,L.setCurrent(),w.setCurrent()}function ve(e){let t=e.target.getAttribute("data-artist-track-title"),n=e.target.getAttribute("data-track-url");P.show({string:t,filterString:!0,url:n})}function G(e,t,n){let o=Object.values(e).find(i=>i.id===t);return o!==void 0?o:n}function J(e,t){let n=Object.values(e).findIndex(i=>i.id===t.id),o=Object.keys(e);return n+1<o.length?e[o[n+1]]:e[o[0]]}var L=(()=>{let e={},t={toggle:null},n={toggleId:"#footer-site-theme-toggle",prefDarkScheme:"(prefers-color-scheme: dark)"},o={light:{id:"light",text:"light",class:"site-theme-light"},dark:{id:"dark",text:"dark",class:"site-theme-dark"},auto:{id:"auto",text:"auto"}};return{init:i,setCurrent:r,toggle:c};function i(){t.toggle=document.querySelector(n.toggleId),window.matchMedia(n.prefDarkScheme).addEventListener("change",l),b(n.toggleId,"click",c),r()}function r(){e=G(o,E.user.theme,o.auto),g()}function l(){e.id===o.auto.id&&g()}function c(s){s.preventDefault(),e=J(o,e),E.user.theme=e.id,g()}function g(){let s=e;e.id===o.auto.id&&(s=window.matchMedia(n.prefDarkScheme).matches?o.dark:o.light),U(f.UF_SITE_THEME,s.id),u(s)}function u(s){p.contains(s.class)===!1&&(k.log(`updateDOM() - newSiteTheme: ${s.id}`),p.remove(o.light.class,o.dark.class),p.add(s.class)),t.toggle.querySelector("span").textContent=e.text}})(),w=(()=>{let e={},t={toggle:null},n={toggleId:"#footer-track-layout-toggle",minWidth:`(max-width: ${be("--site-track-layout-min-width")})`},o={list:{id:"list",text:"list",class:"track-layout-list"},twoColumn:{id:"2-column",text:"2 column",class:"track-layout-2-column"},threeColumn:{id:"3-column",text:"3 / 4 column",class:"track-layout-3-column"}};return{init:i,setCurrent:r,toggle:c};function i(){t.toggle=document.querySelector(n.toggleId),window.matchMedia(n.minWidth).addEventListener("change",l),b(n.toggleId,"click",c),r()}function r(){e=G(o,E.user.trackLayout,o.threeColumn),t.toggle.querySelector("span").textContent=e.text,g()}function l(s){p.contains("user-layout")&&(s.matches?p.remove(e.class):p.add(e.class))}function c(s){s.preventDefault(),e=J(o,e),E.user.trackLayout=e.id,g(),s.type==="click"&&t.toggle.scrollIntoView()}function g(){U(f.UF_TRACK_LAYOUT,e.id),u()}function u(){p.contains("user-layout")&&p.contains(e.class)===!1&&(k.log(`updateDOM() - newTrackLayout: ${e.id}`),p.remove(o.list.class,o.twoColumn.class,o.threeColumn.class),window.matchMedia(n.minWidth).matches===!1&&p.add(e.class)),t.toggle.querySelector("span").textContent=e.text}})(),P=(()=>{let e=/\s{1,}[–·-]\s{1,}/i,t,n,o,i,r;return{show:l};function l(u){({title:t="Share / Play Track",string:n=null,filterString:o=!1,url:i=null,verb:r="Play"}=u),Y(t,c(r),g)}function c(u){return[{id:"copyToClipboardId",description:"<b>Copy Link</b> to Clipboard"},{id:"shareOnEmailId",description:"<b>Share</b> on Email"},{id:"amazonMusicId",description:`<b>${u}</b> on Amazon Music`},{id:"appleMusicId",description:`<b>${u}</b> on Apple Music`},{id:"spotifyId",description:`<b>${u}</b> on Spotify`},{id:"tidalId",description:`<b>${u}</b> on Tidal`},{id:"youTubeMusicId",description:`<b>${u}</b> on YouTube Music`}]}function g(u){k.log(`singleChoiceListClick(): ${u} - title: "${t}" - string: "${n}" - filterString: ${o} - url: ${i} - verb: ${r}`);let s=o?encodeURIComponent(n.replace(e," ")):encodeURIComponent(n);switch(u){case"copyToClipboardId":navigator.clipboard.writeText(i).then(()=>{N("Track link copied to clipboard",3)},A=>{k.error(`shareModal.copyToClipboard() failed because ${A}`),N("Unable to copy Track link to clipboard",5)});break;case"shareOnEmailId":window.location.href=`mailto:?subject=${encodeURIComponent(n)}&body=${i}%0d%0a`;break;case"amazonMusicId":window.open(`https://music.amazon.com/search/${s}`,"_blank");break;case"appleMusicId":window.open(`https://music.apple.com/ca/search?term=${s}`,"_blank");break;case"spotifyId":window.open(`https://open.spotify.com/search/${s}`,"_blank");break;case"tidalId":window.open(`https://google.com/search?q=${s}%20site:tidal.com`,"_blank");break;case"youTubeMusicId":window.open(`https://music.youtube.com/search?q=${s}`,"_blank");break}}})();var $=y("term-rest"),h={};function V(e,t,n,o){t in h?o(h[t].posts):($.log(`fetchTermPosts() - termType: ${e} - termId: ${t} - maxItems: ${n}`),fetch(`/wp-json/wp/v2/posts?${e}=${t}&per_page=${n}&_fields=title,link,content,tags,categories`).then(i=>i.ok?i.json():($.error(i),null)).then(i=>{h[t]={posts:i},o(i)}))}function Q(e,t,n,o){if("categories"in h[t]&&"tags"in h[t])o("categories",h[t].categories),o("tags",h[t].tags);else{let i=[],r=[];e.forEach(l=>{i.push.apply(i,l.categories),r.push.apply(r,l.tags)}),r=r.filter(l=>l!==t),z("categories",t,[...new Set(i)],n,o),z("tags",t,[...new Set(r)],n,o)}}function z(e,t,n,o,i){n.length>0?($.log(`fetchMetadata() - termType: ${e} - termIds: ${n.length>0?n:"Empty"} - maxItems: ${o}`),fetch(`/wp-json/wp/v2/${e}?include=${n.join(",")}&per_page=${o}&_fields=link,name`).then(r=>r.ok?r.json():($.error(r),null)).then(r=>{h[t][e]=r,i(e,r)})):(h[t][e]=null,i(e,null))}function X(){h=JSON.parse(sessionStorage.getItem(f.UF_TERMLIST_CACHE)),h===null&&(h={})}function Z(){sessionStorage.setItem(f.UF_TERMLIST_CACHE,JSON.stringify(h))}function ee(){sessionStorage.removeItem(f.UF_TERMLIST_CACHE)}function te(){return Object.keys(h).length>0}var Te=y("termlist"),ke=/\s{1,}[–·-]\s{1,}|\s{1,}(&#8211;)\s{1,}/i,Ce=/(?<=src=").*?(?=[?"])/i;function oe(){Te.log("init()"),document.getElementById("termlist-container").addEventListener("click",e=>{let t=e.target.closest("div.play-button");if(t!==null)return H(e,t.querySelector("a").href);let n=e.target.closest("div.shuffle-button");if(n!==null)return H(e,n.querySelector("a").href);let o=e.target.closest("div.share-find-button");if(o!==null)return we(o);if(e.target.closest("div.termlist-header")!==null)return $e(e);let r=e.target.closest("div.thumbnail");if(r!==null)return H(e,r.getAttribute("data-track-url"));if(e.target.closest("a")!==null)return ne()}),Le()}function ne(){if(te()){let e={pageUrl:window.location.href,scrollPos:Math.round(window.pageYOffset),openTermIds:[]};document.querySelectorAll(".termlist-entry").forEach(t=>{t.classList.contains("open")&&e.openTermIds.push(t.id)}),sessionStorage.setItem(f.UF_TERMLIST_STATE,JSON.stringify(e)),Z()}}function Le(){if(X(),performance.navigation.type!==performance.navigation.TYPE_RELOAD){let e=JSON.parse(sessionStorage.getItem(f.UF_TERMLIST_STATE));e!==null&&e.pageUrl===window.location.href?(history.scrollRestoration="manual",e.openTermIds.forEach(t=>document.getElementById(t).querySelector("div.termlist-header").click()),window.scroll({top:e.scrollPos,left:0,behavior:"auto"})):history.scrollRestoration="auto"}sessionStorage.removeItem(f.UF_TERMLIST_STATE),ee()}function H(e,t){e.preventDefault(),ne(),sessionStorage.setItem(f.UF_AUTOPLAY,"true"),window.location.href=t}function we(e){let t=e.getAttribute("data-term-type"),n=e.getAttribute("data-term-name"),o=e.getAttribute("data-term-url");P.show({title:`Share / Find ${t}`,string:n,url:o,verb:"Find"})}function $e(e){let t=e.target.closest("div.termlist-entry"),n=t.querySelector("div.expand-toggle span"),o=t.querySelector("div.termlist-body"),i=o.style.display.length!==0;_(t,i?"open":"closed",i?"closed":"open"),n.innerText=i?"expand_more":"expand_less",o.style.display=i?"":"flex",i||_e(t,o)}function _e(e,t){let n=document.getElementById("termlist-container").getAttribute("data-term-type"),o=parseInt(e.getAttribute("data-term-id")),i=n==="categories";V(n,o,i?10:50,r=>{let l=i?"Latest Tracks":"All Tracks",c=t.querySelector(".body-left");r!==null?Ie(l,r,c):c.innerHTML="<b>Error!</b><br>Unable to fetch track data...",!i&&r!==null&&Q(r,o,50,(g,u)=>{l=g==="tags"?"Related Artists":"In Channels",c=g==="tags"?t.querySelector(".artists"):t.querySelector(".channels"),u!==null?Me(l,u,c):c.innerHTML=`<b>${l}</b><br>None found`})})}function xe(e){return e.includes('id="soundcloud-uid')?"/wp-content/themes/ultrafunk/inc/img/soundcloud_icon.png":Ee(e.match(Ce))}function Ie(e,t,n){let o={},i=`<b>${e}</b>`;t.forEach(r=>{Se(r.title.rendered,o,ke),i+=`
    <div class="track">
      <div class="thumbnail" data-track-url="${r.link}" title="Play Track">
        <img src="${xe(r.content.rendered)}">
        <div class="thumbnail-overlay"><span class="material-icons">play_arrow</span></div>
      </div>
      <div class="artist-title text-nowrap-ellipsis">
        <a href="${r.link}" title="Go to track"><span><b>${o.artist}</b></span><br><span>${o.title}</span></a>
      </div>
    </div>`}),n.innerHTML=i}function Me(e,t,n){let o=`<b>${e}</b><br>`;t.forEach(i=>o+=`<a href="${i.link}">${i.name}</a>, `),n.innerHTML=o.slice(0,o.length-2)}var I=y("index"),v={},se={smoothScrolling:!1,settingsUpdatedEvent:"settingsUpdated",fullscreenTrackEvent:"fullscreenTrack"},a={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{I.log("DOMContentLoaded"),ae(),Pe(),a.introBanner!==null&&He(),document.getElementById("termlist-container")!==null&&oe(),a.siteContentSearch!==null&&(a.siteContentSearch.focus(),a.siteContentSearch.setSelectionRange(9999,9999)),Re()});document.addEventListener(se.settingsUpdatedEvent,()=>{ae(),W(v),j(f.UF_TRACKS_PER_PAGE,v.user.tracksPerPage,60*60*24*365*5)});document.addEventListener(se.fullscreenTrackEvent,e=>a.fullscreenTarget=e.fullscreenTarget);function ae(){I.log("readSettings()"),v=Ae(f.UF_SITE_SETTINGS,Ue,!0),I.log(v)}function Pe(){I.log("initIndex()"),a.siteHeader=document.getElementById("site-header"),a.introBanner=document.getElementById("intro-banner"),a.siteContent=document.getElementById("site-content"),a.siteContentSearch=document.querySelector("#site-content form input.search-field"),K(v),M.init(),S.init(),T.addEventListener(),Oe.addEventListener()}document.addEventListener("keydown",e=>{if(e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"Escape":S.isVisible()&&(e.preventDefault(),S.toggle());return}if(v.user.keyboardShortcuts&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"c":case"C":x()&&(e.preventDefault(),S.toggle());break;case"L":x()&&le()&&(w.toggle(e),T.trigger());break;case"s":case"S":x()&&Fe()&&(e.preventDefault(),M.toggle());break;case"T":x()&&le()&&L.toggle(e);break;case"ArrowLeft":e.shiftKey&&O()&&ce(navigationVars.prevUrl);break;case"ArrowRight":e.shiftKey&&O()&&ce(navigationVars.nextUrl);break}});function x(){return M.isVisible()===!1&&a.siteContentSearch!==document.activeElement}function le(){return document.body.classList.contains("page-settings")===!1}function Fe(){return a.fullscreenTarget===null}function O(){return document.body.classList.contains("no-playback")}function ce(e){e!==null&&(window.location.href=e)}function He(){F("localStorage")&&typeof bannerProperty!="undefined"&&bannerProperty!==null&&v.priv.banners[bannerProperty]&&(a.introBanner.style.display="block",T.trigger(),b("#intro-banner .intro-banner-close-button","click",()=>{a.introBanner.style.display="",a.siteContent.style.marginTop="",v.priv.banners[bannerProperty]=!1}))}function Re(){if(document.querySelector(".nav-bar-title .go-back-to")!==null){let e="";if(document.referrer.length===0)e="Previous Page";else{let t=new URL(decodeURIComponent(document.referrer));if(t.search.length!==0)e="Search Results";else if(t.pathname.length>1){let n=t.pathname.slice(-1)==="/"?1:0,o=t.pathname.slice(1,t.pathname.length-n).replace(/-/gi," ").split("/");o.forEach((i,r)=>e+=r+1<o.length?i+" / ":i)}}document.querySelectorAll("#site-navigation .nav-bar-title").forEach(t=>{t.querySelector(".go-back-title").textContent=e.length>0?e:"Ultrafunk (home)",t.querySelector(".go-back-to").style.opacity=1})}}var S=(()=>{let e=new ResizeObserver(r),t={navMenu:null,modalOverlay:null},n=!1;return{isVisible(){return n},scrolledTop(){t.navMenu.style.display=""},init:o,toggle:i};function o(){t.navMenu=document.querySelector("#site-navigation .nav-menu-outer"),t.modalOverlay=document.getElementById("nav-menu-modal-overlay"),b(".nav-menu-toggle","click",i),t.modalOverlay.addEventListener("click",i),t.modalOverlay.addEventListener("transitionend",l),e.observe(t.navMenu.querySelector(".menu-primary-menu-container"))}function i(){a.siteHeader.classList.contains("sticky-nav-up")?n?t.navMenu.style.display="none":t.navMenu.style.display="flex":a.siteHeader.classList.contains("sticky-nav-down")===!1&&a.siteHeader.classList.toggle("hide-nav-menu")}function r(c){n=c[0].contentRect.height!==0,n?(t.modalOverlay.className="",t.modalOverlay.classList.add("show"),setTimeout(()=>t.modalOverlay.classList.add("fadein"),50)):t.modalOverlay.classList.add("fadeout")}function l(){n===!1&&(t.modalOverlay.className="",t.navMenu.style.display="")}})(),M=(()=>{let e=new Event("allowKeyboardShortcuts"),t=new Event("denyKeyboardShortcuts"),n={searchContainer:null,searchField:null,brandingContainer:null},o=!1;return{isVisible(){return o},init:i,toggle:r,hide:l};function i(){n.searchContainer=document.getElementById("search-container"),n.searchField=n.searchContainer.querySelector(".search-field"),n.brandingContainer=a.siteHeader.querySelector("div.site-branding-container"),b(".nav-search-toggle","click",r),b(".nav-search-toggle","mousedown",s=>s.preventDefault()),n.searchField.addEventListener("blur",l),n.searchField.addEventListener("keydown",s=>{s.key==="Escape"&&(s.stopPropagation(),l())})}function r(){if(n.searchContainer.style.display.length===0){if(re(ie.SITE_MAX_WIDTH_MOBILE)&&a.siteHeader.querySelector(".nav-bar-container-mobile-top").offsetHeight===0&&a.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetHeight===0)return;c()}else l()}function l(){o&&g(!1,e,"","search")}function c(){u(),g(!0,t,"flex","clear"),n.searchField.focus(),n.searchField.setSelectionRange(9999,9999)}function g(s,A,de,ue){o=s,document.dispatchEvent(A),n.searchContainer.style.display=de,document.querySelectorAll("div.nav-search-toggle i").forEach(ge=>ge.textContent=ue)}function u(){let s=DOMRect;re(ie.SITE_MAX_WIDTH_MOBILE)?(n.brandingContainer.offsetHeight!==0?s.top=n.brandingContainer.offsetTop:s.top=a.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetTop,s.top+=3,s.left=63,s.right=document.body.clientWidth-63,s.height=30):s=n.brandingContainer.getBoundingClientRect(),n.searchContainer.style.top=`${s.top}px`,n.searchContainer.style.left=`${s.left}px`,n.searchContainer.style.width=`${s.right-s.left}px`,n.searchContainer.style.height=`${s.height}px`}})(),T=(()=>{let e=0;return{getHeaderHeight(){return e},addEventListener:t,trigger:n};function t(){n(),window.addEventListener("resize",n)}function n(){O()?e=R("--site-header-height-no-playback"):e=R("--site-header-height"),a.introBanner!==null&&a.introBanner.style.display.length!==0&&(a.introBanner.style.marginTop=`${e}px`,a.siteContent.style.marginTop=`${R("--site-content-margin-top")}px`)}})(),Oe=(()=>{let e=0,t=!1;return{addEventListener:n};function n(){o(),window.addEventListener("scroll",o)}function o(){let c=window.pageYOffset,g=Math.round(T.getHeaderHeight()>150?T.getHeaderHeight()/2:T.getHeaderHeight()/3);c<1?i():c>g&&c>e?r():l(),M.hide(),e=c}function i(){a.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),a.siteHeader.classList.add("hide-nav-menu"),S.scrolledTop()}function r(){t===!1&&(t=!0,_(a.siteHeader,"sticky-nav-up","sticky-nav-down"))}function l(){t===!0&&(t=!1,_(a.siteHeader,"sticky-nav-down","sticky-nav-up")),S.isVisible()&&S.toggle()}})();
//# sourceMappingURL=index.js.map
