import{c as J,d as Me,g as v,h as Se,j as y,k as F,l as ue,m as Ee,o as Q,p as $,q as p,r as ke,s as fe}from"./chunk.N3A52DAJ.js";function U(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function P(e,t="",n=60*60*24*365,i="/"){document.cookie=`${e}=${t}; Max-Age=${n}; Path=${i}; Secure; SameSite=Strict`}function A(e,t){try{localStorage.setItem(e,t)}catch(n){Me.error(n)}}var se=p("modal"),f={id:"modal"},ae=`
  <div id="${f.id}-dialog" tabindex="-1">
    <div class="${f.id}-container">
      <div class="${f.id}-header">
        <div class="${f.id}-title"></div>
        <div class="${f.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
      </div>
      <div class="${f.id}-body"></div>
    </div>
  </div>
`,c={overlay:null,container:null,body:null},O=null;function D(e,t,n){se.log(`showModal(): ${e}`),le(),O=n,ce(t),c.container.querySelector(`.${f.id}-title`).innerHTML=e,c.overlay.classList.add("show"),c.overlay.addEventListener("keydown",R),c.overlay.focus(),j(!0)}function le(){c.container===null&&(document.body.insertAdjacentHTML("beforeend",ae),c.overlay=document.getElementById(`${f.id}-dialog`),c.container=c.overlay.querySelector(`.${f.id}-container`),c.body=c.overlay.querySelector(`.${f.id}-body`),c.overlay.addEventListener("click",e=>{e.target===c.overlay&&T()}),c.overlay.addEventListener("animationend",()=>{c.overlay.classList.contains("hide")&&(c.overlay.className="",j(!1))}),c.overlay.querySelector(`.${f.id}-close-button`).addEventListener("click",T))}function ce(e){let t="";e.forEach(n=>t+=`<div id="${n.id}" class="${f.id}-single-choice">${n.description}</div>`),c.body.innerHTML=t,e.forEach(n=>c.body.querySelector(`#${n.id}`).addEventListener("click",de))}function de(){T(),setTimeout(()=>O(this.id),150)}function R(e){e.stopPropagation(),e.key==="Escape"&&T()}function T(){c.overlay.removeEventListener("keydown",R),c.overlay.classList.replace("show","hide")}function j(e){let t=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow=e?"hidden":"",document.body.style.paddingRight=e?`${t}px`:"",document.getElementById("site-header").style.paddingRight=e?`${t}px`:""}var S=p("site-interaction"),h=document.documentElement.classList,E={};function q(e){S.log("init()"),E=e,L.init(),C.init(),y(".entry-meta-controls .track-share-control","click",ge)}function B(e){E=e,L.setCurrent(),C.setCurrent()}function ge(e){let t=e.target.getAttribute("data-artist-track-title"),n=e.target.getAttribute("data-track-url");H.show({string:t,filterString:!0,url:n})}function W(e,t,n){let i=Object.values(e).find(o=>o.id===t);return i!==void 0?i:n}function K(e,t){let n=Object.values(e).findIndex(o=>o.id===t.id),i=Object.keys(e);return n+1<i.length?e[i[n+1]]:e[i[0]]}var L=(()=>{let e={},t={toggle:null},n={toggleId:"#footer-site-theme-toggle",prefDarkScheme:"(prefers-color-scheme: dark)"},i={light:{id:"light",text:"light",class:"site-theme-light"},dark:{id:"dark",text:"dark",class:"site-theme-dark"},auto:{id:"auto",text:"auto"}};return{init:o,setCurrent:s,toggle:d};function o(){t.toggle=document.querySelector(n.toggleId),window.matchMedia(n.prefDarkScheme).addEventListener("change",l),y(n.toggleId,"click",d),s()}function s(){e=W(i,E.user.theme,i.auto),g()}function l(){e.id===i.auto.id&&g()}function d(r){r.preventDefault(),e=K(i,e),E.user.theme=e.id,g()}function g(){let r=e;e.id===i.auto.id&&(r=window.matchMedia(n.prefDarkScheme).matches?i.dark:i.light),A(v.UF_SITE_THEME,r.id),u(r)}function u(r){h.contains(r.class)===!1&&(S.log(`updateDOM() - newSiteTheme: ${r.id}`),h.remove(i.light.class,i.dark.class),h.add(r.class)),t.toggle.querySelector("span").textContent=e.text}})(),C=(()=>{let e={},t={toggle:null},n={toggleId:"#footer-track-layout-toggle",minWidth:`(max-width: ${ue("--site-content-track-layout-min-width")})`},i={list:{id:"list",text:"list",class:"track-layout-list"},twoColumn:{id:"2-column",text:"2 column",class:"track-layout-2-column"},threeColumn:{id:"3-column",text:"3 / 4 column",class:"track-layout-3-column"}};return{init:o,setCurrent:s,toggle:d};function o(){t.toggle=document.querySelector(n.toggleId),window.matchMedia(n.minWidth).addEventListener("change",l),y(n.toggleId,"click",d),s()}function s(){e=W(i,E.user.trackLayout,i.threeColumn),t.toggle.querySelector("span").textContent=e.text,g()}function l(r){h.contains("user-layout")&&(r.matches?h.remove(e.class):h.add(e.class))}function d(r){r.preventDefault(),e=K(i,e),E.user.trackLayout=e.id,g(),r.type==="click"&&t.toggle.scrollIntoView()}function g(){A(v.UF_TRACK_LAYOUT,e.id),u()}function u(){h.contains("user-layout")&&h.contains(e.class)===!1&&(S.log(`updateDOM() - newTrackLayout: ${e.id}`),h.remove(i.list.class,i.twoColumn.class,i.threeColumn.class),window.matchMedia(n.minWidth).matches===!1&&h.add(e.class)),t.toggle.querySelector("span").textContent=e.text}})(),H=(()=>{let e=/\s{1,}[–·-]\s{1,}/i,t,n,i,o,s;return{show:l};function l(u){({title:t="Share / Play Track",string:n=null,filterString:i=!1,url:o=null,verb:s="Play"}=u),D(t,d(s),g)}function d(u){return[{id:"copyToClipboardId",description:"<b>Copy Link</b> to Clipboard"},{id:"shareOnEmailId",description:"<b>Share</b> on Email"},{id:"amazonMusicId",description:`<b>${u}</b> on Amazon Music`},{id:"appleMusicId",description:`<b>${u}</b> on Apple Music`},{id:"spotifyId",description:`<b>${u}</b> on Spotify`},{id:"tidalId",description:`<b>${u}</b> on Tidal`},{id:"youTubeMusicId",description:`<b>${u}</b> on YouTube Music`}]}function g(u){S.log(`singleChoiceListClick(): ${u} - title: "${t}" - string: "${n}" - filterString: ${i} - url: ${o} - verb: ${s}`);let r=i?encodeURIComponent(n.replace(e," ")):encodeURIComponent(n);switch(u){case"copyToClipboardId":navigator.clipboard.writeText(o).then(()=>{F("Track link copied to clipboard",3)},x=>{S.error(`shareModal.copyToClipboard() failed because ${x}`),F("Unable to copy Track link to clipboard",5)});break;case"shareOnEmailId":window.location.href=`mailto:?subject=${encodeURIComponent(n)}&body=${o}%0d%0a`;break;case"amazonMusicId":window.open(`https://music.amazon.com/search/${r}`,"_blank");break;case"appleMusicId":window.open(`https://music.apple.com/ca/search?term=${r}`,"_blank");break;case"spotifyId":window.open(`https://open.spotify.com/search/${r}`,"_blank");break;case"tidalId":window.open(`https://google.com/search?q=${r}%20site:tidal.com`,"_blank");break;case"youTubeMusicId":window.open(`https://music.youtube.com/search?q=${r}`,"_blank");break}}})(),w=p("term-rest");function Y(e,t,n,i){w.log(`fetchTracks() - termType: ${e} - termId: ${t} - maxItems: ${n}`),fetch(`/wp-json/wp/v2/posts?${e}=${t}&per_page=${n}`).then(o=>o.ok?o.json():(w.error(o),null)).then(o=>i(o))}function G(e,t,n,i){let o=[],s=[];e.forEach(l=>{o.push.apply(o,l.categories),s.push.apply(s,l.tags)}),s=s.filter(l=>l!==t),N("categories",[...new Set(o)],n,i),N("tags",[...new Set(s)],n,i)}function N(e,t,n,i){w.log(`fetchMetadata() - termType: ${e} - termIds: ${t.length>0?t:"Empty"} - maxItems: ${n}`),t.length>0?fetch(`/wp-json/wp/v2/${e}?include=${t.join(",")}&per_page=${n}`).then(o=>o.ok?o.json():(w.error(o),null)).then(o=>i(e,o)):i(e,null)}var Ge=p("termlist"),he=/\s{1,}[–·-]\s{1,}|\s{1,}(&#8211;)\s{1,}/i;function z(){document.getElementById("termlist-container").addEventListener("click",e=>{let t=e.target.closest("div.play-button"),n=e.target.closest("div.shuffle-button"),i=e.target.closest("div.share-find-button"),o=e.target.closest("div.termlist-header");t!==null?V(e,t.querySelector("a").href):n!==null?V(e,n.querySelector("a").href):i!==null?me(i):o!==null&&pe(e)})}function V(e,t){e.preventDefault(),sessionStorage.setItem(v.UF_AUTOPLAY,"true"),window.location.href=t}function me(e){let t=e.getAttribute("data-term-type"),n=e.getAttribute("data-term-name"),i=e.getAttribute("data-term-url");H.show({title:`Share / Find ${t}`,string:n,url:i,verb:"Find"})}function pe(e){let t=e.target.closest("div.termlist-entry"),n=t.querySelector("div.expand-toggle span"),i=t.querySelector("div.termlist-body"),o=i.style.display.length!==0;$(t,o?"open":"closed",o?"closed":"open"),n.innerText=o?"expand_more":"expand_less",i.style.display=o?"":"flex",o||ye(t,i)}function ye(e,t){let n=document.getElementById("termlist-container").getAttribute("data-term-type"),i=parseInt(e.getAttribute("data-term-id")),o=n==="categories";Y(n,i,o?10:50,s=>{let l=o?"Latest Tracks":"All Tracks",d=t.querySelector(".body-left");s!==null?be(l,s,d):d.innerHTML="<b>Error!</b><br>Unable to fetch track data...",!o&&s!==null&&G(s,i,50,(g,u)=>{l=g==="tags"?"Related Artists":"In Channels",d=g==="tags"?t.querySelector(".artists"):t.querySelector(".channels"),u!==null?ve(l,u,d):d.innerHTML=`<b>${l}</b><br>None found`})})}function be(e,t,n){let i={},o=`<b>${e}</b><ul>`;t.forEach(s=>{fe(i,s.title.rendered,he),o+=`<li><div class="artist-title"><a href="${s.link}"><b>${i.artist}</b> &#8211; ${i.title}</a></div></li>`}),n.innerHTML=o+"</ul>"}function ve(e,t,n){let i=`<b>${e}</b><br>`;t.forEach(o=>i+=`<a href="${o.link}">${o.name}</a>, `),n.innerHTML=i.slice(0,i.length-2)}var I=p("index"),b={},X={smoothScrolling:!1,settingsUpdatedEvent:"settingsUpdated",fullscreenTrackEvent:"fullscreenTrack"},a={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{I.log("DOMContentLoaded"),Z(),Te(),a.introBanner!==null&&Le(),document.getElementById("termlist-container")!==null&&z(),a.siteContentSearch!==null&&(a.siteContentSearch.focus(),a.siteContentSearch.setSelectionRange(9999,9999)),m.setTopMargin(),m.setLastInnerWidth(window.innerWidth),Ce()});document.addEventListener(X.settingsUpdatedEvent,()=>{Z(),B(b),P(v.UF_TRACKS_PER_PAGE,b.user.tracksPerPage,60*60*24*365*5)});document.addEventListener(X.fullscreenTrackEvent,e=>a.fullscreenTarget=e.fullscreenTarget);window.addEventListener("load",()=>m.setTopMargin());function Z(){I.log("readSettings()"),b=ke(v.UF_SITE_SETTINGS,Se,!0),I.log(b)}function Te(){I.log("initIndex()"),a.siteHeader=document.getElementById("site-header"),a.introBanner=document.getElementById("intro-banner"),a.siteContent=document.getElementById("site-content"),a.siteContentSearch=document.querySelector("#site-content form input.search-field"),m.addEventListener(),we.addEventListener(),q(b),M.init(),k.init()}document.addEventListener("keydown",e=>{if(e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"Escape":k.isVisible()&&(e.preventDefault(),k.toggle());return}if(b.user.keyboardShortcuts&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"c":case"C":_()&&(e.preventDefault(),k.toggle());break;case"L":_()&&ee()&&(C.toggle(e),m.setTopMargin());break;case"s":case"S":_()&&$e()&&(e.preventDefault(),M.toggle());break;case"T":_()&&ee()&&L.toggle(e);break;case"ArrowLeft":e.shiftKey&&te()&&ne(navigationVars.prevUrl);break;case"ArrowRight":e.shiftKey&&te()&&ne(navigationVars.nextUrl);break}});function _(){return M.isVisible()===!1&&a.siteContentSearch!==document.activeElement}function ee(){return document.body.classList.contains("page-settings")===!1}function $e(){return a.fullscreenTarget===null}function te(){return document.body.classList.contains("no-playback")}function Le(){U("localStorage")&&(typeof bannerProperty!="undefined"&&bannerProperty!==null&&(b.priv.banners[bannerProperty]&&(a.introBanner.style.display="block",y("#intro-banner .intro-banner-close-button","click",()=>{a.introBanner.style.display="",m.setTopMargin(),b.priv.banners[bannerProperty]=!1}))))}function Ce(){if(document.querySelector(".nav-bar-title .go-back-to")!==null){let e="";if(document.referrer.length===0)e="Previous Page";else{let t=new URL(decodeURIComponent(document.referrer));if(t.search.length!==0)e="Search Results";else if(t.pathname.length>1){let n=t.pathname.slice(-1)==="/"?1:0,i=t.pathname.slice(1,t.pathname.length-n).replace(/-/gi," ").split("/");i.forEach((o,s)=>e+=s+1<i.length?o+" / ":o)}}document.querySelectorAll("#site-navigation .nav-bar-title").forEach(t=>{t.querySelector(".go-back-title").textContent=e.length>0?e:"Ultrafunk (home)",t.querySelector(".go-back-to").style.opacity=1})}}function ne(e){e!==null&&(window.location.href=e)}var k=(()=>{let e=new ResizeObserver(s),t={navMenu:null,modalOverlay:null},n=!1;return{isVisible(){return n},scrolledTop(){t.navMenu.style.display=""},init:i,toggle:o};function i(){t.navMenu=document.querySelector("#site-navigation .nav-menu-outer"),t.modalOverlay=document.getElementById("nav-menu-modal-overlay"),y(".nav-menu-toggle","click",o),t.modalOverlay.addEventListener("click",o),t.modalOverlay.addEventListener("transitionend",l),e.observe(t.navMenu.querySelector(".menu-primary-menu-container"))}function o(){a.siteHeader.classList.contains("sticky-nav-up")?n?t.navMenu.style.display="none":t.navMenu.style.display="flex":a.siteHeader.classList.contains("sticky-nav-down")===!1&&a.siteHeader.classList.toggle("hide-nav-menu")}function s(d){n=d[0].contentRect.height!==0,n?(t.modalOverlay.className="",t.modalOverlay.classList.add("show"),setTimeout(()=>t.modalOverlay.classList.add("fadein"),50)):t.modalOverlay.classList.add("fadeout")}function l(){n===!1&&(t.modalOverlay.className="",t.navMenu.style.display="")}})(),M=(()=>{let e=new Event("allowKeyboardShortcuts"),t=new Event("denyKeyboardShortcuts"),n={searchContainer:null,searchField:null,brandingContainer:null},i=!1;return{isVisible(){return i},init:o,toggle:s,hide:l};function o(){n.searchContainer=document.getElementById("search-container"),n.searchField=n.searchContainer.querySelector(".search-field"),n.brandingContainer=a.siteHeader.querySelector("div.site-branding-container"),y(".nav-search-toggle","click",s),y(".nav-search-toggle","mousedown",r=>r.preventDefault()),n.searchField.addEventListener("blur",l),n.searchField.addEventListener("keydown",r=>{r.key==="Escape"&&(r.stopPropagation(),l())})}function s(){if(n.searchContainer.style.display.length===0){if(Q(J.SITE_MAX_WIDTH_MOBILE)&&(a.siteHeader.querySelector(".nav-bar-container-mobile-top").offsetHeight===0&&a.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetHeight===0))return;d()}else l()}function l(){i&&g(!1,e,"","search")}function d(){u(),g(!0,t,"flex","clear"),n.searchField.focus(),n.searchField.setSelectionRange(9999,9999)}function g(r,x,ie,oe){i=r,document.dispatchEvent(x),n.searchContainer.style.display=ie,document.querySelectorAll("div.nav-search-toggle i").forEach(re=>re.textContent=oe)}function u(){let r=DOMRect;Q(J.SITE_MAX_WIDTH_MOBILE)?(n.brandingContainer.offsetHeight!==0?r.top=n.brandingContainer.offsetTop:r.top=a.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetTop,r.top+=3,r.left=63,r.right=document.body.clientWidth-63,r.height=30):r=n.brandingContainer.getBoundingClientRect(),n.searchContainer.style.top=`${r.top}px`,n.searchContainer.style.left=`${r.left}px`,n.searchContainer.style.width=`${r.right-r.left}px`,n.searchContainer.style.height=`${r.height}px`}})(),m=(()=>{let e=0,t=0;return{getHeaderHeight(){return e},setLastInnerWidth(o){t=o},addEventListener:n,setTopMargin:i};function n(){window.addEventListener("resize",()=>{let o=window.innerWidth;t!==o&&(i(),t=o)})}function i(){let o=Ee("--site-content-margin-top");a.siteHeader.classList.contains("hide-nav-menu")&&(e=a.siteHeader.offsetHeight),a.introBanner!==null&&a.introBanner.style.display.length!==0?(a.introBanner.style.marginTop=`${e}px`,a.siteContent.style.marginTop=`${o}px`):a.siteContent.style.marginTop=`${e+o}px`}})(),we=(()=>{let e=0,t=!1;return{addEventListener:n};function n(){window.addEventListener("scroll",()=>{let l=window.pageYOffset,d=Math.round(m.getHeaderHeight()>150?m.getHeaderHeight()/2:m.getHeaderHeight()/3);l<1?i():l>d&&l>e?o():s(),M.hide(),e=l})}function i(){a.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),a.siteHeader.classList.add("hide-nav-menu"),k.scrolledTop(),m.setTopMargin()}function o(){t===!1&&(t=!0,$(a.siteHeader,"sticky-nav-up","sticky-nav-down"))}function s(){t===!0&&(t=!1,$(a.siteHeader,"sticky-nav-down","sticky-nav-up")),k.isVisible()&&k.toggle()}})();
//# sourceMappingURL=index.js.map
