import{A as K,F as D,G as V,a as p,d as _,f as d,g as B,h as C,i as O,k as R,l as x,m as w,n as T,o as $,p as S,w as U,x as F,y as q,z as j}from"./chunk-YLWSGHNV.js";var y=p("term-rest"),u={};function N(t,e,n,s){e in u?s(u[e].posts):(y.log(`fetchPosts() - termType: ${t} - termId: ${e} - maxItems: ${n}`),fetch(`/wp-json/wp/v2/posts?${t}=${e}&per_page=${n}&_fields=title,link,content,tags,categories`).then(r=>r.ok?r.json():(y.error(r),null)).then(r=>{u[e]={posts:r},s(r)}).catch(r=>{y.warn(r),s(null)}))}function z(t,e,n,s){if("categories"in u[e]&&"tags"in u[e])s("categories",u[e].categories),s("tags",u[e].tags);else{let r=[],i=[];t.forEach(o=>{r.push.apply(r,o.categories),i.push.apply(i,o.tags)}),i=i.filter(o=>o!==e),Y("categories",e,[...new Set(r)],n,s),Y("tags",e,[...new Set(i)],n,s)}}function Y(t,e,n,s,r){n.length>0?(y.log(`fetchMetadata() - termType: ${t} - termIds: ${n.length>0?n:"Empty"} - maxItems: ${s}`),fetch(`/wp-json/wp/v2/${t}?include=${n.join(",")}&per_page=${s}&_fields=link,name`).then(i=>i.ok?i.json():(y.error(i),null)).then(i=>{u[e][t]=i,r(t,i)}).catch(i=>{y.warn(i),r(null)})):(u[e][t]=null,r(t,null))}function J(){u=JSON.parse(sessionStorage.getItem(d.UF_TERMLIST_CACHE)),u===null&&(u={})}function W(){sessionStorage.setItem(d.UF_TERMLIST_CACHE,JSON.stringify(u))}function G(){sessionStorage.removeItem(d.UF_TERMLIST_CACHE)}function X(){return Object.keys(u).length>0}var le=p("termlist"),Q={},ce=/\s{1,}[–·-]\s{1,}|\s{1,}(&#8211;)\s{1,}/,ue=/(?<=src=").*?(?=[?"])/i,k=null;function Z(t){le.log("init()"),Q=t,k=document.getElementById("termlist-container"),k.addEventListener("click",e=>{let n=e.target.closest("div.play-button");if(n!==null)return L(e,n.querySelector("a").href);let s=e.target.closest("div.shuffle-button");if(s!==null)return fe(e,s.querySelector("a").href);let r=e.target.closest("div.share-find-button");if(r!==null)return ge(r);if(e.target.closest("div.termlist-header")!==null)return pe(e);let o=e.target.closest("div.thumbnail");if(o!==null)return he(e,o);let l=e.target.closest("a");if(l!==null)return me(e,l)}),de()}function ee(){if(X()){let t={pageUrl:window.location.href,scrollPos:Math.round(window.pageYOffset),openTermIds:[]};document.querySelectorAll(".termlist-entry").forEach(e=>{e.classList.contains("open")&&t.openTermIds.push(e.id)}),sessionStorage.setItem(d.UF_TERMLIST_STATE,JSON.stringify(t)),W()}}function de(){if(J(),performance.navigation.type!==performance.navigation.TYPE_RELOAD){let t=JSON.parse(sessionStorage.getItem(d.UF_TERMLIST_STATE));t!==null&&t.pageUrl===window.location.href?(history.scrollRestoration="manual",t.openTermIds.forEach(e=>document.getElementById(e).querySelector("div.termlist-header").click()),window.scroll({top:t.scrollPos,left:0,behavior:"auto"})):history.scrollRestoration="auto"}sessionStorage.removeItem(d.UF_TERMLIST_STATE),G()}function H(t){return Q.user.preferredPlayer===1?t.replace(/ultrafunk\.com\//,"ultrafunk.com/list/"):t}function L(t,e,n=null){t.preventDefault(),ee(),sessionStorage.setItem(d.UF_AUTOPLAY,JSON.stringify({autoplay:t.shiftKey===!1,trackId:n,position:0})),window.location.href=H(e)}function fe(t,e){C("UF_RESHUFFLE","true"),L(t,e)}function ge(t){let e=t.getAttribute("data-term-path"),n=t.getAttribute("data-term-name"),s=H(t.getAttribute("data-term-url"));K.show({title:`Share / Find ${e}`,string:n,url:s,verb:"Find"})}function he(t,e){let n=k.getAttribute("data-term-type")==="categories"?"channel":"artist",s=e.getAttribute("data-term-slug"),r=e.getAttribute("data-term-uid");return r!==null?L(t,`/list/${n}/${s}/`,r):L(t,e.getAttribute("data-term-url"))}function me(t,e){ee(),e.closest(".permalink")!==null&&(t.preventDefault(),window.location.href=H(e.href))}function pe(t){let e=t.target.closest("div.termlist-entry"),n=e.querySelector("div.expand-toggle span"),s=e.querySelector("div.termlist-body"),r=s.style.display.length!==0;S(e,r?"open":"closed",r?"closed":"open"),n.innerText=r?"expand_more":"expand_less",s.style.display=r?"":"flex",r||ye(e,s)}function ye(t,e){let n=k.getAttribute("data-term-type"),s=parseInt(t.getAttribute("data-term-id")),r=t.getAttribute("data-term-slug"),i=n==="categories";N(n,s,i?10:50,o=>{let l=i?"Latest Tracks":"All Tracks",f=e.querySelector(".body-left");o!==null?be(l,r,o,f):f.innerHTML="<b>Error!</b><br>Unable to fetch track data...",!i&&o!==null&&z(o,s,50,(v,E)=>{l=v==="tags"?"Related Artists":"In Channels",f=v==="tags"?e.querySelector(".artists"):e.querySelector(".channels"),E!==null?ve(l,E,f):f.innerHTML=`<b>${l}</b><br>None found`})})}function Se(t){return t.includes('id="soundcloud-uid')?{src:"/wp-content/themes/ultrafunk/inc/img/soundcloud_icon.png",class:"type-soundcloud"}:V(t.match(ue))}function be(t,e,n,s){let r={},i=`<b>${t}</b>`;n.forEach(o=>{D(o.title.rendered,r,ce);let l=Se(o.content.rendered),f=l?.uid!==void 0?`data-term-uid="${l.uid}"`:"";i+=`
    <div class="track">
      <div class="thumbnail ${l.class}" data-term-url="${o.link}" data-term-slug="${e}" ${f} title="Play Track">
        <img src="${l.src}">
      </div>
      <div class="artist-title text-nowrap-ellipsis">
        <a href="${o.link}" title="Go to track"><span><b>${r.artist}</b></span><br><span>${r.title}</span></a>
      </div>
    </div>`}),s.innerHTML=i}function ve(t,e,n){let s=`<b>${t}</b><br>`;e.forEach(r=>s+=`<a href="${H(r.link)}">${r.name}</a>, `),n.innerHTML=s.slice(0,s.length-2)}var M=p("index"),h={},te={smoothScrolling:!1,settingsUpdatedEvent:"settingsUpdated",fullscreenElementEvent:"fullscreenElement"},a={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{M.log("DOMContentLoaded"),ne(),Ee(),a.introBanner!==null&&we(),document.getElementById("termlist-container")!==null&&Z(h),a.siteContentSearch!==null&&(a.siteContentSearch.focus(),a.siteContentSearch.setSelectionRange(9999,9999)),Te(),document.addEventListener(te.settingsUpdatedEvent,()=>{ne(),F(h),C(d.UF_TRACKS_PER_PAGE,h.user.tracksPerPage,60*60*24*365*5)}),document.addEventListener(te.fullscreenElementEvent,t=>a.fullscreenTarget=t.fullscreenTarget),document.addEventListener("keydown",Ce)});function ne(){M.log("readSettings()"),h=O(d.UF_SITE_SETTINGS,_,!0),M.log(h)}function Ee(){M.log("initIndex()"),a.siteHeader=document.getElementById("site-header"),a.introBanner=document.getElementById("intro-banner"),a.siteContent=document.getElementById("site-content"),a.siteContentSearch=document.querySelector("#site-content form input.search-field"),U(h),A.init(),m.init(),b.addEventListener(),ke.addEventListener()}function Ce(t){if(t.repeat===!1&&t.ctrlKey===!1&&t.altKey===!1)switch(t.key){case"Escape":m.isVisible()&&(t.preventDefault(),m.toggle());return}if(h.user.keyboardShortcuts&&t.repeat===!1&&t.ctrlKey===!1&&t.altKey===!1)switch(t.key){case"c":case"C":P()&&(t.preventDefault(),m.toggle());break;case"L":P()&&re()&&(j.toggle(t),b.trigger());break;case"s":case"S":P()&&Le()&&(t.preventDefault(),A.toggle());break;case"T":P()&&re()&&q.toggle(t);break;case"ArrowLeft":t.shiftKey&&I()&&se(navigationVars.prev);break;case"ArrowRight":t.shiftKey&&I()&&se(navigationVars.next);break}}function P(){return A.isVisible()===!1&&a.siteContentSearch!==document.activeElement}function re(){return document.body.classList.contains("page-settings")===!1}function Le(){return a.fullscreenTarget===null}function I(){return document.body.classList.contains("no-playback")}function se(t){t!=null&&t.length>0&&(window.location.href=t)}function we(){B("localStorage")&&typeof bannerProperty!="undefined"&&bannerProperty!==null&&h.priv.banners[bannerProperty]&&(a.introBanner.style.display="block",b.trigger(),x("#intro-banner .intro-banner-close-button","click",()=>{a.introBanner.style.display="",a.siteContent.style.marginTop="",h.priv.banners[bannerProperty]=!1}))}function Te(){if(document.querySelector(".nav-bar-title .go-back-to")!==null){let t="";if(document.referrer.length===0)t="Previous Page";else{let e=new URL(decodeURIComponent(document.referrer));if(e.search.length!==0)t="Search Results";else if(e.pathname.length>1){let n=e.pathname.slice(-1)==="/"?1:0,s=e.pathname.slice(1,e.pathname.length-n).replace(/-/gi," ").split("/");s.forEach((r,i)=>t+=i+1<s.length?r+" / ":r)}}document.querySelectorAll("#site-navigation .nav-bar-title").forEach(e=>{e.querySelector(".go-back-title").textContent=t.length>0?t:"Ultrafunk (home)",e.querySelector(".go-back-to").style.opacity=1})}}var m=(()=>{let t=new ResizeObserver(i),e={navMenu:null,modalOverlay:null},n=!1;return{isVisible(){return n},scrolledTop(){e.navMenu.style.display=""},init:s,toggle:r};function s(){e.navMenu=document.querySelector("#site-navigation .nav-menu-outer"),e.modalOverlay=document.getElementById("nav-menu-modal-overlay"),w(".nav-menu-toggle","click",r),e.modalOverlay.addEventListener("click",r),e.modalOverlay.addEventListener("transitionend",o),t.observe(e.navMenu.querySelector(".menu-primary-menu-container"))}function r(){a.siteHeader.classList.contains("sticky-nav-up")?n?e.navMenu.style.display="none":e.navMenu.style.display="flex":a.siteHeader.classList.contains("sticky-nav-down")===!1&&a.siteHeader.classList.toggle("hide-nav-menu")}function i(l){n=l[0].contentRect.height!==0,n?(e.modalOverlay.className="",e.modalOverlay.classList.add("show"),setTimeout(()=>e.modalOverlay.classList.add("fadein"),50)):e.modalOverlay.classList.add("fadeout")}function o(){n===!1&&(e.modalOverlay.className="",e.navMenu.style.display="")}})(),A=(()=>{let t=new Event("allowKeyboardShortcuts"),e=new Event("denyKeyboardShortcuts"),n={searchContainer:null,searchField:null,brandingContainer:null},s=!1;return{isVisible(){return s},init:r,toggle:i,hide:o};function r(){n.searchContainer=document.getElementById("search-container"),n.searchField=n.searchContainer.querySelector(".search-field"),n.brandingContainer=a.siteHeader.querySelector("div.site-branding-container"),w(".nav-search-toggle","click",i),w(".nav-search-toggle","mousedown",c=>c.preventDefault()),n.searchField.addEventListener("blur",o),n.searchField.addEventListener("keydown",c=>{c.key==="Escape"&&(c.stopPropagation(),o())})}function i(){l()?f():o()}function o(){s&&v(!1,t,"","search")}function l(){return n.searchContainer.style.display.length===0?!(a.siteHeader.offsetHeight===0||$(R.SITE_MAX_WIDTH_MOBILE)&&a.siteHeader.querySelector(".nav-bar-container-mobile-top").offsetHeight===0&&a.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetHeight===0):!1}function f(){E(),v(!0,e,"flex","clear"),n.searchField.focus(),n.searchField.setSelectionRange(9999,9999)}function v(c,g,ie,ae){s=c,document.dispatchEvent(g),n.searchContainer.style.display=ie,document.querySelectorAll("div.nav-search-toggle i").forEach(oe=>oe.textContent=ae),s?document.getElementById("playback-controls").classList.add("hide"):document.getElementById("playback-controls").classList.remove("hide")}function E(){let c={};if($(R.SITE_MAX_WIDTH_MOBILE))n.brandingContainer.offsetHeight!==0?c.top=n.brandingContainer.offsetTop:c.top=a.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetTop,c=new DOMRect(63,c.top+3,document.body.clientWidth-63,30);else if(n.brandingContainer.offsetHeight!==0){let g=n.brandingContainer.getBoundingClientRect();c=new DOMRect(g.left,g.top+10,g.right,g.height-20)}else{let g=a.siteHeader.querySelector(".nav-bar-container").getBoundingClientRect();c=new DOMRect(g.left+105,g.top+2,g.right-105,g.height-4)}n.searchContainer.style.left=`${c.left}px`,n.searchContainer.style.top=`${c.top}px`,n.searchContainer.style.width=`${c.width-c.left}px`,n.searchContainer.style.height=`${c.height}px`}})(),b=(()=>{let t=0;return{getHeaderHeight(){return t},addEventListener:e,trigger:n};function e(){n(),window.addEventListener("resize",n)}function n(){I()?t=T("--site-header-height-no-playback"):t=T("--site-header-height"),a.introBanner!==null&&a.introBanner.style.display.length!==0&&(a.introBanner.style.marginTop=`${t}px`,a.siteContent.style.marginTop=`${T("--site-content-margin-top")}px`)}})(),ke=(()=>{let t=0,e=!1;return{addEventListener:n};function n(){s(),window.addEventListener("scroll",s)}function s(){let l=window.pageYOffset,f=Math.round(b.getHeaderHeight()>150?b.getHeaderHeight()/2:b.getHeaderHeight()/3);l<1?r():l>f&&l>t?i():o(),A.hide(),t=l}function r(){a.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),a.siteHeader.classList.add("hide-nav-menu"),m.scrolledTop()}function i(){e===!1&&(e=!0,S(a.siteHeader,"sticky-nav-up","sticky-nav-down"))}function o(){e===!0&&(e=!1,S(a.siteHeader,"sticky-nav-down","sticky-nav-up")),m.isVisible()&&m.toggle()}})();
//# sourceMappingURL=index.js.map
