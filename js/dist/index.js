import{c as re,e as qe,h,i as Re,k as S,l as N,m as ve,n as O,p as se,q as M,r as v,s as Ue,t as Ee,u as Te}from"./chunk.FSKXDVD4.js";function j(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function D(e,t="",n=60*60*24*365,i="/"){document.cookie=`${e}=${t}; Max-Age=${n}; Path=${i}; Secure; SameSite=Strict`}function R(e,t){try{localStorage.setItem(e,t)}catch(n){qe.error(n)}}var he=v("modal"),p={id:"modal"},me=`
  <div id="${p.id}-dialog" tabindex="-1">
    <div class="${p.id}-container">
      <div class="${p.id}-header">
        <div class="${p.id}-title"></div>
        <div class="${p.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
      </div>
      <div class="${p.id}-body"></div>
    </div>
  </div>
`,g={overlay:null,container:null,body:null},q=null;function K(e,t,n){he.log(`showModal(): ${e}`),pe(),q=n,ye(t),g.container.querySelector(`.${p.id}-title`).innerHTML=e,g.overlay.classList.add("show"),g.overlay.addEventListener("keydown",B),g.overlay.focus(),Y(!0)}function pe(){g.container===null&&(document.body.insertAdjacentHTML("beforeend",me),g.overlay=document.getElementById(`${p.id}-dialog`),g.container=g.overlay.querySelector(`.${p.id}-container`),g.body=g.overlay.querySelector(`.${p.id}-body`),g.overlay.addEventListener("click",e=>{e.target===g.overlay&&$()}),g.overlay.addEventListener("animationend",()=>{g.overlay.classList.contains("hide")&&(g.overlay.className="",Y(!1))}),g.overlay.querySelector(`.${p.id}-close-button`).addEventListener("click",$))}function ye(e){let t="";e.forEach(n=>t+=`<div id="${n.id}" class="${p.id}-single-choice">${n.description}</div>`),g.body.innerHTML=t,e.forEach(n=>g.body.querySelector(`#${n.id}`).addEventListener("click",be))}function be(){$(),setTimeout(()=>q(this.id),150)}function B(e){e.stopPropagation(),e.key==="Escape"&&$()}function $(){g.overlay.removeEventListener("keydown",B),g.overlay.classList.replace("show","hide")}function Y(e){let t=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow=e?"hidden":"",document.body.style.paddingRight=e?`${t}px`:"",document.getElementById("site-header").style.paddingRight=e?`${t}px`:""}var w=v("site-interaction"),b=document.documentElement.classList,k={};function W(e){w.log("init()"),k=e,_.init(),I.init(),S(".entry-meta-controls .track-share-control","click",Se)}function G(e){k=e,_.setCurrent(),I.setCurrent()}function Se(e){let t=e.target.getAttribute("data-artist-track-title"),n=e.target.getAttribute("data-track-url");H.show({string:t,filterString:!0,url:n})}function J(e,t,n){let i=Object.values(e).find(o=>o.id===t);return i!==void 0?i:n}function V(e,t){let n=Object.values(e).findIndex(o=>o.id===t.id),i=Object.keys(e);return n+1<i.length?e[i[n+1]]:e[i[0]]}var _=(()=>{let e={},t={toggle:null},n={toggleId:"#footer-site-theme-toggle",prefDarkScheme:"(prefers-color-scheme: dark)"},i={light:{id:"light",text:"light",class:"site-theme-light"},dark:{id:"dark",text:"dark",class:"site-theme-dark"},auto:{id:"auto",text:"auto"}};return{init:o,setCurrent:r,toggle:c};function o(){t.toggle=document.querySelector(n.toggleId),window.matchMedia(n.prefDarkScheme).addEventListener("change",a),S(n.toggleId,"click",c),r()}function r(){e=J(i,k.user.theme,i.auto),f()}function a(){e.id===i.auto.id&&f()}function c(l){l.preventDefault(),e=V(i,e),k.user.theme=e.id,f()}function f(){let l=e;e.id===i.auto.id&&(l=window.matchMedia(n.prefDarkScheme).matches?i.dark:i.light),R(h.UF_SITE_THEME,l.id),d(l)}function d(l){b.contains(l.class)===!1&&(w.log(`updateDOM() - newSiteTheme: ${l.id}`),b.remove(i.light.class,i.dark.class),b.add(l.class)),t.toggle.querySelector("span").textContent=e.text}})(),I=(()=>{let e={},t={toggle:null},n={toggleId:"#footer-track-layout-toggle",minWidth:`(max-width: ${ve("--site-track-layout-min-width")})`},i={list:{id:"list",text:"list",class:"track-layout-list"},twoColumn:{id:"2-column",text:"2 column",class:"track-layout-2-column"},threeColumn:{id:"3-column",text:"3 / 4 column",class:"track-layout-3-column"}};return{init:o,setCurrent:r,toggle:c};function o(){t.toggle=document.querySelector(n.toggleId),window.matchMedia(n.minWidth).addEventListener("change",a),S(n.toggleId,"click",c),r()}function r(){e=J(i,k.user.trackLayout,i.threeColumn),t.toggle.querySelector("span").textContent=e.text,f()}function a(l){b.contains("user-layout")&&(l.matches?b.remove(e.class):b.add(e.class))}function c(l){l.preventDefault(),e=V(i,e),k.user.trackLayout=e.id,f(),l.type==="click"&&t.toggle.scrollIntoView()}function f(){R(h.UF_TRACK_LAYOUT,e.id),d()}function d(){b.contains("user-layout")&&b.contains(e.class)===!1&&(w.log(`updateDOM() - newTrackLayout: ${e.id}`),b.remove(i.list.class,i.twoColumn.class,i.threeColumn.class),window.matchMedia(n.minWidth).matches===!1&&b.add(e.class)),t.toggle.querySelector("span").textContent=e.text}})(),H=(()=>{let e=/\s{1,}[–·-]\s{1,}/i,t,n,i,o,r;return{show:a};function a(d){({title:t="Share / Play Track",string:n=null,filterString:i=!1,url:o=null,verb:r="Play"}=d),K(t,c(r),f)}function c(d){return[{id:"copyToClipboardId",description:"<b>Copy Link</b> to Clipboard"},{id:"shareOnEmailId",description:"<b>Share</b> on Email"},{id:"amazonMusicId",description:`<b>${d}</b> on Amazon Music`},{id:"appleMusicId",description:`<b>${d}</b> on Apple Music`},{id:"spotifyId",description:`<b>${d}</b> on Spotify`},{id:"tidalId",description:`<b>${d}</b> on Tidal`},{id:"youTubeMusicId",description:`<b>${d}</b> on YouTube Music`}]}function f(d){w.log(`singleChoiceListClick(): ${d} - title: "${t}" - string: "${n}" - filterString: ${i} - url: ${o} - verb: ${r}`);let l=i?encodeURIComponent(n.replace(e," ")):encodeURIComponent(n);switch(d){case"copyToClipboardId":navigator.clipboard.writeText(o).then(()=>{N("Track link copied to clipboard",3)},u=>{w.error(`shareModal.copyToClipboard() failed because ${u}`),N("Unable to copy Track link to clipboard",5)});break;case"shareOnEmailId":window.location.href=`mailto:?subject=${encodeURIComponent(n)}&body=${o}%0d%0a`;break;case"amazonMusicId":window.open(`https://music.amazon.com/search/${l}`,"_blank");break;case"appleMusicId":window.open(`https://music.apple.com/ca/search?term=${l}`,"_blank");break;case"spotifyId":window.open(`https://open.spotify.com/search/${l}`,"_blank");break;case"tidalId":window.open(`https://google.com/search?q=${l}%20site:tidal.com`,"_blank");break;case"youTubeMusicId":window.open(`https://music.youtube.com/search?q=${l}`,"_blank");break}}})();var C=v("term-rest"),m={};function z(e,t,n,i){t in m?i(m[t].posts):(C.log(`fetchPosts() - termType: ${e} - termId: ${t} - maxItems: ${n}`),fetch(`/wp-json/wp/v2/posts?${e}=${t}&per_page=${n}&_fields=title,link,content,tags,categories`).then(o=>o.ok?o.json():(C.error(o),null)).then(o=>{m[t]={posts:o},i(o)}).catch(o=>{C.warn(o),i(null)}))}function X(e,t,n,i){if("categories"in m[t]&&"tags"in m[t])i("categories",m[t].categories),i("tags",m[t].tags);else{let o=[],r=[];e.forEach(a=>{o.push.apply(o,a.categories),r.push.apply(r,a.tags)}),r=r.filter(a=>a!==t),Q("categories",t,[...new Set(o)],n,i),Q("tags",t,[...new Set(r)],n,i)}}function Q(e,t,n,i,o){n.length>0?(C.log(`fetchMetadata() - termType: ${e} - termIds: ${n.length>0?n:"Empty"} - maxItems: ${i}`),fetch(`/wp-json/wp/v2/${e}?include=${n.join(",")}&per_page=${i}&_fields=link,name`).then(r=>r.ok?r.json():(C.error(r),null)).then(r=>{m[t][e]=r,o(e,r)}).catch(r=>{C.warn(r),o(null)})):(m[t][e]=null,o(e,null))}function Z(){m=JSON.parse(sessionStorage.getItem(h.UF_TERMLIST_CACHE)),m===null&&(m={})}function ee(){sessionStorage.setItem(h.UF_TERMLIST_CACHE,JSON.stringify(m))}function te(){sessionStorage.removeItem(h.UF_TERMLIST_CACHE)}function ne(){return Object.keys(m).length>0}var ke=v("termlist"),Ce=/\s{1,}[–·-]\s{1,}|\s{1,}(&#8211;)\s{1,}/i,Le=/(?<=src=").*?(?=[?"])/i;function oe(){ke.log("init()"),document.getElementById("termlist-container").addEventListener("click",e=>{let t=e.target.closest("div.play-button");if(t!==null)return P(e,t.querySelector("a").href);let n=e.target.closest("div.shuffle-button");if(n!==null)return P(e,n.querySelector("a").href);let i=e.target.closest("div.share-find-button");if(i!==null)return $e(i);if(e.target.closest("div.termlist-header")!==null)return _e(e);let r=e.target.closest("div.thumbnail");if(r!==null)return P(e,r.getAttribute("data-track-url"));if(e.target.closest("a")!==null)return ie()}),we()}function ie(){if(ne()){let e={pageUrl:window.location.href,scrollPos:Math.round(window.pageYOffset),openTermIds:[]};document.querySelectorAll(".termlist-entry").forEach(t=>{t.classList.contains("open")&&e.openTermIds.push(t.id)}),sessionStorage.setItem(h.UF_TERMLIST_STATE,JSON.stringify(e)),ee()}}function we(){if(Z(),performance.navigation.type!==performance.navigation.TYPE_RELOAD){let e=JSON.parse(sessionStorage.getItem(h.UF_TERMLIST_STATE));e!==null&&e.pageUrl===window.location.href?(history.scrollRestoration="manual",e.openTermIds.forEach(t=>document.getElementById(t).querySelector("div.termlist-header").click()),window.scroll({top:e.scrollPos,left:0,behavior:"auto"})):history.scrollRestoration="auto"}sessionStorage.removeItem(h.UF_TERMLIST_STATE),te()}function P(e,t){e.preventDefault(),ie(),e.shiftKey===!1&&sessionStorage.setItem(h.UF_AUTOPLAY,"true"),window.location.href=t}function $e(e){let t=e.getAttribute("data-term-type"),n=e.getAttribute("data-term-name"),i=e.getAttribute("data-term-url");H.show({title:`Share / Find ${t}`,string:n,url:i,verb:"Find"})}function _e(e){let t=e.target.closest("div.termlist-entry"),n=t.querySelector("div.expand-toggle span"),i=t.querySelector("div.termlist-body"),o=i.style.display.length!==0;M(t,o?"open":"closed",o?"closed":"open"),n.innerText=o?"expand_more":"expand_less",i.style.display=o?"":"flex",o||Ie(t,i)}function Ie(e,t){let n=document.getElementById("termlist-container").getAttribute("data-term-type"),i=parseInt(e.getAttribute("data-term-id")),o=n==="categories";z(n,i,o?10:50,r=>{let a=o?"Latest Tracks":"All Tracks",c=t.querySelector(".body-left");r!==null?Me(a,r,c):c.innerHTML="<b>Error!</b><br>Unable to fetch track data...",!o&&r!==null&&X(r,i,50,(f,d)=>{a=f==="tags"?"Related Artists":"In Channels",c=f==="tags"?t.querySelector(".artists"):t.querySelector(".channels"),d!==null?xe(a,d,c):c.innerHTML=`<b>${a}</b><br>None found`})})}function Ae(e){return e.includes('id="soundcloud-uid')?{src:"/wp-content/themes/ultrafunk/inc/img/soundcloud_icon.png",class:"type-soundcloud"}:Te(e.match(Le))}function Me(e,t,n){let i={},o={},r=`<b>${e}</b>`;t.forEach(a=>{Ee(a.title.rendered,i,Ce),o=Ae(a.content.rendered),r+=`
    <div class="track">
      <div class="thumbnail ${o.class}" data-track-url="${a.link}" title="Play Track">
        <img src="${o.src}">
        <div class="thumbnail-overlay"><span class="material-icons">play_arrow</span></div>
      </div>
      <div class="artist-title text-nowrap-ellipsis">
        <a href="${a.link}" title="Go to track"><span><b>${i.artist}</b></span><br><span>${i.title}</span></a>
      </div>
    </div>`}),n.innerHTML=r}function xe(e,t,n){let i=`<b>${e}</b><br>`;t.forEach(o=>i+=`<a href="${o.link}">${o.name}</a>, `),n.innerHTML=i.slice(0,i.length-2)}var x=v("index"),E={},ae={smoothScrolling:!1,settingsUpdatedEvent:"settingsUpdated",fullscreenTrackEvent:"fullscreenTrack"},s={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{x.log("DOMContentLoaded"),le(),He(),s.introBanner!==null&&Pe(),document.getElementById("termlist-container")!==null&&oe(),s.siteContentSearch!==null&&(s.siteContentSearch.focus(),s.siteContentSearch.setSelectionRange(9999,9999)),Oe()});document.addEventListener(ae.settingsUpdatedEvent,()=>{le(),G(E),D(h.UF_TRACKS_PER_PAGE,E.user.tracksPerPage,60*60*24*365*5)});document.addEventListener(ae.fullscreenTrackEvent,e=>s.fullscreenTarget=e.fullscreenTarget);function le(){x.log("readSettings()"),E=Ue(h.UF_SITE_SETTINGS,Re,!0),x.log(E)}function He(){x.log("initIndex()"),s.siteHeader=document.getElementById("site-header"),s.introBanner=document.getElementById("intro-banner"),s.siteContent=document.getElementById("site-content"),s.siteContentSearch=document.querySelector("#site-content form input.search-field"),W(E),A.init(),T.init(),L.addEventListener(),Fe.addEventListener()}document.addEventListener("keydown",e=>{if(e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"Escape":T.isVisible()&&(e.preventDefault(),T.toggle());return}if(E.user.keyboardShortcuts&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"c":case"C":U()&&(e.preventDefault(),T.toggle());break;case"L":U()&&ce()&&(I.toggle(e),L.trigger());break;case"s":case"S":U()&&je()&&(e.preventDefault(),A.toggle());break;case"T":U()&&ce()&&_.toggle(e);break;case"ArrowLeft":e.shiftKey&&F()&&de(navigationVars.prevUrl);break;case"ArrowRight":e.shiftKey&&F()&&de(navigationVars.nextUrl);break}});function U(){return A.isVisible()===!1&&s.siteContentSearch!==document.activeElement}function ce(){return document.body.classList.contains("page-settings")===!1}function je(){return s.fullscreenTarget===null}function F(){return document.body.classList.contains("no-playback")}function de(e){e!==null&&(window.location.href=e)}function Pe(){j("localStorage")&&typeof bannerProperty!="undefined"&&bannerProperty!==null&&E.priv.banners[bannerProperty]&&(s.introBanner.style.display="block",L.trigger(),S("#intro-banner .intro-banner-close-button","click",()=>{s.introBanner.style.display="",s.siteContent.style.marginTop="",E.priv.banners[bannerProperty]=!1}))}function Oe(){if(document.querySelector(".nav-bar-title .go-back-to")!==null){let e="";if(document.referrer.length===0)e="Previous Page";else{let t=new URL(decodeURIComponent(document.referrer));if(t.search.length!==0)e="Search Results";else if(t.pathname.length>1){let n=t.pathname.slice(-1)==="/"?1:0,i=t.pathname.slice(1,t.pathname.length-n).replace(/-/gi," ").split("/");i.forEach((o,r)=>e+=r+1<i.length?o+" / ":o)}}document.querySelectorAll("#site-navigation .nav-bar-title").forEach(t=>{t.querySelector(".go-back-title").textContent=e.length>0?e:"Ultrafunk (home)",t.querySelector(".go-back-to").style.opacity=1})}}var T=(()=>{let e=new ResizeObserver(r),t={navMenu:null,modalOverlay:null},n=!1;return{isVisible(){return n},scrolledTop(){t.navMenu.style.display=""},init:i,toggle:o};function i(){t.navMenu=document.querySelector("#site-navigation .nav-menu-outer"),t.modalOverlay=document.getElementById("nav-menu-modal-overlay"),S(".nav-menu-toggle","click",o),t.modalOverlay.addEventListener("click",o),t.modalOverlay.addEventListener("transitionend",a),e.observe(t.navMenu.querySelector(".menu-primary-menu-container"))}function o(){s.siteHeader.classList.contains("sticky-nav-up")?n?t.navMenu.style.display="none":t.navMenu.style.display="flex":s.siteHeader.classList.contains("sticky-nav-down")===!1&&s.siteHeader.classList.toggle("hide-nav-menu")}function r(c){n=c[0].contentRect.height!==0,n?(t.modalOverlay.className="",t.modalOverlay.classList.add("show"),setTimeout(()=>t.modalOverlay.classList.add("fadein"),50)):t.modalOverlay.classList.add("fadeout")}function a(){n===!1&&(t.modalOverlay.className="",t.navMenu.style.display="")}})(),A=(()=>{let e=new Event("allowKeyboardShortcuts"),t=new Event("denyKeyboardShortcuts"),n={searchContainer:null,searchField:null,brandingContainer:null},i=!1;return{isVisible(){return i},init:o,toggle:r,hide:a};function o(){n.searchContainer=document.getElementById("search-container"),n.searchField=n.searchContainer.querySelector(".search-field"),n.brandingContainer=s.siteHeader.querySelector("div.site-branding-container"),S(".nav-search-toggle","click",r),S(".nav-search-toggle","mousedown",u=>u.preventDefault()),n.searchField.addEventListener("blur",a),n.searchField.addEventListener("keydown",u=>{u.key==="Escape"&&(u.stopPropagation(),a())})}function r(){c()?f():a()}function a(){i&&d(!1,e,"","search")}function c(){return n.searchContainer.style.display.length===0?!(s.siteHeader.offsetHeight===0||se(re.SITE_MAX_WIDTH_MOBILE)&&s.siteHeader.querySelector(".nav-bar-container-mobile-top").offsetHeight===0&&s.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetHeight===0):!1}function f(){l(),d(!0,t,"flex","clear"),n.searchField.focus(),n.searchField.setSelectionRange(9999,9999)}function d(u,y,ue,ge){i=u,document.dispatchEvent(y),n.searchContainer.style.display=ue,document.querySelectorAll("div.nav-search-toggle i").forEach(fe=>fe.textContent=ge),i?document.getElementById("playback-controls").classList.add("hide"):document.getElementById("playback-controls").classList.remove("hide")}function l(){let u={};if(se(re.SITE_MAX_WIDTH_MOBILE))n.brandingContainer.offsetHeight!==0?u.top=n.brandingContainer.offsetTop:u.top=s.siteHeader.querySelector(".nav-bar-container-mobile-up").offsetTop,u=new DOMRect(63,u.top+3,document.body.clientWidth-63,30);else if(n.brandingContainer.offsetHeight!==0){let y=n.brandingContainer.getBoundingClientRect();u=new DOMRect(y.left,y.top+10,y.right,y.height-20)}else{let y=s.siteHeader.querySelector(".nav-bar-container").getBoundingClientRect();u=new DOMRect(y.left+105,y.top+2,y.right-105,y.height-4)}n.searchContainer.style.left=`${u.left}px`,n.searchContainer.style.top=`${u.top}px`,n.searchContainer.style.width=`${u.width-u.left}px`,n.searchContainer.style.height=`${u.height}px`}})(),L=(()=>{let e=0;return{getHeaderHeight(){return e},addEventListener:t,trigger:n};function t(){n(),window.addEventListener("resize",n)}function n(){F()?e=O("--site-header-height-no-playback"):e=O("--site-header-height"),s.introBanner!==null&&s.introBanner.style.display.length!==0&&(s.introBanner.style.marginTop=`${e}px`,s.siteContent.style.marginTop=`${O("--site-content-margin-top")}px`)}})(),Fe=(()=>{let e=0,t=!1;return{addEventListener:n};function n(){i(),window.addEventListener("scroll",i)}function i(){let c=window.pageYOffset,f=Math.round(L.getHeaderHeight()>150?L.getHeaderHeight()/2:L.getHeaderHeight()/3);c<1?o():c>f&&c>e?r():a(),A.hide(),e=c}function o(){s.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),s.siteHeader.classList.add("hide-nav-menu"),T.scrolledTop()}function r(){t===!1&&(t=!0,M(s.siteHeader,"sticky-nav-up","sticky-nav-down"))}function a(){t===!0&&(t=!1,M(s.siteHeader,"sticky-nav-down","sticky-nav-up")),T.isVisible()&&T.toggle()}})();
//# sourceMappingURL=index.js.map
