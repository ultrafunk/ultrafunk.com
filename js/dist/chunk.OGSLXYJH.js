var F=!1,y=class{constructor(e="unknown"){this.moduleName=U(e.toUpperCase(),20,".")}isDebug(){return F}warn(e){console.warn(`${this.moduleName}:`,e)}error(e){console.error(`${this.moduleName}:`,e)}},_=class extends y{constructor(e){super(e)}log(e){console.log(`${this.moduleName}:`,e)}logEventLog(e,a,r){let s=[];for(let i=0;i<e.length;i++){let l={eventSource:this.getObjectKeyForValue(a,e[i].eventSource),eventType:this.getObjectKeyForValue(r,e[i].eventType),uId:e[i].uId,timeStamp:e[i].timeStamp};s.push(l)}this.log(s)}getObjectKeyForValue(e,a){return Object.keys(e).find(r=>e[r]===a)}},L=class extends y{constructor(e){super(e)}log(){}logEventLog(){}getObjectKeyForValue(){}};function v(t){return F===!0?new _(t):new L(t)}function U(t,e,a){return t.length>e?t.slice(0,e):t.padEnd(e,a)}var b=v("settings"),f=1,o=2,I=3,n={version:{description:"",type:f,values:[1,999999],default:23,valueStrings:[]},user:{keyboardShortcuts:{description:"Keyboard Shortcuts",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},masterVolume:{description:"Master Volume",type:f,values:[0,25,50,75,100],default:100,valueStrings:["0%","25%","50%","75%","100%"]},masterMute:{description:"Master Mute",type:o,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoPlay:{description:"Autoplay next track",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoCrossfade:{description:"Auto Crossfade to next track",type:o,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoCrossfadeLength:{description:"Auto Crossfade Length",type:f,values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},autoCrossfadeCurve:{description:"Auto Crossfade Curve",type:f,values:[0,1],default:1,valueStrings:["EQUAL POWER","LINEAR"]},autoScroll:{description:"Autoscroll to next track",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},smoothScrolling:{description:"Smooth Scrolling to next track",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoExitFullscreen:{description:"Exit Fullscreen on next track",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},animateNowPlayingIcon:{description:"Animate Playing Track Icon",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoResumePlayback:{description:"Auto Resume Playback on focus",type:o,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackCrossfade:{description:"Track to Track Crossfade",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},trackCrossfadeLength:{description:"Track to Track Crossfade Length",type:f,values:[5,10,15,20,25,30],default:10,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},trackCrossfadeCurve:{description:"Track to Track Crossfade Curve",type:f,values:[0,1],default:0,valueStrings:["EQUAL POWER","LINEAR"]},timeRemainingWarning:{description:"Time Remaining Warning",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},timeRemainingSeconds:{description:"Time Remaining Warning Seconds",type:f,values:[15,30,45,60],default:60,valueStrings:["15 sec","30 sec","45 sec","60 sec"]},autoExitFsOnWarning:{description:"Exit Fullscreen on Time Warning",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},keepMobileScreenOn:{description:"Keep Mobile Screen On when playing",type:o,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackTimesOnMobile:{description:"Show Track Times on mobile",type:o,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackThumbnailOnMobile:{description:"Show Track Thumbnail on mobile",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},priv:{storageChangeSync:{description:"",type:o,values:[!0,!1],default:!1,valueStrings:[]},continueAutoPlay:{description:"",type:o,values:[!0,!1],default:!1,valueStrings:[]},tips:{showLeftArrowHint:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]},showRightArrowHint:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]},showDetailsHint:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]},showTrackImageHint:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]}}}},re={version:n.version.default,user:{keyboardShortcuts:n.user.keyboardShortcuts.default,masterVolume:n.user.masterVolume.default,masterMute:n.user.masterMute.default,autoPlay:n.user.autoPlay.default,autoCrossfade:n.user.autoCrossfade.default,autoCrossfadeLength:n.user.autoCrossfadeLength.default,autoCrossfadeCurve:n.user.autoCrossfadeCurve.default,autoScroll:n.user.autoScroll.default,smoothScrolling:n.user.smoothScrolling.default,autoExitFullscreen:n.user.autoExitFullscreen.default,animateNowPlayingIcon:n.user.animateNowPlayingIcon.default,autoResumePlayback:n.user.autoResumePlayback.default,trackCrossfade:n.user.trackCrossfade.default,trackCrossfadeLength:n.user.trackCrossfadeLength.default,trackCrossfadeCurve:n.user.trackCrossfadeCurve.default,timeRemainingWarning:n.user.timeRemainingWarning.default,timeRemainingSeconds:n.user.timeRemainingSeconds.default,autoExitFsOnWarning:n.user.autoExitFsOnWarning.default,keepMobileScreenOn:n.user.keepMobileScreenOn.default,trackTimesOnMobile:n.user.trackTimesOnMobile.default,trackThumbnailOnMobile:n.user.trackThumbnailOnMobile.default},priv:{storageChangeSync:n.priv.storageChangeSync.default,continueAutoPlay:n.priv.continueAutoPlay.default,tips:{showLeftArrowHint:n.priv.tips.showLeftArrowHint.default,showRightArrowHint:n.priv.tips.showRightArrowHint.default,showDetailsHint:n.priv.tips.showDetailsHint.default,showTrackImageHint:n.priv.tips.showTrackImageHint.default}}},d={version:{description:"",type:f,values:[1,999999],default:7,valueStrings:[]},user:{theme:{description:"Theme",type:I,values:["light","dark","auto"],default:"auto",valueStrings:["LIGHT","DARK","AUTO / SYSTEM"]},trackLayout:{description:"Track Layout",type:I,values:["list","2-column","3-column"],default:"3-column",valueStrings:["LIST","2 COLUMN","3 / 4 COLUMN"]},tracksPerPage:{description:"Tracks Per Page for Search &amp; Shuffle",type:f,values:[...Array(22).keys()].map(t=>t+3),default:12,valueStrings:[...Array(22).keys()].map(t=>`${t+3}`)},keyboardShortcuts:{description:"Keyboard Shortcuts",type:o,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},priv:{storageChangeSync:{description:"",type:o,values:[!0,!1],default:!1,valueStrings:[]},banners:{showFrontpageIntro:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]},showPremiumIntro:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]},showPromoIntro:{description:"",type:o,values:[!0,!1],default:!0,valueStrings:[]}}}},ae={version:d.version.default,user:{theme:d.user.theme.default,trackLayout:d.user.trackLayout.default,tracksPerPage:d.user.tracksPerPage.default,keyboardShortcuts:d.user.keyboardShortcuts.default},priv:{storageChangeSync:d.priv.storageChangeSync.default,banners:{showFrontpageIntro:d.priv.banners.showFrontpageIntro.default,showPremiumIntro:d.priv.banners.showPremiumIntro.default,showPromoIntro:d.priv.banners.showPromoIntro.default}}};function O(t,e){let a=0;return r(t,e),a;function r(s,i){for(let l in s)if(s&&i&&typeof s[l]=="object"&&typeof i[l]=="object")r(s[l],i[l]);else if(i[l]!==void 0)B(s,i[l],s[l],l)&&a++;else throw`'${l}' ${typeof s[l]=="object"?"object":"property"} is not in schema`}}function B(t,e,a,r){switch(e.type){case f:if(Number.isInteger(a)===!1||a<e.values[0]||a>e.values[e.values.length-1])return b.warn(`validate() - '${r}' has invalid value: ${a} ('${r}' is type: INTEGER - min: ${e.values[0]} - max: ${e.values[e.values.length-1]}) -- setting default value: ${e.default}`),t[r]=e.default,!0;break;case o:if(a!==!0&&a!==!1)return b.warn(`validate() - '${r}' has invalid value: ${a} ('${r}' is type: BOOLEAN) -- setting default value: ${e.default}`),t[r]=e.default,!0;break;case I:if(typeof a!="string")return b.warn(`validate() - '${r}' has invalid value: ${a} ('${r}' is type: STRING) -- setting default value: ${e.default}`),t[r]=e.default,!0;break;default:return b.warn(`validate() - '${r}' has unknown type: ${e.type}`),!0}}var A=v("utils"),m={SITE_MIN_WIDTH_WIDE:1,SITE_MAX_WIDTH:2,SITE_MAX_WIDTH_MOBILE:3},D=window.matchMedia(`(min-width: ${k("--site-min-width-wide")})`),G=window.matchMedia(`(max-width: ${k("--site-max-width")})`),j=window.matchMedia(`(max-width: ${k("--site-max-width-mobile")})`);function oe(t,e,a,r=null){let s=document.querySelectorAll(t);s.forEach(i=>{i.addEventListener(e,l=>a(l,r))})}function k(t,e=document.documentElement){let a=getComputedStyle(e).getPropertyValue(t);return a.length!==0?a=a.replace(/'|"/g,"").trim():A.error(`getCssPropString(${t}): Returned CSS property string is empty`),a}function ue(t,e=document.documentElement){let a=k(t,e),r=NaN;return a.length!==0&&(r=parseInt(a)),isNaN(r)&&A.error(`getCssPropValue(${t}): Returned CSS property value is NaN`),r}function N(t){switch(t){case m.SITE_MIN_WIDTH_WIDE:return D.matches;case m.SITE_MAX_WIDTH:return G.matches;case m.SITE_MAX_WIDTH_MOBILE:return j.matches}return!1}function ie(t,e,a){t.classList.remove(e),t.classList.add(a)}var Y=v("snackbar"),g={id:"snackbar"},J=`
  <div id="${g.id}">
    <div class="${g.id}-container">
      <div class="${g.id}-message"></div>
      <div class="${g.id}-action-button"></div>
      <div class="${g.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
    </div>
  </div>
`,u={snackbar:null,actionButton:null,closeButton:null},E=0,P=null,S=null,T=-1,h=-1;function fe(t,e=5,a=null,r=null,s=null){return Y.log(`showSnackbar(): ${t} (${e} sec.)`),X(),C(),u.snackbar.querySelector(`.${g.id}-message`).innerHTML=t,u.snackbar.classList.add("show"),u.actionButton.style.display="none",S=s,a!==null&&r!==null?(P=r,u.actionButton.style.display="block",u.actionButton.textContent=a,u.actionButton.addEventListener("click",M)):N(m.SITE_MAX_WIDTH_MOBILE)?u.closeButton.style.paddingLeft="10px":u.closeButton.style.paddingLeft="20px",e!==0&&(T=setTimeout(()=>{u.snackbar.classList.add("hide"),h=setTimeout(()=>{u.snackbar.className="",S!==null&&S()},450)},e*1e3)),++E}function X(){u.snackbar===null&&(document.body.insertAdjacentHTML("beforeend",J),u.snackbar=document.getElementById(g.id),u.actionButton=u.snackbar.querySelector(`.${g.id}-action-button`),u.closeButton=u.snackbar.querySelector(`.${g.id}-close-button`),u.closeButton.addEventListener("click",()=>{S!==null&&S(),C(!0)}))}function M(){P(),C(!0)}function q(){return u.snackbar!==null&&u.snackbar.classList.length===1&&u.snackbar.classList.contains("show")}function ge(t=0){q()&&((E===0||E===t)&&(u.snackbar.classList.add("hide"),h=setTimeout(()=>u.snackbar.className="",450)))}function C(t=!1){T!==-1&&(clearTimeout(T),T=-1),h!==-1&&(clearTimeout(h),h=-1),u.actionButton.removeEventListener("click",M),t&&u.snackbar.classList.remove("show")}var c=v("storage"),R={},x={UF_PLAYBACK_SETTINGS:"UF_PLAYBACK_SETTINGS",UF_SITE_SETTINGS:"UF_SITE_SETTINGS",UF_SITE_THEME:"UF_SITE_THEME",UF_TRACK_LAYOUT:"UF_TRACK_LAYOUT",UF_TRACKS_PER_PAGE:"UF_TRACKS_PER_PAGE"};function Q(t,e=null,a=!1){c.log(`readJson(): ${t} - ${e} - ${a}`);let r=localStorage.getItem(t),s=null;if(r===null)return a&&e!==null&&p(t,e),e;try{s=JSON.parse(r)}catch(i){c.error(i),e!==null&&(s=e)}return s}function p(t,e){c.log(`writeJson(): ${t} - ${e}`);try{localStorage.setItem(t,JSON.stringify(e))}catch(a){c.error(a)}}function z(t,e,a){c.log(`mergeSettings(): Merging ${a} from version ${t.version} to version ${e.version}`);let r={version:e.version};return w(t,e,r),H(r,e),r}function w(t,e,a){for(let r in e)typeof e[r]=="object"&&(t&&typeof t[r]=="object"?(c.log(`mergeDeep() - Merging: ${r}`),a[r]={...e[r],...t[r]},w(t[r],e[r],a[r])):(c.log(`mergeDeep() - Copying: ${r}`),a[r]={...e[r]},w({},e[r],a[r])))}function H(t,e){for(let a in t)a in e===!1&&(c.log(`cleanDeep() - Deleting: ${a} (${typeof t[a]=="object"?"object":"property"})`),delete t[a]),typeof t[a]=="object"&&H(t[a],e[a])}function V(t,e,a){try{let r=0;switch(t){case x.UF_PLAYBACK_SETTINGS:r=O(e,n);break;case x.UF_SITE_SETTINGS:r=O(e,d);break}r>0&&p(t,e)}catch(r){return c.error(`validateSettings() exception: ${r} -- using default settings`),p(t,a),a}return e}function Se(t,e=null,a=!1){let r=Q(t,e,a);if(r!==null&&e!==null&&r.version!==void 0){let s=r;return r.version<e.version&&(c.log(r),s=z(r,e,t),p(t,s),c.log(s)),W(t,V(t,s,e))}return e!==null?(c.warn(`readWriteSettingsProxy() - Failed for: ${t} -- using default settings`),p(t,e),W(t,e)):(c.error(`readWriteSettingsProxy() - Fatal error for: ${t} -- unable to read settings!`),null)}var W=(t,e)=>{let a={get(r,s,i){if(s in r){let l=Reflect.get(r,s,i);return typeof l=="object"?new Proxy(l,a):l}c.error(`onSettingsChange(): Get unknown property: ${s}`)},set(r,s,i,l){if(s in r){let $=Reflect.get(r,s,l);return i!==$&&(Reflect.set(r,s,i),p(t,e),Z(s,$,i)),!0}return c.error(`onSettingsChange(): Set unknown property: ${s}`),!0}};return new Proxy(e,a)};function Z(t,e,a){t in R&&(c.log(`callSettingsObserver() for property: ${t} - oldValue: ${e} - newValue: ${a}`),R[t].forEach(r=>r(e,a)))}export{m as a,c as b,re as c,R as d,x as e,ae as f,oe as g,fe as h,k as i,ue as j,ge as k,N as l,ie as m,v as n,Se as o};
//# sourceMappingURL=chunk.JRY5OYOC.js.map
