const N=!1;class w{constructor(e="unknown"){this.caller=B(e.toUpperCase(),20,".")}isDebug(){return N}warn(e){console.warn(`${this.caller}:`,e)}error(e){console.error(`${this.caller}:`,e)}}class R extends w{constructor(e){super(e)}log(e){console.log(`${this.caller}:`,e)}logEventLog(e,t,r){const n=[];for(let s=0;s<e.length;s++){const u={eventSource:this.getObjectKeyForValue(t,e[s].eventSource),eventType:this.getObjectKeyForValue(r,e[s].eventType),uId:e[s].uId,timeStamp:e[s].timeStamp};n.push(u)}this.log(n)}getObjectKeyForValue(e,t){return Object.keys(e).find(r=>e[r]===t)}}class M extends w{constructor(e){super(e)}log(){}logEventLog(){}getObjectKeyForValue(){}}function d(e){return N===!0?new R(e):new M(e)}function B(e,t,r){return e.length>t?e.slice(0,t):e.padEnd(t,r)}const m=d("settings"),a={INTEGER:"integer",BOOLEAN:"boolean",STRING:"string"},i={keyboardShortcuts:{description:"Keyboard Shortcuts",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},masterVolume:{description:"Master Volume",type:a.INTEGER,values:[0,25,50,75,100],default:100,valueStrings:["0%","25%","50%","75%","100%"]},masterMute:{description:"Master Mute",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoPlay:{description:"Autoplay next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoCrossfade:{description:"Auto Crossfade to next track",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoCrossfadeLength:{description:"Auto Crossfade Length",type:a.INTEGER,values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},autoCrossfadeCurve:{description:"Auto Crossfade Curve",type:a.INTEGER,values:[0,1],default:1,valueStrings:["EQUAL POWER","LINEAR"]},autoScroll:{description:"Autoscroll to next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},smoothScrolling:{description:"Smooth Scrolling to next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoExitFullscreen:{description:"Exit Fullscreen on next track",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},animateNowPlayingIcon:{description:"Animate Playing Track Icon",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoResumePlayback:{description:"Auto Resume Playback on focus",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackCrossfade:{description:"Track to Track Crossfade",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},trackCrossfadeLength:{description:"Track to Track Crossfade Length",type:a.INTEGER,values:[5,10,15,20,25,30],default:10,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},trackCrossfadeCurve:{description:"Track to Track Crossfade Curve",type:a.INTEGER,values:[0,1],default:0,valueStrings:["EQUAL POWER","LINEAR"]},timeRemainingWarning:{description:"Time Remaining Warning",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},timeRemainingSeconds:{description:"Time Remaining Warning Seconds",type:a.INTEGER,values:[15,30,45,60],default:60,valueStrings:["15 sec","30 sec","45 sec","60 sec"]},autoExitFsOnWarning:{description:"Exit Fullscreen on Time Warning",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},keepMobileScreenOn:{description:"Keep Mobile Screen On when playing",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackTimesOnMobile:{description:"Show Track Times on mobile",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackThumbnailOnMobile:{description:"Show Track Thumbnail on mobile",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},f={continueAutoPlay:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!1,valueStrings:[]},showLeftArrowHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showRightArrowHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showDetailsHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showTrackImageHint:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]}},Z={version:22,storageChangeSync:!1,user:{keyboardShortcuts:i.keyboardShortcuts.default,masterVolume:i.masterVolume.default,masterMute:i.masterMute.default,autoPlay:i.autoPlay.default,autoCrossfade:i.autoCrossfade.default,autoCrossfadeLength:i.autoCrossfadeLength.default,autoCrossfadeCurve:i.autoCrossfadeCurve.default,autoScroll:i.autoScroll.default,smoothScrolling:i.smoothScrolling.default,autoExitFullscreen:i.autoExitFullscreen.default,animateNowPlayingIcon:i.animateNowPlayingIcon.default,autoResumePlayback:i.autoResumePlayback.default,trackCrossfade:i.trackCrossfade.default,trackCrossfadeLength:i.trackCrossfadeLength.default,trackCrossfadeCurve:i.trackCrossfadeCurve.default,timeRemainingWarning:i.timeRemainingWarning.default,timeRemainingSeconds:i.timeRemainingSeconds.default,autoExitFsOnWarning:i.autoExitFsOnWarning.default,keepMobileScreenOn:i.keepMobileScreenOn.default,trackTimesOnMobile:i.trackTimesOnMobile.default,trackThumbnailOnMobile:i.trackThumbnailOnMobile.default},priv:{continueAutoPlay:f.continueAutoPlay.default,showLeftArrowHint:f.showLeftArrowHint.default,showRightArrowHint:f.showRightArrowHint.default,showDetailsHint:f.showDetailsHint.default,showTrackImageHint:f.showTrackImageHint.default}},h={theme:{description:"Theme",type:a.STRING,values:["light","dark","auto"],default:"auto",valueStrings:["LIGHT","DARK","AUTO / SYSTEM"]},trackLayout:{description:"Track Layout",type:a.STRING,values:["list","2-column","3-column"],default:"3-column",valueStrings:["LIST","2 COLUMN","3 / 4 COLUMN"]},tracksPerPage:{description:"Tracks Per Page for Search &amp; Shuffle",type:a.INTEGER,values:[...Array(22).keys()].map(e=>e+3),default:12,valueStrings:[...Array(22).keys()].map(e=>`${e+3}`)},keyboardShortcuts:{description:"Keyboard Shortcuts",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},y={showFrontpageIntro:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showPremiumIntro:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]},showPromoIntro:{description:"",type:a.BOOLEAN,values:[!0,!1],default:!0,valueStrings:[]}},ee={version:6,storageChangeSync:!1,user:{theme:h.theme.default,trackLayout:h.trackLayout.default,tracksPerPage:h.tracksPerPage.default,keyboardShortcuts:h.keyboardShortcuts.default},priv:{banners:{showFrontpageIntro:y.showFrontpageIntro.default,showPremiumIntro:y.showPremiumIntro.default,showPromoIntro:y.showPromoIntro.default}}};function te(e,t){Object.entries(e).forEach(([r,n])=>{if(r in t)switch(t[r].type){case a.INTEGER:(Number.isInteger(n)===!1||n<t[r].values[0]||n>t[r].values[t[r].values.length-1])&&(m.warn(`validateSettings() - ${r} has invalid value: ${n} (${r} is type: ${t[r].type} - min: ${t[r].values[0]} - max: ${t[r].values[t[r].values.length-1]}) -- setting default value: ${t[r].default}`),e[r]=t[r].default);break;case a.BOOLEAN:n!==!0&&n!==!1&&(m.warn(`validateSettings() - ${r} has invalid value: ${n} (${r} is type: ${t[r].type}) -- setting default value: ${t[r].default}`),e[r]=t[r].default);break;case a.STRING:break;default:m.warn(`validateSettings() - ${r} has unknown type: ${t[r].type}`)}else m.warn(`validateSettings() - ${r} with value: ${n} is not in schema`)})}const C=d("utils"),p={SITE_MIN_WIDTH_WIDE:1,SITE_MAX_WIDTH:2,SITE_MAX_WIDTH_MOBILE:3},x=window.matchMedia(`(min-width: ${E("--site-min-width-wide")})`),U=window.matchMedia(`(max-width: ${E("--site-max-width")})`),G=window.matchMedia(`(max-width: ${E("--site-max-width-mobile")})`);function ae(e,t,r,n=null){const s=document.querySelectorAll(e);s.forEach(u=>{u.addEventListener(t,g=>r(g,n))})}function E(e,t=document.documentElement){let r=getComputedStyle(t).getPropertyValue(e);return r.length!==0?r=r.replace(/'|"/g,"").trim():C.error(`getCssPropString(${e}): Returned CSS property string is empty`),r}function se(e,t=document.documentElement){const r=E(e,t);let n=NaN;return r.length!==0&&(n=parseInt(r)),isNaN(n)&&C.error(`getCssPropValue(${e}): Returned CSS property value is NaN`),n}function F(e){switch(e){case p.SITE_MIN_WIDTH_WIDE:return x.matches;case p.SITE_MAX_WIDTH:return U.matches;case p.SITE_MAX_WIDTH_MOBILE:return G.matches}return!1}function oe(e,t,r){e.classList.remove(t),e.classList.add(r)}const H=d("snackbar"),c={id:"snackbar"},W=`
  <div id="${c.id}">
    <div class="${c.id}-container">
      <div class="${c.id}-message"></div>
      <div class="${c.id}-action-button"></div>
      <div class="${c.id}-close-button"><span class="material-icons" title="Dismiss">close</span></div>
    </div>
  </div>
`,o={snackbar:null,actionButton:null,closeButton:null};let I=0,_=null,S=null,O=-1,v=-1;function ce(e,t=5,r=null,n=null,s=null){return H.log(`showSnackbar(): ${e} (${t} sec.)`),D(),k(),o.snackbar.querySelector(`.${c.id}-message`).innerHTML=e,o.snackbar.classList.add("show"),o.actionButton.style.display="none",S=s,r!==null&&n!==null?(_=n,o.actionButton.style.display="block",o.actionButton.textContent=r,o.actionButton.addEventListener("click",P)):F(p.SITE_MAX_WIDTH_MOBILE)?o.closeButton.style.paddingLeft="10px":o.closeButton.style.paddingLeft="20px",t!==0&&(O=setTimeout(()=>{o.snackbar.classList.add("hide"),v=setTimeout(()=>{o.snackbar.className="",S!==null&&S()},450)},t*1e3)),++I}function D(){o.snackbar===null&&(document.body.insertAdjacentHTML("beforeend",W),o.snackbar=document.getElementById(c.id),o.actionButton=o.snackbar.querySelector(`.${c.id}-action-button`),o.closeButton=o.snackbar.querySelector(`.${c.id}-close-button`),o.closeButton.addEventListener("click",()=>{S!==null&&S(),k(!0)}))}function P(){_(),k(!0)}function K(){return o.snackbar!==null&&o.snackbar.classList.length===1&&o.snackbar.classList.contains("show")}function de(e=0){K()&&((I===0||I===e)&&(o.snackbar.classList.add("hide"),v=setTimeout(()=>o.snackbar.className="",450)))}function k(e=!1){O!==-1&&(clearTimeout(O),O=-1),v!==-1&&(clearTimeout(v),v=-1),o.actionButton.removeEventListener("click",P),e&&o.snackbar.classList.remove("show")}const l=d("storage"),$={},b={UF_PLAYBACK_SETTINGS:"UF_PLAYBACK_SETTINGS",UF_SITE_SETTINGS:"UF_SITE_SETTINGS",UF_SITE_THEME:"UF_SITE_THEME",UF_TRACK_LAYOUT:"UF_TRACK_LAYOUT",UF_TRACKS_PER_PAGE:"UF_TRACKS_PER_PAGE"};function J(e,t=null,r=!1){l.log(`readJson(): ${e} - ${t} - ${r}`);const n=localStorage.getItem(e);let s=null;if(n===null)return r&&t!==null&&A(e,t),t;try{s=JSON.parse(n)}catch(u){l.error(u),t!==null&&(s=t)}return s}function A(e,t){l.log(`writeJson(): ${e} - ${t}`);try{localStorage.setItem(e,JSON.stringify(t))}catch(r){l.error(r)}}function V(e,t,r){l.log(`mergeObjectProps(): Merging ${r} from version ${e.version} to version ${t.version}`);const n={...e,...t};return n.user={...t.user,...e.user},n.priv={...t.priv,...e.priv},r===b.UF_SITE_SETTINGS?n.priv.banners={...t.priv.banners,...e.priv.banners}:r===b.UF_PLAYBACK_SETTINGS,n}function T(e,t){Object.keys(e).forEach(r=>{r in t===!1&&(l.log(`deleteOrphanedKeys(): Deleting '${r}'`),delete e[r])})}function Y(e,t,r){T(e,t),T(e.user,t.user),T(e.priv,t.priv),r===b.UF_SITE_SETTINGS?T(e.priv.banners,t.priv.banners):r===b.UF_PLAYBACK_SETTINGS}function pe(e,t=null,r=!1){const n=J(e,t,r);if(n!==null&&t!==null){let s=null;return n.version<t.version?(l.log(n),s=V(n,t,e),Y(s,t,e),l.log(s),A(e,s)):s=n,j(e,s)}return l.error(`readWriteSettingsProxy() failed for: ${e}`),null}const j=(e,t)=>{const r={get(n,s,u){if(s in n){const g=Reflect.get(n,s,u);return typeof g=="object"?new Proxy(g,r):g}l.error(`onSettingsChange(): Get unknown property: ${s}`)},set(n,s,u,g){if(s in n){const L=Reflect.get(n,s,g);return u!==L&&(Reflect.set(n,s,u),A(e,t),q(s,L,u)),!0}return l.error(`onSettingsChange(): Set unknown property: ${s}`),!0}};return new Proxy(t,r)};function q(e,t,r){e in $&&(l.log(`callSettingsObserver() for property: ${e} - oldValue: ${t} - newValue: ${r}`),$[e].forEach(n=>n(t,r)))}function Se(e,t){let r=null;if(e.key===t)try{r=JSON.parse(e.oldValue)}catch(n){l.error(n)}return r}export{l as a,$ as b,p as c,i as d,b as e,f,Z as g,h,y as i,ee as j,ae as k,te as l,ce as m,E as n,se as o,de as p,F as q,oe as r,d as s,pe as t,Se as u};
//# sourceMappingURL=chunk.W3YP46RE.js.map
