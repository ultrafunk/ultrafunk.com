{
  "version": 3,
  "sources": ["../src/shared/debuglogger.js", "../src/shared/settings.js", "../src/shared/storage.js", "../src/shared/utils.js", "../src/shared/snackbar.js", "../src/shared/modal.js", "../src/site/interaction.js", "../src/playback/crossfade.js", "../src/playback/mediaplayers.js"],
  "sourcesContent": ["//\r\n// Debug logging helper classes\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nexport {\r\n  newInstance,\r\n  logErrorOnServer,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst DEBUG = false;\r\n\r\n\r\n// ************************************************************************************************\r\n// DebugLog parent and child classes\r\n// ************************************************************************************************\r\n\r\nclass DebugLog\r\n{\r\n  constructor(moduleName = 'unknown')\r\n  {\r\n    this.moduleName = padString(moduleName.toUpperCase(), 20, '.');\r\n  }\r\n  \r\n  isDebug()   { return DEBUG;                               }\r\n  warn(data)  { console.warn(`${this.moduleName}:`,  data); }\r\n  error(data) { console.error(`${this.moduleName}:`, data); }\r\n}\r\n\r\nclass DevBuild extends DebugLog\r\n{\r\n  constructor(moduleName) { super(moduleName); }\r\n\r\n  log(data)\r\n  {\r\n    console.log(`${this.moduleName}:`, data);\r\n  }\r\n\r\n  logEventLog(eventLog, eventSource, eventType)\r\n  {\r\n    const entries = [];\r\n    \r\n    for (let i = 0; i < eventLog.length; i++)\r\n    {\r\n      const data = {\r\n        eventSource: this.getObjectKeyForValue(eventSource, eventLog[i].eventSource),\r\n        eventType:   this.getObjectKeyForValue(eventType, eventLog[i].eventType),\r\n        uId:         eventLog[i].uId,\r\n        timeStamp:   eventLog[i].timeStamp,\r\n      };\r\n\r\n      entries.push(data);\r\n    }\r\n    \r\n    this.log(entries);\r\n  }\r\n\r\n  getObjectKeyForValue(object, value)\r\n  {\r\n    return Object.keys(object).find(key => object[key] === value);\r\n  }\r\n}\r\n\r\nclass ProdBuild extends DebugLog\r\n{\r\n  constructor(moduleName) { super(moduleName); }\r\n\r\n  log()                  {}\r\n  logEventLog()          {}\r\n  getObjectKeyForValue() {}\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// DebugLog class support functions\r\n// ************************************************************************************************\r\n\r\nfunction newInstance(moduleName)\r\n{\r\n  return ((DEBUG === true) ? new DevBuild(moduleName) : new ProdBuild(moduleName));\r\n}\r\n\r\nfunction padString(string, maxLength, padChar)\r\n{\r\n  return ((string.length > maxLength) ? string.slice(0, maxLength) : string.padEnd(maxLength, padChar));\r\n}\r\n\r\nfunction logErrorOnServer(errorCategory, errorData)\r\n{\r\n  const eventAction = errorData.mediaUrl + ' | ' + errorData.mediaTitle;\r\n  \r\n  console.log(`DEBUGLOGGER.........: logErrorOnServer(): ${errorCategory} - ${eventAction}`);\r\n  \r\n  gtag('event', eventAction, // eslint-disable-line no-undef\r\n  {\r\n    event_category: errorCategory,\r\n    event_label:    'Ultrafunk Client Error',\r\n  });\r\n}\r\n", "//\r\n// Schemas, objects and validation for playback and site settings\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from './debuglogger.js';\r\n\r\n\r\nexport {\r\n  INTEGER as TYPE_INTEGER,\r\n  BOOLEAN as TYPE_BOOLEAN,\r\n  STRING  as TYPE_STRING,\r\n  playbackSchema,\r\n  playbackSettings,\r\n  siteSchema,\r\n  siteSettings,\r\n  presetsSchema,\r\n  presetList,\r\n  validateSettings,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('settings');\r\n\r\nconst INTEGER = 1;\r\nconst BOOLEAN = 2;\r\nconst STRING  = 3;\r\n\r\n\r\n// ************************************************************************************************\r\n// Playback\r\n// ************************************************************************************************\r\n\r\nconst playbackSchema = {\r\n  version: { description: '', type: INTEGER, values: [1, 999999], default: 27, valueStrings: [] },\r\n  user: {\r\n    keyboardShortcuts:       { description: 'Keyboard Shortcuts',                 type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    masterVolume:            { description: 'Master Volume',                      type: INTEGER, values: [0, 25, 50, 75, 100],    default: 100,   valueStrings: ['0%', '25%', '50%', '75%', '100%'] },\r\n    masterMute:              { description: 'Master Mute',                        type: BOOLEAN, values: [true, false],           default: false, valueStrings: ['ON', 'OFF'] },\r\n    autoplay:                { description: 'Autoplay next track',                type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    autoCrossfade:           { description: 'Auto Crossfade to next track',       type: BOOLEAN, values: [true, false],           default: false, valueStrings: ['ON', 'OFF'] },\r\n    autoCrossfadeLength:     { description: 'Auto Crossfade Length',              type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 20,    valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n    autoCrossfadeCurve:      { description: 'Auto Crossfade Curve',               type: INTEGER, values: [0, 1],                  default: 1,     valueStrings: ['Equal Power', 'Linear'] },\r\n    autoScroll:              { description: 'Autoscroll to next track',           type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    smoothScrolling:         { description: 'Smooth Scrolling to next track',     type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    autoExitFullscreen:      { description: 'Exit Fullscreen on next track',      type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    animateNowPlayingIcon:   { description: 'Animate Playing Track Icon',         type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    autoResumePlayback:      { description: 'Auto Resume Playback on focus',      type: BOOLEAN, values: [true, false],           default: false, valueStrings: ['ON', 'OFF'] },\r\n    trackCrossfadeDefPreset: { description: 'Track Crossfade Def. Preset',        type: INTEGER, values: [0, 1, 2, 3, 4, 5],      default: 1,     valueStrings: ['10 sec EqPow (1)', '20 sec EqPow (2)', '30 sec EqPow (3)', '10 sec Linear (4)', '20 sec Linear (5)', '30 sec Linear (6)'] },\r\n    timeRemainingWarning:    { description: 'Time Remaining Warning',             type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    timeRemainingSeconds:    { description: 'Time Remaining Warning Seconds',     type: INTEGER, values: [15, 30, 45, 60],        default: 60,    valueStrings: ['15 sec', '30 sec', '45 sec', '60 sec'] },\r\n    autoExitFsOnWarning:     { description: 'Exit Fullscreen on Time Warning',    type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n    keepMobileScreenOn:      { description: 'Keep Mobile Screen On when playing', type: BOOLEAN, values: [true, false],           default: false, valueStrings: ['ON', 'OFF'] },\r\n    trackTimesOnMobile:      { description: 'Show Track Times on mobile',         type: BOOLEAN, values: [true, false],           default: false, valueStrings: ['ON', 'OFF'] },\r\n    trackThumbnailOnMobile:  { description: 'Show Track Thumbnail on mobile',     type: BOOLEAN, values: [true, false],           default: true,  valueStrings: ['ON', 'OFF'] },\r\n  },\r\n  priv: {\r\n    tips: {\r\n      showLeftArrowHint:  { description: '', type: BOOLEAN, values: [true, false], default: true,  valueStrings: [] },\r\n      showRightArrowHint: { description: '', type: BOOLEAN, values: [true, false], default: true,  valueStrings: [] },\r\n      showDetailsHint:    { description: '', type: BOOLEAN, values: [true, false], default: true,  valueStrings: [] },\r\n      showTrackImageHint: { description: '', type: BOOLEAN, values: [true, false], default: true,  valueStrings: [] },\r\n    },\r\n  }\r\n};\r\n\r\nconst playbackSettings = {\r\n  version: playbackSchema.version.default,\r\n  user: {\r\n    keyboardShortcuts:       playbackSchema.user.keyboardShortcuts.default,\r\n    masterVolume:            playbackSchema.user.masterVolume.default,\r\n    masterMute:              playbackSchema.user.masterMute.default,\r\n    autoplay:                playbackSchema.user.autoplay.default,\r\n    autoCrossfade:           playbackSchema.user.autoCrossfade.default,\r\n    autoCrossfadeLength:     playbackSchema.user.autoCrossfadeLength.default,\r\n    autoCrossfadeCurve:      playbackSchema.user.autoCrossfadeCurve.default,\r\n    autoScroll:              playbackSchema.user.autoScroll.default,\r\n    smoothScrolling:         playbackSchema.user.smoothScrolling.default,\r\n    autoExitFullscreen:      playbackSchema.user.autoExitFullscreen.default,\r\n    animateNowPlayingIcon:   playbackSchema.user.animateNowPlayingIcon.default,\r\n    autoResumePlayback:      playbackSchema.user.autoResumePlayback.default,\r\n    trackCrossfadeDefPreset: playbackSchema.user.trackCrossfadeDefPreset.default,\r\n    timeRemainingWarning:    playbackSchema.user.timeRemainingWarning.default,\r\n    timeRemainingSeconds:    playbackSchema.user.timeRemainingSeconds.default,\r\n    autoExitFsOnWarning:     playbackSchema.user.autoExitFsOnWarning.default,\r\n    keepMobileScreenOn:      playbackSchema.user.keepMobileScreenOn.default,\r\n    trackTimesOnMobile:      playbackSchema.user.trackTimesOnMobile.default,\r\n    trackThumbnailOnMobile:  playbackSchema.user.trackThumbnailOnMobile.default,\r\n  },\r\n  priv: {\r\n    tips: {\r\n      showLeftArrowHint:  playbackSchema.priv.tips.showLeftArrowHint.default,\r\n      showRightArrowHint: playbackSchema.priv.tips.showRightArrowHint.default,\r\n      showDetailsHint:    playbackSchema.priv.tips.showDetailsHint.default,\r\n      showTrackImageHint: playbackSchema.priv.tips.showTrackImageHint.default,\r\n    },\r\n  },\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Site\r\n// ************************************************************************************************\r\n\r\nconst siteSchema = {\r\n  version: { description: '', type: INTEGER, values: [1, 999999], default: 8, valueStrings: [] },\r\n  user: {\r\n    theme:             { description: 'Theme',                                    type: STRING,  values: ['light', 'dark', 'auto'],             default: 'auto',     valueStrings: ['Light', 'Dark', 'Auto / System']         },\r\n  //preferredPlayer:   { description: 'Preferred Player',                         type: INTEGER, values: [0, 1],                                default: 0,          valueStrings: ['Gallery', 'Compact']                     },\r\n  //trackLayout:       { description: 'Gallery Player Track Layout',              type: STRING,  values: ['list', '2-column', '3-column'],      default: '3-column', valueStrings: ['List', '2 Column', '3 / 4 Column']       },\r\n    trackLayout:       { description: 'Track Layout',                             type: STRING,  values: ['list', '2-column', '3-column'],      default: '3-column', valueStrings: ['List', '2 Column', '3 / 4 Column']       },\r\n    tracksPerPage:     { description: 'Tracks Per Page for Search &amp; Shuffle', type: INTEGER, values: [...Array(22).keys()].map(i => i + 3), default: 12,         valueStrings: [...Array(22).keys()].map(i => `${i + 3}`) },\r\n    keyboardShortcuts: { description: 'Keyboard Shortcuts',                       type: BOOLEAN, values: [true, false],                         default: true,       valueStrings: ['ON', 'OFF']                              },\r\n  },\r\n  priv: {\r\n    banners: {\r\n      showFrontpageIntro: { description: '', type: BOOLEAN, values: [true, false], default: true, valueStrings: [] },\r\n      showPremiumIntro:   { description: '', type: BOOLEAN, values: [true, false], default: true, valueStrings: [] },\r\n      showPromoIntro:     { description: '', type: BOOLEAN, values: [true, false], default: true, valueStrings: [] },\r\n    }\r\n  }\r\n};\r\n\r\nconst siteSettings = {\r\n  version: siteSchema.version.default,\r\n  user: {\r\n    theme:             siteSchema.user.theme.default,\r\n  //preferredPlayer:   siteSchema.user.preferredPlayer.default,\r\n    trackLayout:       siteSchema.user.trackLayout.default,\r\n    tracksPerPage:     siteSchema.user.tracksPerPage.default,\r\n    keyboardShortcuts: siteSchema.user.keyboardShortcuts.default,\r\n  },\r\n  priv: {\r\n    banners: {\r\n      showFrontpageIntro: siteSchema.priv.banners.showFrontpageIntro.default,\r\n      showPremiumIntro:   siteSchema.priv.banners.showPremiumIntro.default,\r\n      showPromoIntro:     siteSchema.priv.banners.showPromoIntro.default,\r\n    },\r\n  },\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Presets\r\n// ************************************************************************************************\r\n\r\nconst presetsSchema = {\r\n  version: { description: '', type: INTEGER, values: [1, 999999], default: 1, valueStrings: [] },\r\n  crossfade: [\r\n    {\r\n      name:   { description: 'Preset 1',         type: STRING,  values: [5, 50],                 default: '10 sec EqPow', valueStrings: [] },\r\n      length: { description: 'Crossfade Length', type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 10,             valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n      curve:  { description: 'Crossfade Curve',  type: INTEGER, values: [0, 1],                  default: 0,              valueStrings: ['Equal Power', 'Linear'] },\r\n    },\r\n    {\r\n      name:   { description: 'Preset 2',         type: STRING,  values: [5, 50],                 default: '20 sec EqPow', valueStrings: [] },\r\n      length: { description: 'Crossfade Length', type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 20,             valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n      curve:  { description: 'Crossfade Curve',  type: INTEGER, values: [0, 1],                  default: 0,              valueStrings: ['Equal Power', 'Linear'] },\r\n    },\r\n    {\r\n      name:   { description: 'Preset 3',         type: STRING,  values: [5, 50],                 default: '30 sec EqPow', valueStrings: [] },\r\n      length: { description: 'Crossfade Length', type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 30,             valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n      curve:  { description: 'Crossfade Curve',  type: INTEGER, values: [0, 1],                  default: 0,              valueStrings: ['Equal Power', 'Linear'] },\r\n    },\r\n    {\r\n      name:   { description: 'Preset 4',         type: STRING,  values: [5, 50],                 default: '10 sec Linear', valueStrings: [] },\r\n      length: { description: 'Crossfade Length', type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 10,              valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n      curve:  { description: 'Crossfade Curve',  type: INTEGER, values: [0, 1],                  default: 1,               valueStrings: ['Equal Power', 'Linear'] },\r\n    },\r\n    {\r\n      name:   { description: 'Preset 5',         type: STRING,  values: [5, 50],                 default: '20 sec Linear', valueStrings: [] },\r\n      length: { description: 'Crossfade Length', type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 20,              valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n      curve:  { description: 'Crossfade Curve',  type: INTEGER, values: [0, 1],                  default: 1,               valueStrings: ['Equal Power', 'Linear'] },\r\n    },\r\n    {\r\n      name:   { description: 'Preset 6',         type: STRING,  values: [5, 50],                 default: '30 sec Linear', valueStrings: [] },\r\n      length: { description: 'Crossfade Length', type: INTEGER, values: [5, 10, 15, 20, 25, 30], default: 30,              valueStrings: ['5 sec', '10 sec', '15 sec', '20 sec', '25 sec', '30 sec'] },\r\n      curve:  { description: 'Crossfade Curve',  type: INTEGER, values: [0, 1],                  default: 1,               valueStrings: ['Equal Power', 'Linear'] },\r\n    },\r\n  ],\r\n};\r\n\r\nconst presetList = {\r\n  version: presetsSchema.version.default,\r\n  crossfade: [\r\n    {\r\n      name:   presetsSchema.crossfade[0].name.default,\r\n      length: presetsSchema.crossfade[0].length.default,\r\n      curve:  presetsSchema.crossfade[0].curve.default,\r\n    },\r\n    {\r\n      name:   presetsSchema.crossfade[1].name.default,\r\n      length: presetsSchema.crossfade[1].length.default,\r\n      curve:  presetsSchema.crossfade[1].curve.default,\r\n    },\r\n    {\r\n      name:   presetsSchema.crossfade[2].name.default,\r\n      length: presetsSchema.crossfade[2].length.default,\r\n      curve:  presetsSchema.crossfade[2].curve.default,\r\n    },\r\n    {\r\n      name:   presetsSchema.crossfade[3].name.default,\r\n      length: presetsSchema.crossfade[3].length.default,\r\n      curve:  presetsSchema.crossfade[3].curve.default,\r\n    },\r\n    {\r\n      name:   presetsSchema.crossfade[4].name.default,\r\n      length: presetsSchema.crossfade[4].length.default,\r\n      curve:  presetsSchema.crossfade[4].curve.default,\r\n    },\r\n    {\r\n      name:   presetsSchema.crossfade[5].name.default,\r\n      length: presetsSchema.crossfade[5].length.default,\r\n      curve:  presetsSchema.crossfade[5].curve.default,\r\n    },\r\n  ],\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Validation\r\n// ************************************************************************************************\r\n\r\nfunction validateSettings(settings, schema)\r\n{\r\n  let invalidCount = 0;\r\n\r\n  validateRecursive(settings, schema);\r\n\r\n  return invalidCount;\r\n\r\n  function validateRecursive(settings, schema)\r\n  {\r\n    for (const key in settings)\r\n    {\r\n      if (settings && schema && (typeof settings[key] === 'object') && (typeof schema[key] === 'object'))\r\n      {\r\n        validateRecursive(settings[key], schema[key]);\r\n      }\r\n      else\r\n      {\r\n        if (schema[key] !== undefined)\r\n        {\r\n          if (isEntryInvalid(settings, schema[key], settings[key], key))\r\n            invalidCount++;\r\n        }\r\n        else\r\n        {\r\n          throw(`'${key}' ${(typeof settings[key] === 'object') ? 'object' : 'property'} is not in schema`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction isEntryInvalid(settings, schemaEntry, settingValue, entryKey)\r\n{\r\n  switch (schemaEntry.type)\r\n  {\r\n    case INTEGER:\r\n      if ((Number.isInteger(settingValue) === false) || (settingValue < schemaEntry.values[0]) || (settingValue > schemaEntry.values[schemaEntry.values.length - 1]))\r\n      {\r\n        debug.warn(`validate() - '${entryKey}' has invalid value: ${settingValue} ('${entryKey}' is type: INTEGER - min: ${schemaEntry.values[0]} - max: ${schemaEntry.values[schemaEntry.values.length - 1]}) -- setting default value: ${schemaEntry.default}`);\r\n        settings[entryKey] = schemaEntry.default;\r\n        return true;\r\n      }\r\n      break;\r\n    \r\n    case BOOLEAN:\r\n      if ((settingValue !== true) && (settingValue !== false))\r\n      {\r\n        debug.warn(`validate() - '${entryKey}' has invalid value: ${settingValue} ('${entryKey}' is type: BOOLEAN) -- setting default value: ${schemaEntry.default}`);\r\n        settings[entryKey] = schemaEntry.default;\r\n        return true;\r\n      }\r\n      break;\r\n\r\n    case STRING:\r\n      if (typeof settingValue !== 'string')\r\n      {\r\n        debug.warn(`validate() - '${entryKey}' has invalid value: ${settingValue} ('${entryKey}' is type: STRING) -- setting default value: ${schemaEntry.default}`);\r\n        settings[entryKey] = schemaEntry.default;\r\n        return true;\r\n      }\r\n      break;\r\n\r\n    default:\r\n      debug.warn(`validate() - '${entryKey}' has unknown type: ${schemaEntry.type}`);\r\n      return true;\r\n  }\r\n}\r\n", "//\r\n// Set and get storage values\r\n// Read, write and parse storage JSON data\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from './debuglogger.js';\r\n\r\nimport {\r\n  playbackSchema,\r\n  siteSchema,\r\n  validateSettings as validateSettingsDeep,\r\n} from  './settings.js';\r\n\r\n\r\nexport {\r\n  KEY,\r\n  isAvailable,\r\n  setCookie,\r\n  deleteCookie,\r\n  getValue,\r\n  setValue,\r\n  readJson,\r\n  writeJson,\r\n  readWriteSettingsProxy,\r\n  addSettingsObserver,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug     = debugLogger.newInstance('storage');\r\nconst observers = {};\r\n\r\nconst KEY = {\r\n//sessionStorage keys\r\n  UF_AUTOPLAY:          'UF_AUTOPLAY',\r\n  UF_TERMLIST_CACHE:    'UF_TERMLIST_CACHE',\r\n  UF_TERMLIST_STATE:    'UF_TERMLIST_STATE',\r\n//localStorage keys\r\n  UF_PLAYBACK_SETTINGS: 'UF_PLAYBACK_SETTINGS',\r\n  UF_SITE_SETTINGS:     'UF_SITE_SETTINGS',\r\n  UF_PRESET_LIST:       'UF_PRESET_LIST',\r\n  UF_SITE_THEME:        'UF_SITE_THEME',\r\n  UF_TRACK_LAYOUT:      'UF_TRACK_LAYOUT',\r\n//document.cookie keys\r\n  UF_TRACKS_PER_PAGE:   'UF_TRACKS_PER_PAGE',\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\r\n// ************************************************************************************************\r\n\r\nfunction isAvailable(storageType)\r\n{\r\n  let storage;\r\n\r\n  try\r\n  {\r\n    storage = window[storageType];\r\n    const test = '__storage_test__';\r\n    storage.setItem(test, test);\r\n    storage.removeItem(test);\r\n    return true;\r\n  }\r\n  catch(exception)\r\n  {\r\n    return exception instanceof DOMException && (\r\n      // everything except Firefox\r\n      exception.code === 22 ||\r\n      // Firefox\r\n      exception.code === 1014 ||\r\n      // test name field too, because code might not be present\r\n      // everything except Firefox\r\n      exception.name === 'QuotaExceededError' ||\r\n      // Firefox\r\n      exception.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n      // acknowledge QuotaExceededError only if there's something already stored\r\n      (storage && storage.length !== 0);\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Set and delete cookie key => value pairs\r\n// ************************************************************************************************\r\n\r\nfunction setCookie(keyName, keyValue = '', maxAge = (60 * 60 * 24 * 365), path = '/')\r\n{\r\n  document.cookie = `${keyName}=${keyValue}; Max-Age=${maxAge}; Path=${path}; Secure; SameSite=Strict`;\r\n}\r\n\r\nfunction deleteCookie(keyName, path = '/')\r\n{\r\n  document.cookie = `${keyName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}`;\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// get / set local storage key => value pairs\r\n// ************************************************************************************************\r\n\r\nfunction getValue(keyName, defaultValue = null, setDefault = false)\r\n{\r\n  const keyValue = localStorage.getItem(keyName);\r\n\r\n  if (keyValue === null)\r\n  {\r\n    if (setDefault && (defaultValue !== null))\r\n      setValue(keyName, defaultValue);\r\n\r\n    return defaultValue;\r\n  }\r\n  \r\n  return keyValue;\r\n}\r\n\r\nfunction setValue(keyName, keyValue)\r\n{\r\n  try\r\n  {\r\n    localStorage.setItem(keyName, keyValue);\r\n  }\r\n  catch(exception)\r\n  {\r\n    debug.error(exception);\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Read (parse) and write (stringify) JSON data from local storage\r\n// ************************************************************************************************\r\n\r\nfunction readJson(keyName, defaultValue = null, setDefault = false)\r\n{\r\n  debug.log(`readJson(): ${keyName} - ${defaultValue} - ${setDefault}`);\r\n  \r\n  const keyValue     = localStorage.getItem(keyName);\r\n  let parsedKeyValue = null;\r\n\r\n  if (keyValue === null)\r\n  {\r\n    if (setDefault && (defaultValue !== null))\r\n      writeJson(keyName, defaultValue);\r\n\r\n    return defaultValue;\r\n  }\r\n  else\r\n  {\r\n    try\r\n    {\r\n      parsedKeyValue = JSON.parse(keyValue);\r\n    }\r\n    catch(exception)\r\n    {\r\n      debug.error(exception);\r\n\r\n      // ToDo: Return error state to specify (for the user) that default settings are used??\r\n      if (defaultValue !== null)\r\n        parsedKeyValue = defaultValue;\r\n    }\r\n  }\r\n\r\n  return parsedKeyValue;\r\n}\r\n\r\nfunction writeJson(keyName, keyData)\r\n{\r\n  debug.log(`writeJson(): ${keyName} - ${keyData}`);\r\n\r\n  try\r\n  {\r\n    localStorage.setItem(keyName, JSON.stringify(keyData));\r\n  }\r\n  catch(exception)\r\n  {\r\n    debug.error(exception);\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Recursive merge and cleanup for settings objects on new version\r\n// ************************************************************************************************\r\n\r\nfunction mergeSettings(oldSettings, newSettings, settingsKey)\r\n{\r\n  debug.log(`mergeSettings(): Merging ${settingsKey} from version ${oldSettings.version} to version ${newSettings.version}`);\r\n\r\n  const mergedSettings = { version: newSettings.version };\r\n\r\n  mergeDeep(oldSettings, newSettings, mergedSettings);\r\n  cleanDeep(mergedSettings, newSettings);\r\n\r\n  return mergedSettings;\r\n}\r\n\r\nfunction mergeDeep(oldSettings, newSettings, destination)\r\n{\r\n  for (const key in newSettings)\r\n  {\r\n    if (typeof newSettings[key] === 'object')\r\n    {\r\n      if (oldSettings && (typeof oldSettings[key] === 'object'))\r\n      {\r\n        debug.log(`mergeDeep() - Merging: ${key}`);\r\n        destination[key] = { ...newSettings[key], ...oldSettings[key] };\r\n        mergeDeep(oldSettings[key], newSettings[key], destination[key]);\r\n      }\r\n      else\r\n      {\r\n        debug.log(`mergeDeep() - Copying: ${key}`);\r\n        destination[key] = { ...newSettings[key] };\r\n        mergeDeep({}, newSettings[key], destination[key]);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Delete all orphaned Settings properties / objects that are no longer in use after merge\r\nfunction cleanDeep(mergedSettings, newSettings)\r\n{\r\n  for (const key in mergedSettings)\r\n  {\r\n    if ((key in newSettings) === false)\r\n    {\r\n      debug.log(`cleanDeep() - Deleting: ${key} (${(typeof mergedSettings[key] === 'object') ? 'object' : 'property'})`);\r\n      delete mergedSettings[key];\r\n    }\r\n    \r\n    if (typeof mergedSettings[key] === 'object')\r\n      cleanDeep(mergedSettings[key], newSettings[key]);\r\n  }\r\n}\r\n\r\nfunction validateSettings(settingsKey, settingsObject, defaultSettings)\r\n{\r\n  try\r\n  {\r\n    let invalidSettingsCount = 0;\r\n\r\n    switch(settingsKey)\r\n    {\r\n      case KEY.UF_PLAYBACK_SETTINGS:\r\n        invalidSettingsCount = validateSettingsDeep(settingsObject, playbackSchema);\r\n        break;\r\n\r\n      case KEY.UF_SITE_SETTINGS:\r\n        invalidSettingsCount = validateSettingsDeep(settingsObject, siteSchema);\r\n        break;\r\n    }\r\n\r\n    if (invalidSettingsCount > 0)\r\n      writeJson(settingsKey, settingsObject);\r\n  }\r\n  catch(exception)\r\n  {\r\n    debug.error(`validateSettings() exception: ${exception} -- using default settings`);\r\n\r\n    writeJson(settingsKey, defaultSettings);\r\n\r\n    return defaultSettings;\r\n  }\r\n\r\n  return settingsObject;\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Read and write settings proxy\r\n// ************************************************************************************************\r\n\r\nfunction readWriteSettingsProxy(settingsKey, defaultSettings = null, setDefault = false)\r\n{\r\n  const parsedJson = readJson(settingsKey, defaultSettings, setDefault);\r\n\r\n  if ((parsedJson !== null) && (defaultSettings !== null) && (parsedJson.version !== undefined))\r\n  {\r\n    let settingsObject = parsedJson;\r\n    \r\n    // If version is new, perform settings merge and cleanup\r\n    if (parsedJson.version < defaultSettings.version)\r\n    {\r\n      debug.log(parsedJson);\r\n\r\n      settingsObject = mergeSettings(parsedJson, defaultSettings, settingsKey);\r\n      writeJson(settingsKey, settingsObject);\r\n\r\n      debug.log(settingsObject);\r\n    }\r\n\r\n    return onSettingsChange(settingsKey, validateSettings(settingsKey, settingsObject, defaultSettings));\r\n  }\r\n\r\n  if (defaultSettings !== null)\r\n  {\r\n    debug.warn(`readWriteSettingsProxy() - Failed for: ${settingsKey} -- using default settings`);\r\n\r\n    writeJson(settingsKey, defaultSettings);\r\n\r\n    return onSettingsChange(settingsKey, defaultSettings);\r\n  }\r\n\r\n  debug.error(`readWriteSettingsProxy() - Fatal error for: ${settingsKey} -- unable to read settings!`);\r\n\r\n  return null;\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Proxy traps (handlers) for settings get and set\r\n// ************************************************************************************************\r\n\r\nconst onSettingsChange = (settingsKey, settingsObject) =>\r\n{ \r\n  const handler =\r\n  {\r\n    get(target, property, receiver)\r\n    {\r\n    //debug.log(`onSettingsChange(): Get property: ${property}`);\r\n      \r\n      if (property in target)\r\n      {      \r\n        const value = Reflect.get(target, property, receiver);\r\n        \r\n        if (typeof value === 'object')\r\n          return new Proxy(value, handler);\r\n\r\n        return value;\r\n      }\r\n\r\n      debug.error(`onSettingsChange(): Get unknown property: ${property}`);\r\n    },\r\n    \r\n    set(target, property, newValue, receiver)\r\n    {\r\n    //debug.log(`onSettingsChange(): Set property: ${property}`);\r\n\r\n      if (property in target)\r\n      {\r\n        const oldValue = Reflect.get(target, property, receiver);\r\n\r\n        // Only update and write data if it has changed\r\n        if (newValue !== oldValue)\r\n        {\r\n          Reflect.set(target, property, newValue);\r\n          writeJson(settingsKey, settingsObject);\r\n          callSettingsObservers(property, oldValue, newValue);\r\n        }\r\n\r\n        return true;\r\n      }\r\n\r\n      debug.error(`onSettingsChange(): Set unknown property: ${property}`);\r\n      return true;\r\n    },\r\n  };\r\n\r\n  return new Proxy(settingsObject, handler);\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Add and call settings observers on property changes\r\n// ************************************************************************************************\r\n\r\nfunction addSettingsObserver(property, observer)\r\n{\r\n  debug.log(`addSettingsObserver() for property: ${property}`);\r\n\r\n  if ((property in observers) === false)\r\n    observers[property] = [];\r\n\r\n  observers[property].push(observer);\r\n}\r\n\r\nfunction callSettingsObservers(property, oldValue, newValue)\r\n{\r\n  if (property in observers)\r\n  {\r\n    debug.log(`callSettingsObserver() for property: ${property} - oldValue: ${oldValue} - newValue: ${newValue}`);\r\n    observers[property].forEach((observer) => observer(oldValue, newValue));\r\n  }\r\n}\r\n", "//\r\n// Common utility functions\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from './debuglogger.js';\r\n\r\n\r\nexport {\r\n  MATCH,\r\n  addEventListeners,\r\n  getCssPropString,\r\n  getCssPropValue,\r\n  matchesMedia,\r\n  replaceClass,\r\n  fullscreenElement,\r\n  keyboardShortcuts,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('utils');\r\n\r\nconst MATCH = {\r\n  SITE_MIN_WIDTH_WIDE:   1,\r\n  SITE_MAX_WIDTH:        2,\r\n  SITE_MAX_WIDTH_MOBILE: 3,\r\n};\r\n\r\nconst siteMinWidthWide   = window.matchMedia(`(min-width: ${getCssPropString('--site-min-width-wide')})`);\r\nconst siteMaxWidth       = window.matchMedia(`(max-width: ${getCssPropString('--site-max-width')})`);\r\nconst siteMaxWidthMobile = window.matchMedia(`(max-width: ${getCssPropString('--site-max-width-mobile')})`);\r\n\r\n\r\n// ************************************************************************************************\r\n// Misc. utility functions\r\n// ************************************************************************************************\r\n\r\n// Plain JS function equivalent to jQuery(selectors).eventX();\r\n// Adds event listeners of 'type' to all matching selectors \r\nfunction addEventListeners(selectors, type, listener, data = null)\r\n{\r\n  const elementList = document.querySelectorAll(selectors);\r\n  elementList.forEach(element => { element.addEventListener(type, (event) => listener(event, data)); });\r\n}\r\n\r\nfunction getCssPropString(prop, element = document.documentElement)\r\n{\r\n  let string = getComputedStyle(element).getPropertyValue(prop);\r\n\r\n  if (string.length !== 0)\r\n    string = string.replace(/'|\"/g, '').trim();\r\n  else\r\n    debug.error(`getCssPropString(${prop}): Returned CSS property string is empty`);\r\n\r\n  return string;\r\n}\r\n\r\nfunction getCssPropValue(prop, element = document.documentElement)\r\n{\r\n  const string = getCssPropString(prop, element);\r\n  let value    = NaN;\r\n\r\n  if (string.length !== 0)\r\n    value = parseInt(string);\r\n\r\n  if (isNaN(value))\r\n    debug.error(`getCssPropValue(${prop}): Returned CSS property value is NaN`);\r\n\r\n  return value;\r\n}\r\n\r\n// Match against live CSS media queries defined in style.css\r\nfunction matchesMedia(matchMedia)\r\n{\r\n  switch (matchMedia)\r\n  {\r\n    case MATCH.SITE_MIN_WIDTH_WIDE:\r\n      return siteMinWidthWide.matches;\r\n      \r\n    case MATCH.SITE_MAX_WIDTH:\r\n      return siteMaxWidth.matches;\r\n\r\n    case MATCH.SITE_MAX_WIDTH_MOBILE:\r\n      return siteMaxWidthMobile.matches;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction replaceClass(element, removeClass, addClass)\r\n{\r\n  element.classList.remove(removeClass);\r\n  element.classList.add(addClass);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Fullscreen Element module\r\n// ************************************************************************************************\r\n\r\nconst fullscreenElement = (() =>\r\n{\r\n  const fseEvent = new Event('fullscreenElement');\r\n  let fseTarget  = null;\r\n\r\n  return {\r\n    init,\r\n    enter,\r\n    exit,        \r\n    toggle,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    document.addEventListener('fullscreenchange',       fullscreenChange);\r\n    document.addEventListener('webkitfullscreenchange', fullscreenChange);\r\n  }\r\n\r\n  function fullscreenChange()\r\n  {\r\n    fseTarget = (document.fullscreenElement !== null) ? document.fullscreenElement.id : null;\r\n    fseEvent.fullscreenTarget = fseTarget;\r\n    document.dispatchEvent(fseEvent);\r\n  }\r\n\r\n  function enter(fullscreenElement)\r\n  {\r\n    fullscreenElement.requestFullscreen();\r\n  }\r\n  \r\n  function exit()\r\n  {\r\n    if (fseTarget !== null)\r\n    {\r\n      document.exitFullscreen();\r\n      fseTarget = null;\r\n    }\r\n  }\r\n\r\n  function toggle(fullscreenElement)\r\n  {\r\n    (fseTarget === null) ? enter(fullscreenElement) : exit();\r\n  }\r\n})();\r\n\r\n\r\n// ************************************************************************************************\r\n// Allow / Deny keyboard shortcuts event handling\r\n// ************************************************************************************************\r\n\r\nconst keyboardShortcuts = (() =>\r\n{\r\n  let allow = false;\r\n\r\n  return {\r\n    allow() { return allow; },\r\n    init,\r\n  };\r\n\r\n  function init(settings)\r\n  {\r\n    allow = settings.keyboardShortcuts;\r\n    document.addEventListener('allowKeyboardShortcuts', () => { if (settings.keyboardShortcuts) allow = true;  });\r\n    document.addEventListener('denyKeyboardShortcuts',  () => { if (settings.keyboardShortcuts) allow = false; });\r\n  }\r\n})();\r\n", "//\r\n// Snackbar UI module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger        from './debuglogger.js';\r\nimport { MATCH, matchesMedia } from './utils.js';\r\n\r\n\r\nexport {\r\n  showSnackbar,\r\n  dismissSnackbar,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('snackbar');\r\n\r\nconst mConfig = {\r\n  id: 'snackbar',\r\n};\r\n\r\nconst mTemplate = `\r\n  <div id=\"${mConfig.id}\">\r\n    <div class=\"${mConfig.id}-container\">\r\n      <div class=\"${mConfig.id}-message\"></div>\r\n      <div class=\"${mConfig.id}-action-button\"></div>\r\n      <div class=\"${mConfig.id}-close-button\"><span class=\"material-icons\" title=\"Dismiss\">close</span></div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\nconst mElements = {\r\n  snackbar:     null,\r\n  actionButton: null,\r\n  closeButton:  null,\r\n};\r\n\r\nlet snackbarId       = 0;\r\nlet actionClick      = null;\r\nlet afterClose       = null;\r\nlet visibleTimeoutId = -1;\r\nlet fadeTimeoutId    = -1;\r\n\r\n\r\n// ************************************************************************************************\r\n// \r\n// ************************************************************************************************\r\n\r\nfunction showSnackbar(message, timeout = 5, actionText = null, actionClickCallback = null, afterCloseCallback = null)\r\n{\r\n  debug.log(`showSnackbar(): ${message} (${timeout} sec.)`);\r\n\r\n  init();\r\n  reset();\r\n\r\n  mElements.snackbar.querySelector(`.${mConfig.id}-message`).innerHTML = message;\r\n  mElements.snackbar.classList.add('show');\r\n  mElements.actionButton.style.display = 'none';\r\n  afterClose = afterCloseCallback;\r\n\r\n  if ((actionText !== null) && (actionClickCallback !== null))\r\n  {\r\n    actionClick = actionClickCallback;\r\n    mElements.actionButton.style.display = 'block';\r\n    mElements.actionButton.textContent   = actionText;\r\n    mElements.actionButton.addEventListener('click', actionButtonClick);\r\n  }\r\n  else\r\n  {\r\n    // Fix edge case when actionButton is hidden...\r\n    matchesMedia(MATCH.SITE_MAX_WIDTH_MOBILE) ? mElements.closeButton.style.paddingLeft = '10px' : mElements.closeButton.style.paddingLeft = '20px';\r\n  }\r\n  \r\n  if (timeout !== 0)\r\n  {\r\n    visibleTimeoutId = setTimeout(() =>\r\n    {\r\n      mElements.snackbar.classList.add('hide');\r\n      \r\n      fadeTimeoutId = setTimeout(() =>\r\n      {\r\n        mElements.snackbar.className = '';\r\n\r\n        if (afterClose !== null)\r\n        {\r\n          afterClose();\r\n        }\r\n      }, 450);\r\n    },\r\n    (timeout * 1000));\r\n  }\r\n\r\n  return ++snackbarId;\r\n}\r\n\r\nfunction init()\r\n{\r\n  if (mElements.snackbar === null)\r\n  {\r\n    document.body.insertAdjacentHTML('beforeend', mTemplate);\r\n\r\n    mElements.snackbar     = document.getElementById(mConfig.id);\r\n    mElements.actionButton = mElements.snackbar.querySelector(`.${mConfig.id}-action-button`);\r\n    mElements.closeButton  = mElements.snackbar.querySelector(`.${mConfig.id}-close-button`);\r\n    \r\n    mElements.closeButton.addEventListener('click', () =>\r\n    {\r\n      if (afterClose !== null)\r\n        afterClose();\r\n        \r\n      reset(true);\r\n    });\r\n  }\r\n}\r\n\r\nfunction actionButtonClick()\r\n{\r\n  actionClick();\r\n  reset(true);\r\n}\r\n\r\nfunction isShowing()\r\n{\r\n  return ((mElements.snackbar !== null) && (mElements.snackbar.classList.length === 1) && mElements.snackbar.classList.contains('show'));\r\n}\r\n\r\nfunction dismissSnackbar(dismissId = 0)\r\n{\r\n  if (isShowing())\r\n  {\r\n    if ((snackbarId === 0) || (snackbarId === dismissId))\r\n    {\r\n      mElements.snackbar.classList.add('hide');\r\n      fadeTimeoutId = setTimeout(() => mElements.snackbar.className = '', 450);\r\n    }\r\n  }\r\n}\r\n\r\nfunction reset(hideSnackbar = false)\r\n{\r\n  if (visibleTimeoutId !== -1)\r\n  {\r\n    clearTimeout(visibleTimeoutId);\r\n    visibleTimeoutId = -1;\r\n  }\r\n\r\n  if (fadeTimeoutId !== -1)\r\n  {\r\n    clearTimeout(fadeTimeoutId);\r\n    fadeTimeoutId = -1;\r\n  }\r\n\r\n  mElements.actionButton.removeEventListener('click', actionButtonClick);\r\n\r\n  if (hideSnackbar)\r\n    mElements.snackbar.classList.remove('show');\r\n}\r\n", "//\r\n// Modal dialog UI module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from './debuglogger.js';\r\n\r\n\r\nexport {\r\n  showModal,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('modal');\r\n\r\nconst mConfig = {\r\n  id: 'modal',\r\n};\r\n\r\nconst mTemplate = `\r\n  <div id=\"${mConfig.id}-dialog\" tabindex=\"-1\">\r\n    <div class=\"${mConfig.id}-container\">\r\n      <div class=\"${mConfig.id}-header\">\r\n        <div class=\"${mConfig.id}-title\"></div>\r\n        <div class=\"${mConfig.id}-close-button\"><span class=\"material-icons\" title=\"Dismiss\">close</span></div>\r\n      </div>\r\n      <div class=\"${mConfig.id}-body\"></div>\r\n    </div>\r\n  </div>\r\n`;\r\n\r\nconst mElements = {\r\n  overlay:   null,\r\n  container: null,\r\n  body:      null,\r\n};\r\n\r\nlet selectedClick = null;\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nfunction showModal(title, singleChoiceList, selectedClickCallback)\r\n{\r\n  debug.log(`showModal(): ${title}`);\r\n\r\n  init();\r\n  \r\n  selectedClick = selectedClickCallback;\r\n  setSingleChoiceList(singleChoiceList);\r\n\r\n  mElements.container.querySelector(`.${mConfig.id}-title`).innerHTML = title;\r\n  mElements.overlay.classList.add('show');\r\n  mElements.overlay.addEventListener('keydown', keyDown);\r\n  mElements.overlay.focus();\r\n  disablePageScrolling(true);\r\n}\r\n\r\nfunction init()\r\n{\r\n  if (mElements.container === null)\r\n  {\r\n    document.body.insertAdjacentHTML('beforeend', mTemplate);\r\n    \r\n    mElements.overlay   = document.getElementById(`${mConfig.id}-dialog`);\r\n    mElements.container = mElements.overlay.querySelector(`.${mConfig.id}-container`);\r\n    mElements.body      = mElements.overlay.querySelector(`.${mConfig.id}-body`);\r\n\r\n    mElements.overlay.addEventListener('click', (event) =>\r\n    {\r\n      if (event.target === mElements.overlay)\r\n        close();\r\n    });\r\n\r\n    mElements.overlay.addEventListener('animationend', () =>\r\n    {\r\n      if (mElements.overlay.classList.contains('hide'))\r\n      {\r\n        mElements.overlay.className = '';\r\n        disablePageScrolling(false);\r\n      }\r\n    });\r\n\r\n    mElements.overlay.querySelector(`.${mConfig.id}-close-button`).addEventListener('click', close);\r\n  }\r\n}\r\n\r\nfunction setSingleChoiceList(singleChoiceList)\r\n{\r\n  let listHtml = '';\r\n\r\n  singleChoiceList.forEach(entry => listHtml += `<div id=\"${entry.id}\" class=\"${mConfig.id}-single-choice\">${entry.description}</div>`);\r\n  mElements.body.innerHTML = listHtml;\r\n\r\n  singleChoiceList.forEach(entry => mElements.body.querySelector(`#${entry.id}`).addEventListener('click', singleChoiceListClick));\r\n}\r\n\r\nfunction singleChoiceListClick()\r\n{\r\n  close();\r\n  setTimeout(() => selectedClick(this.id), 150);\r\n}\r\n\r\nfunction keyDown(event)\r\n{\r\n  event.stopPropagation();\r\n\r\n  if (event.key === 'Escape')\r\n    close();\r\n}\r\n\r\nfunction close()\r\n{\r\n  mElements.overlay.removeEventListener('keydown', keyDown);\r\n  mElements.overlay.classList.replace('show', 'hide');\r\n}\r\n\r\nfunction disablePageScrolling(disable)\r\n{\r\n  const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\r\n//document.body.style.touchAction  = disable ? 'none'   : '';\r\n  document.body.style.overflow     = disable ? 'hidden' : '';\r\n  document.body.style.paddingRight = disable ? `${scrollbarWidth}px` : '';\r\n  document.getElementById('site-header').style.paddingRight = disable ? `${scrollbarWidth}px` : '';\r\n}\r\n", "//\r\n// Ultrafunk site interaction\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger  from '../shared/debuglogger.js';\r\nimport * as utils        from '../shared/utils.js';\r\nimport { showModal }     from '../shared/modal.js';\r\nimport { showSnackbar }  from '../shared/snackbar.js';\r\nimport { KEY, setValue } from '../shared/storage.js';\r\n\r\n\r\nexport {\r\n  init,\r\n  settingsUpdated,\r\n  siteTheme,\r\n  trackLayout,\r\n  shareModal,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug         = debugLogger.newInstance('site-interaction');\r\nconst htmlClassList = document.documentElement.classList;\r\nlet settings        = {};\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nfunction init(siteSettings)\r\n{\r\n  debug.log('init()');\r\n\r\n  settings = siteSettings;\r\n\r\n  initPlayerSelection();\r\n  siteTheme.init();\r\n  trackLayout.init();\r\n\r\n  utils.addEventListeners('.entry-meta-controls .track-share-control', 'click', trackShareControlClick);\r\n}\r\n\r\nfunction settingsUpdated(updatedSettings)\r\n{\r\n  settings = updatedSettings;\r\n  siteTheme.setCurrent();\r\n  trackLayout.setCurrent();\r\n}\r\n\r\nfunction trackShareControlClick(event)\r\n{\r\n  const artistTrackTitle = event.target.getAttribute('data-artist-track-title');\r\n  const trackUrl         = event.target.getAttribute('data-track-url');\r\n \r\n  shareModal.show({ string: artistTrackTitle, filterString: true, url: trackUrl });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Player selection handling\r\n// ************************************************************************************************\r\n\r\nfunction initPlayerSelection()\r\n{\r\n  const isCompactPlayer = document.body.classList.contains('player-playlist');\r\n  document.querySelector('#footer-player-toggle span').textContent = isCompactPlayer ? 'Compact' : 'Gallery';\r\n\r\n  utils.addEventListeners('#footer-player-toggle', 'click', (event) =>\r\n  {\r\n    event.preventDefault();\r\n\r\n    // Remove pagination since it does not match between the two players\r\n    const currentUrl = window.location.href.replace(/\\/page\\/(?!0)\\d{1,6}/, '');\r\n\r\n    if (isCompactPlayer)\r\n      window.location.href = currentUrl.replace(/player\\//, '');\r\n    else\r\n      window.location.href = currentUrl.replace(/ultrafunk\\.com\\//, 'ultrafunk.com/player/');\r\n  });\r\n}\r\n\r\n/*\r\nfunction xxx()\r\n{\r\n  const urlParts  = window.location.href.split('/');\r\n  const pageIndex = urlParts.findIndex(part => (part.toLowerCase() === 'page'));\r\n\r\n  if (pageIndex !== -1)\r\n    debug.log(getGotoPageAndTrackId(isCompactPlayer, parseInt(urlParts[pageIndex + 1])));\r\n}\r\n\r\nfunction getGotoPageAndTrackId(isCompactPlayer, currentPage)\r\n{\r\n  const currentTrack      = isCompactPlayer ? getCompactCurrentTrack() : getGalleryCurrentTrack();\r\n  const tracksPerPageFrom = isCompactPlayer ? 36 : document.body.getAttribute('data-tracks-per-page');\r\n  const tracksPerPageTo   = isCompactPlayer ? document.body.getAttribute('data-tracks-per-page') : 36;\r\n  const trackOffset       = currentTrack.number + ((currentPage - 1) * tracksPerPageFrom);\r\n\r\n  return { gotoPage: Math.ceil(trackOffset / tracksPerPageTo), trackId: currentTrack.id };\r\n}\r\n\r\nfunction getCompactCurrentTrack()\r\n{\r\n  const currentTrack = { number: 0, id: null };\r\n  const elements     = document.querySelectorAll('#tracklist-container .track-entry');\r\n  const currentId    = document.querySelector('#tracklist-container .track-entry.current').id;\r\n  \r\n  elements.forEach((element, index) =>\r\n  {\r\n    if (element.id === currentId)\r\n    {\r\n      currentTrack.number = index + 1;\r\n      currentTrack.id     = `track-${element.getAttribute('data-post-id')}`;\r\n    }\r\n  });\r\n\r\n  return currentTrack;\r\n}\r\n\r\nfunction getGalleryCurrentTrack()\r\n{\r\n  return 1;\r\n}\r\n*/\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme and layout settings helpers\r\n// ************************************************************************************************\r\n\r\nfunction getCurrentSetting(settings, currentId, defaultSetting)\r\n{\r\n  const setting = Object.values(settings).find(value => value.id === currentId);\r\n  return ((setting !== undefined) ? setting : defaultSetting);\r\n}\r\n\r\nfunction getNextSetting(settings, currentSetting)\r\n{\r\n  const index = Object.values(settings).findIndex(value => value.id === currentSetting.id);\r\n  const keys  = Object.keys(settings);\r\n  return (((index + 1) < keys.length) ? settings[keys[index + 1]] : settings[keys[0]]);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme handling\r\n// ************************************************************************************************\r\n\r\nconst siteTheme = (() =>\r\n{\r\n  let currentTheme = {};\r\n  const elements   = { toggle: null };\r\n\r\n  const config = {\r\n    toggleId:       '#footer-site-theme-toggle',\r\n    prefDarkScheme: '(prefers-color-scheme: dark)',\r\n  };\r\n  \r\n  const themes = {\r\n    light: { id: 'light', text: 'light', class: 'site-theme-light' },\r\n    dark:  { id: 'dark',  text: 'dark',  class: 'site-theme-dark'  },\r\n    auto:  { id: 'auto',  text: 'auto'                             }, // This has no CSS class since auto is always light or dark\r\n  };\r\n\r\n  return {\r\n    init,\r\n    setCurrent,\r\n    toggle,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    elements.toggle = document.querySelector(config.toggleId);\r\n    const mediaQueryList = window.matchMedia(config.prefDarkScheme);\r\n    mediaQueryList.addEventListener('change', matchMediaPrefColorScheme);\r\n    elements.toggle.addEventListener('click', toggle);\r\n    setCurrent();\r\n  }\r\n  \r\n  function setCurrent()\r\n  {\r\n    currentTheme = getCurrentSetting(themes, settings.user.theme, themes.auto);\r\n    updateData();\r\n  }\r\n  \r\n  function matchMediaPrefColorScheme()\r\n  {\r\n    if (currentTheme.id === themes.auto.id)\r\n      updateData();\r\n  }\r\n  \r\n  function toggle(event)\r\n  {\r\n    event.preventDefault();\r\n    currentTheme = getNextSetting(themes, currentTheme);\r\n    settings.user.theme = currentTheme.id;\r\n    updateData();  \r\n  }\r\n  \r\n  function updateData()\r\n  {\r\n    let newTheme = currentTheme;\r\n  \r\n    if (currentTheme.id === themes.auto.id)\r\n      newTheme = window.matchMedia(config.prefDarkScheme).matches ? themes.dark : themes.light;\r\n  \r\n    setValue(KEY.UF_SITE_THEME, newTheme.id);\r\n    updateDOM(newTheme);\r\n  }\r\n  \r\n  function updateDOM(newTheme)\r\n  {\r\n    // Only update DOM if something has actually changed...\r\n    if (htmlClassList.contains(newTheme.class) === false)\r\n    {\r\n      debug.log(`updateDOM() - newSiteTheme: ${newTheme.id}`);\r\n    \r\n      htmlClassList.remove(themes.light.class, themes.dark.class);\r\n      htmlClassList.add(newTheme.class);\r\n    }\r\n\r\n    // Always update this because AUTO is not a separate class (only DARK + LIGHT are classes)\r\n    elements.toggle.querySelector('span').textContent = currentTheme.text;\r\n  }\r\n})();\r\n\r\n\r\n// ************************************************************************************************\r\n// Track layout handling\r\n// ************************************************************************************************\r\n\r\nconst trackLayout = (() =>\r\n{\r\n  let currentLayout = {};\r\n  const elements    = { toggle: null };\r\n\r\n  const config = {\r\n    toggleId: '#footer-track-layout-toggle',\r\n    minWidth: `(max-width: ${utils.getCssPropString('--site-track-layout-min-width')})`,\r\n  };\r\n\r\n  const layouts = {\r\n    list:        { id: 'list',     text: 'list',         class: 'track-layout-list'     },\r\n    twoColumn:   { id: '2-column', text: '2 column',     class: 'track-layout-2-column' },\r\n    threeColumn: { id: '3-column', text: '3 / 4 column', class: 'track-layout-3-column' },\r\n  };\r\n\r\n  return {\r\n    init,\r\n    setCurrent,\r\n    toggle,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    elements.toggle = document.querySelector(config.toggleId);\r\n    const mediaQueryList = window.matchMedia(config.minWidth);\r\n    mediaQueryList.addEventListener('change', matchMediaMinWidth);\r\n    elements.toggle.addEventListener('click', toggle);\r\n    setCurrent();\r\n  }\r\n\r\n  function setCurrent()\r\n  {\r\n    currentLayout = getCurrentSetting(layouts, settings.user.trackLayout, layouts.threeColumn);\r\n    elements.toggle.querySelector('span').textContent = currentLayout.text;\r\n    updateData();\r\n  }\r\n  \r\n  function matchMediaMinWidth(event)\r\n  {\r\n    if (htmlClassList.contains('user-layout'))\r\n      event.matches ? htmlClassList.remove(currentLayout.class) : htmlClassList.add(currentLayout.class);\r\n  }\r\n  \r\n  function toggle(event)\r\n  {\r\n    event.preventDefault();\r\n    currentLayout = getNextSetting(layouts, currentLayout);\r\n    settings.user.trackLayout = currentLayout.id;\r\n    updateData();\r\n\r\n    if (event.type === 'click')\r\n      elements.toggle.scrollIntoView();\r\n  }\r\n  \r\n  function updateData()\r\n  {\r\n    setValue(KEY.UF_TRACK_LAYOUT, currentLayout.id);\r\n    updateDOM();\r\n  }\r\n  \r\n  function updateDOM()\r\n  {\r\n    // Only update DOM if needed and when something has actually changed\r\n    if ((htmlClassList.contains('user-layout')) && (htmlClassList.contains(currentLayout.class) === false))\r\n    {\r\n      debug.log(`updateDOM() - newTrackLayout: ${currentLayout.id}`);\r\n\r\n      htmlClassList.remove(layouts.list.class, layouts.twoColumn.class, layouts.threeColumn.class);\r\n\r\n      if (window.matchMedia(config.minWidth).matches === false)\r\n        htmlClassList.add(currentLayout.class);\r\n    }\r\n\r\n    elements.toggle.querySelector('span').textContent = currentLayout.text;\r\n  }\r\n})();\r\n\r\n\r\n// ************************************************************************************************\r\n// Share Dialog module\r\n// ************************************************************************************************\r\n\r\nconst shareModal = (() =>\r\n{\r\n  const filterStringRegEx = /\\s{1,}[\u2013\u00B7-]\\s{1,}/i;\r\n  let title, string, filterString, url, verb;\r\n\r\n  return {\r\n    show,\r\n  };\r\n  \r\n  function show(args)\r\n  {\r\n    ({\r\n      title        = 'Share / Play Track',\r\n      string       = null,\r\n      filterString = false,\r\n      url          = null,\r\n      verb         = 'Play'\r\n    } = args);\r\n\r\n    showModal(title, getSingleChoiceList(verb), singleChoiceListClick);\r\n  }\r\n\r\n  function getSingleChoiceList(verb)\r\n  {\r\n    return [\r\n      { id: 'copyToClipboardId', description: '<b>Copy Link</b> to Clipboard'   },\r\n      { id: 'shareOnEmailId',    description: '<b>Share</b> on Email'           },\r\n      { id: 'amazonMusicId',     description: `<b>${verb}</b> on Amazon Music`  },\r\n      { id: 'appleMusicId',      description: `<b>${verb}</b> on Apple Music`   },\r\n      { id: 'spotifyId',         description: `<b>${verb}</b> on Spotify`       },\r\n      { id: 'tidalId',           description: `<b>${verb}</b> on Tidal`         },\r\n      { id: 'youTubeMusicId',    description: `<b>${verb}</b> on YouTube Music` },\r\n    ];\r\n  }\r\n\r\n  function singleChoiceListClick(clickId)\r\n  {\r\n    debug.log(`singleChoiceListClick(): ${clickId} - title: \"${title}\" - string: \"${string}\" - filterString: ${filterString} - url: ${url} - verb: ${verb}`);\r\n\r\n    const searchString = filterString ? encodeURIComponent(string.replace(filterStringRegEx, ' ')) : encodeURIComponent(string);\r\n\r\n    switch (clickId)\r\n    {\r\n      case 'copyToClipboardId':\r\n        navigator.clipboard.writeText(url).then(() =>\r\n        {\r\n          showSnackbar('Track link copied to clipboard', 3);\r\n        },\r\n        (reason) =>\r\n        {\r\n          debug.error(`shareModal.copyToClipboard() failed because ${reason}`);\r\n          showSnackbar('Unable to copy Track link to clipboard', 5);\r\n        });\r\n        break;\r\n\r\n      case 'shareOnEmailId':\r\n        window.location.href = `mailto:?subject=${encodeURIComponent(string)}&body=${url}%0d%0a`;\r\n        break;\r\n\r\n      case 'amazonMusicId':\r\n        window.open(`https://music.amazon.com/search/${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'appleMusicId':\r\n        window.open(`https://music.apple.com/ca/search?term=${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'spotifyId':\r\n        window.open(`https://open.spotify.com/search/${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'tidalId':\r\n        window.open(`https://google.com/search?q=${searchString}%20site:tidal.com`, \"_blank\");\r\n        break;\r\n\r\n      case 'youTubeMusicId':\r\n        window.open(`https://music.youtube.com/search?q=${searchString}`, \"_blank\");\r\n        break;\r\n    }\r\n  }\r\n})();\r\n", "//\r\n// Track to track crossfade module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from '../shared/debuglogger.js';\r\n\r\n\r\nexport {\r\n  VOLUME,\r\n  TYPE as CROSSFADE_TYPE,\r\n  getInstance,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('crossfade');\r\n\r\nconst VOLUME = {\r\n  MIN:   0,\r\n  MAX: 100,\r\n};\r\n\r\nconst TYPE = {\r\n  NONE:  -1,\r\n  AUTO:   0,\r\n  TRACK:  1,\r\n};\r\n\r\nconst CURVE = {\r\n  NONE:        -1,\r\n  EQUAL_POWER:  0,\r\n  LINEAR:       1,\r\n};\r\n\r\nconst STATE = {\r\n  NONE:   0,\r\n  INIT:   1,\r\n  FADING: 2,\r\n};\r\n\r\nconst mConfig = {\r\n  intervalEqPow:   33, // Milliseconds between each crossfade update event\r\n  intervalLinear: 100,\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Crossfade closure\r\n// ************************************************************************************************\r\n\r\nconst getInstance = ((playbackSettings, mediaPlayers) =>\r\n{\r\n  const settings = playbackSettings;\r\n  const players  = mediaPlayers;\r\n\r\n  let fadeState       = STATE.NONE;\r\n  let intervalId      = -1;\r\n  let fadeOutPlayer   = null;\r\n  let fadeInPlayer    = null;\r\n  let fadeLength      = 0;\r\n  let fadeStartVolume = 0;\r\n  let fadeType        = TYPE.NONE;\r\n  let fadePreset      = null;\r\n  let fadeStartTime   = 0;\r\n\r\n  return {\r\n    isFading() { return (fadeState !== STATE.NONE); },\r\n    init,\r\n    start,\r\n    stop,\r\n    mute,\r\n  };\r\n  \r\n  function init(crossfadeType, crossfadePreset, fadeInUid = null)\r\n  {\r\n    if ((fadeState === STATE.NONE) && (set(fadeInUid) === true))\r\n    {\r\n      debug.log(`init() - type: ${debug.getObjectKeyForValue(TYPE, crossfadeType)} - fadeInUid: ${fadeInUid} - preset: ${crossfadePreset.length} sec ${debug.getObjectKeyForValue(CURVE, crossfadePreset.curve)} (Name: ${crossfadePreset.name})`);\r\n  \r\n      fadeState       = STATE.INIT;\r\n      fadeStartVolume = settings.masterVolume;\r\n      fadeType        = crossfadeType;\r\n      fadePreset      = crossfadePreset;\r\n      \r\n      fadeInPlayer.setVolume(0);\r\n  \r\n      if (fadeInUid === null)\r\n        players.nextTrack(true);\r\n      else\r\n        players.jumpToTrack(players.trackFromUid(fadeInUid), true, false);\r\n  \r\n      return { fadeOutPlayer: players.indexMap.get(fadeOutPlayer.getUid()), fadeInPlayer: players.indexMap.get(fadeInPlayer.getUid()) };\r\n    }\r\n  \r\n    return null;\r\n  }\r\n  \r\n  function start()\r\n  {\r\n    if (fadeState === STATE.INIT)\r\n    {\r\n      fadeState = STATE.FADING;\r\n\r\n      fadeOutPlayer.getPosition((positionMilliseconds) =>\r\n      {\r\n        const updateInterval = (fadePreset.curve === CURVE.EQUAL_POWER) ? mConfig.intervalEqPow : mConfig.intervalLinear;\r\n        fadeStartTime        = ((positionMilliseconds + updateInterval) / 1000);\r\n        const timeRemaining  = fadeOutPlayer.getDuration() - fadeStartTime;\r\n        const fadeRemaining  = timeRemaining - (updateInterval / 1000);\r\n  \r\n        if (fadeType === TYPE.AUTO)\r\n          fadeLength = fadeRemaining;\r\n        else if (fadeType === TYPE.TRACK)\r\n          fadeLength = (timeRemaining > fadePreset.length) ? fadePreset.length : fadeRemaining;\r\n  \r\n        debug.log(`start() - fadeStartTime: ${fadeStartTime.toFixed(2)} sec - timeRemaining: ${timeRemaining.toFixed(2)} sec - fadeLength: ${fadeLength.toFixed(2)} sec - updateInterval: ${updateInterval} ms`);\r\n  \r\n        intervalId = setInterval((fadePreset.curve === CURVE.EQUAL_POWER) ? equalPowerFade : linearFade, updateInterval);\r\n      });\r\n    }\r\n  }\r\n  \r\n  function stop()\r\n  {\r\n    debug.log(`stop() - fadeState: ${debug.getObjectKeyForValue(STATE, fadeState)}`);\r\n  \r\n    if (fadeState !== STATE.NONE)\r\n    {\r\n      if (intervalId !== -1)\r\n      {\r\n        clearInterval(intervalId);\r\n        intervalId = -1;\r\n      }\r\n  \r\n      if (fadeOutPlayer !== null)\r\n      {\r\n        fadeOutPlayer.pause();\r\n        fadeOutPlayer.seekTo(0);\r\n  \r\n        // ToDo: Temp fix for: This might POP on fade out end, check if there is a safer way to reset the volume\r\n        setTimeout(() =>\r\n        {\r\n          fadeOutPlayer.setVolume(settings.masterVolume); // ToDo: fadeStartVolume is 0 because of setTimeout()\r\n          fadeOutPlayer = null;\r\n        }, 200);\r\n      }\r\n    \r\n      if (fadeInPlayer !== null)\r\n        fadeInPlayer = null;\r\n    \r\n      fadeState       = STATE.NONE;\r\n      fadeLength      = 0;\r\n      fadeStartVolume = 0;\r\n      fadeType        = TYPE.NONE;\r\n      fadePreset      = null;\r\n      fadeStartTime   = 0;\r\n    }\r\n  }\r\n  \r\n  function mute(setMute)\r\n  {\r\n    if (fadeOutPlayer !== null)\r\n      fadeOutPlayer.mute(setMute);\r\n  }\r\n  \r\n  function set(fadeInUid)\r\n  {\r\n    fadeOutPlayer = players.current;\r\n    fadeInPlayer  = (fadeInUid === null) ? players.next : players.playerFromUid(fadeInUid);\r\n  \r\n    if (fadeOutPlayer.getPlayable() && fadeInPlayer.getPlayable())\r\n      return true;\r\n  \r\n    return false;\r\n  }\r\n  \r\n  //\r\n  // https://dsp.stackexchange.com/questions/14754/equal-power-crossfade\r\n  //\r\n  function equalPowerFade()\r\n  {\r\n    fadeOutPlayer.getPosition((positionMilliseconds) =>\r\n    {\r\n      // Clamp negative position values\r\n      const position     = ((positionMilliseconds / 1000) - fadeStartTime);\r\n      const fadePosition = (position >= 0) ? position : 0;\r\n  \r\n      // Clamp negative volume values\r\n      const volume     = fadeStartVolume - (fadeStartVolume * (fadePosition / fadeLength));\r\n      const fadeVolume = (volume >= VOLUME.MIN) ? volume : VOLUME.MIN;\r\n  \r\n      const fadeOutVolume = Math.round(Math.sqrt(fadeStartVolume * fadeVolume));\r\n      const fadeInVolume  = Math.round(Math.sqrt(fadeStartVolume * (fadeStartVolume - fadeVolume)));\r\n  \r\n      if ((fadePosition >= fadeLength) && (fadeVolume <= VOLUME.MIN) && (fadeInVolume >= fadeStartVolume))\r\n      {\r\n        fadeOutPlayer.setVolume(VOLUME.MIN);\r\n        fadeInPlayer.setVolume(fadeStartVolume);\r\n        stop();\r\n      }\r\n      else\r\n      {\r\n        fadeOutPlayer.setVolume(fadeOutVolume);\r\n        fadeInPlayer.setVolume(fadeInVolume);\r\n      }\r\n    });\r\n  }\r\n  \r\n  function linearFade()\r\n  {\r\n    fadeOutPlayer.getPosition((positionMilliseconds) =>\r\n    {\r\n      const fadePosition  = ((positionMilliseconds / 1000) - fadeStartTime);\r\n      const fadeInVolume  = Math.round(fadeStartVolume * (fadePosition / fadeLength));\r\n      const fadeOutVolume = fadeStartVolume - fadeInVolume;\r\n  \r\n      if ((fadePosition > fadeLength) && (fadeOutVolume < VOLUME.MIN) && (fadeInVolume > fadeStartVolume))\r\n      {\r\n        fadeOutPlayer.setVolume(VOLUME.MIN);\r\n        fadeInPlayer.setVolume(fadeStartVolume);\r\n        stop();\r\n      }\r\n      else\r\n      {\r\n        fadeOutPlayer.setVolume(fadeOutVolume);\r\n        fadeInPlayer.setVolume(fadeInVolume);\r\n      }\r\n    });\r\n  }\r\n});\r\n", "//\r\n// Embedded media player classes and handling module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger     from '../shared/debuglogger.js';\r\nimport * as crossfadeModule from './crossfade.js';\r\n\r\n\r\nexport {\r\n  YouTube,\r\n  SoundCloud,\r\n  Playlist,\r\n  setArtistTitle,\r\n  getYouTubeImgUrl,\r\n  getInstance,\r\n};\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('mediaplayers');\r\n\r\n\r\n// ************************************************************************************************\r\n// MediaPlayer parent class\r\n// ************************************************************************************************\r\n\r\nclass MediaPlayer\r\n{\r\n  constructor(trackId, iframeId, embeddedPlayer)\r\n  {\r\n    this.trackId        = trackId;\r\n    this.iframeId       = iframeId;\r\n    this.embeddedPlayer = embeddedPlayer;\r\n    this.playable       = true;\r\n\r\n    this.duration = 0;\r\n    this.artist   = null;\r\n    this.title    = null;\r\n\r\n    this.thumbnailSrc       = null;\r\n    this.thumbnailClass     = 'type-default';\r\n    this.thumbnail          = new Image();\r\n    this.thumbnail.decoding = 'async';\r\n  }\r\n  \r\n  getTrackId()          { return this.trackId;                   }\r\n  getIframeId()         { return this.iframeId;                  }\r\n  getUid()              { return this.iframeId;                  }\r\n  getEmbeddedPlayer()   { return this.embeddedPlayer;            }\r\n\r\n  getPlayable()         { return this.playable;                  }\r\n  setPlayable(playable) { this.playable = playable;              }\r\n\r\n  getDuration()         { return this.duration;                  }\r\n  setDuration(duration) { this.duration = duration;              }\r\n\r\n  getArtist()           { return this.artist;                    }\r\n  setArtist(artist)     { this.artist = artist;                  }\r\n\r\n  getTitle()            { return this.title;                     }\r\n  setTitle(title)       { this.title = title;                    }\r\n\r\n  getThumbnailSrc()     { return this.thumbnailSrc;              }\r\n  getThumbnailClass()   { return this.thumbnailClass;            }\r\n\r\n  seekTo(position)      { this.embeddedPlayer.seekTo(position);  }\r\n  setVolume(volume)     { this.embeddedPlayer.setVolume(volume); }\r\n\r\n  setThumbnail(thumbnail)\r\n  {\r\n    this.thumbnailSrc   = thumbnail.src;\r\n    this.thumbnailClass = thumbnail.class;\r\n    this.thumbnail.src  = thumbnail.src;\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// YouTube child class\r\n// ************************************************************************************************\r\n\r\nclass YouTube extends MediaPlayer\r\n{\r\n  constructor(trackId, iframeId, embeddedPlayer, iframeSrc)\r\n  {\r\n    super(trackId, iframeId, embeddedPlayer);\r\n    this.previousPlayerState = -1;\r\n    super.setThumbnail(getYouTubeImgUrl(iframeSrc));\r\n  }\r\n\r\n  pause() { this.embeddedPlayer.pauseVideo(); }\r\n  stop()  { this.embeddedPlayer.stopVideo();  }\r\n\r\n  //\r\n  // ToDo: Remove if no longer needed??\r\n  // Handles YouTube iframe API edge case that causes playVideo() to silently fail with no API errors\r\n  //\r\n  isPlaybackError(errorHandler)\r\n  {\r\n    debug.log(`YouTube.play() - current playerState: ${this.embeddedPlayer.getPlayerState()} - previous playerState: ${this.previousPlayerState} - playable: ${this.playable}`);\r\n\r\n    if ((this.embeddedPlayer.getPlayerState() === -1) && (this.previousPlayerState === -1) && (this.playable === true))\r\n    {\r\n      debug.warn(`MediaPlayer.YouTube.play() - Unable to play track: ${this.getArtist()} - \"${this.getTitle()}\" with videoId: ${this.embeddedPlayer.getVideoData().video_id} -- No YouTube API error given!`);\r\n\r\n      this.playable = false;\r\n      errorHandler(this, this.embeddedPlayer.getVideoUrl());\r\n\r\n      return true;\r\n    }\r\n\r\n    this.previousPlayerState = this.embeddedPlayer.getPlayerState();\r\n\r\n    return false;\r\n  }\r\n\r\n  play(errorHandler)\r\n  {\r\n    if (this.isPlaybackError(errorHandler) === false)\r\n    {\r\n      if (this.playable === true)\r\n        this.embeddedPlayer.playVideo();\r\n      else\r\n        errorHandler(this, this.embeddedPlayer.getVideoUrl());\r\n    }\r\n  }\r\n\r\n  getVolume(callback)\r\n  {\r\n    callback(this.embeddedPlayer.getVolume());\r\n  }\r\n\r\n  mute(setMute)\r\n  {\r\n    if (setMute)\r\n      this.embeddedPlayer.mute();\r\n    else\r\n      this.embeddedPlayer.unMute();\r\n  }\r\n\r\n  getPosition(callback)\r\n  {\r\n    callback((this.embeddedPlayer.getCurrentTime() * 1000), this.duration);\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// SoundCloud child class\r\n// ************************************************************************************************\r\n\r\nclass SoundCloud extends MediaPlayer\r\n{\r\n  constructor(trackId, iframeId, embeddedPlayer, iframeSrc)\r\n  {\r\n    super(trackId, iframeId, embeddedPlayer);\r\n    this.soundId = this.getSoundId(iframeSrc);\r\n    this.volume  = crossfadeModule.VOLUME.MAX;\r\n    this.muted   = false;\r\n  }\r\n\r\n  getSoundId(iframeSrc)\r\n  {\r\n    if (iframeSrc !== undefined)\r\n    {\r\n      const iframeSrcParts = new URL(decodeURIComponent(iframeSrc));\r\n      const trackUrl       = iframeSrcParts.searchParams.get('url');\r\n      \r\n      if (trackUrl !== null)\r\n      {\r\n        const trackUrlParts = trackUrl.split('/');\r\n        const tracksString  = 'tracks'.toUpperCase();\r\n  \r\n        for (let i = 0; i < trackUrlParts.length; i++)\r\n        {\r\n          if (trackUrlParts[i].toUpperCase() === tracksString)\r\n            return parseInt(trackUrlParts[i + 1]);\r\n        }\r\n      }\r\n    }\r\n    \r\n    debug.error(`MediaPlayer.SoundCloud.getSoundId() failed for: ${this.iframeId}`);\r\n\r\n    return null;\r\n  }\r\n\r\n  setThumbnail()\r\n  {\r\n    this.embeddedPlayer.getCurrentSound(soundObject => super.setThumbnail(getSoundCloudImgUrl(soundObject)));\r\n  }\r\n\r\n  // Override parent getUid() because SoundCloud provides its own UID\r\n  getUid() { return this.soundId;         }\r\n  pause()  { this.embeddedPlayer.pause(); }\r\n  \r\n  play(errorHandler)\r\n  {\r\n    // playable is set to FALSE if the widget fires SC.Widget.Events.ERROR (track does not exist)\r\n    if (this.playable === true)\r\n    {\r\n      this.embeddedPlayer.getCurrentSound(soundObject =>\r\n      {\r\n        if (soundObject.playable === true)\r\n          this.embeddedPlayer.play();\r\n        else\r\n          errorHandler(this, soundObject.permalink_url);\r\n      });\r\n    }\r\n    else\r\n    {\r\n      errorHandler(this, 'https://soundcloud.com');\r\n    }\r\n  }\r\n  \r\n  stop()\r\n  {\r\n    this.pause();\r\n    super.seekTo(0);\r\n  }\r\n\r\n  // Override parent because SoundCloud seekTo() needs milliseconds instead of just seconds\r\n  seekTo(positionSeconds)\r\n  {\r\n    super.seekTo(positionSeconds * 1000);\r\n  }\r\n  \r\n  getVolume(callback)\r\n  {\r\n    this.embeddedPlayer.getVolume(volume => callback(volume));\r\n  }\r\n\r\n  // Override parent setVolume() because we use it for mute() as well \r\n  setVolume(volume)\r\n  {\r\n    if (volume !== 0)\r\n      this.volume = volume;\r\n\r\n    if ((this.muted === false) || (volume === 0))\r\n      super.setVolume(volume);\r\n  }\r\n\r\n  mute(setMute)\r\n  {\r\n    this.muted = setMute ? true : false;\r\n\r\n    if (setMute)\r\n      this.setVolume(0);\r\n    else\r\n      this.setVolume(this.volume);\r\n  }\r\n\r\n  getPosition(callback)\r\n  {\r\n    this.embeddedPlayer.getPosition(positionMilliseconds => callback(positionMilliseconds, this.duration));\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Playlist child class\r\n// ************************************************************************************************\r\n\r\nclass Playlist extends MediaPlayer\r\n{\r\n  constructor(embeddedPlayer)\r\n  {\r\n    super(null, null, embeddedPlayer);\r\n    this.numTracks    = 3;\r\n    this.currentTrack = 2;\r\n  }\r\n\r\n  get embedded()    { return this.embeddedPlayer; }\r\n  getNumTracks()    { return this.numTracks;      }\r\n  getCurrentTrack() { return this.currentTrack;   }\r\n\r\n  setArtistTitleThumbnail(artistTitle, video_id)\r\n  {\r\n    setArtistTitle(artistTitle, this);\r\n    super.setThumbnail(getYouTubeImgUrl(`https://www.youtube.com/embed/${video_id}`));\r\n  }\r\n\r\n  getStatus()\r\n  {\r\n    return {\r\n      currentTrack: this.getCurrentTrack(),\r\n      numTracks:    this.getNumTracks(),\r\n      artist:       this.getArtist(),\r\n      title:        this.getTitle(),\r\n      thumbnail:    { src: this.getThumbnailSrc(), class: this.getThumbnailClass() },\r\n    };\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// MediaPlayer class support functions\r\n// ************************************************************************************************\r\n\r\n// Used to split details string into Artist and Title strings\r\nconst artistTitleRegEx = /\\s{1,}[\u2013\u00B7-]\\s{1,}/;\r\n\r\nfunction setArtistTitle(artistTitle, destination, matchRegEx = artistTitleRegEx)\r\n{\r\n  if ((artistTitle !== null) && (artistTitle.length > 0))\r\n  {\r\n    destination.artist = artistTitle;\r\n    destination.title  = '';\r\n\r\n    const match = artistTitle.match(matchRegEx);\r\n\r\n    if (match !== null)\r\n    {\r\n      destination.artist = artistTitle.slice(0, match.index);\r\n      destination.title  = artistTitle.slice(match.index + match[0].length);\r\n    }\r\n  }\r\n}\r\n\r\n// Default / fallback track thumbnail image URL\r\nconst defThumbnailSrc = '/wp-content/themes/ultrafunk/inc/img/photo_filled_grey.png';\r\n\r\nfunction getYouTubeImgUrl(iframeSrc, defaultSrc = defThumbnailSrc)\r\n{\r\n  const iframeSrcParts = new URL(decodeURIComponent(iframeSrc));\r\n  const pathnameParts  = iframeSrcParts.pathname.split('/embed/');\r\n\r\n  if ((pathnameParts.length === 2) && (pathnameParts[1].length === 11))\r\n    return { src: `https://img.youtube.com/vi/${pathnameParts[1]}/default.jpg`, class: 'type-youtube', uid: pathnameParts[1] };\r\n  else\r\n    return { src: defaultSrc, class: 'type-default' };\r\n}\r\n\r\nfunction getSoundCloudImgUrl(soundObject, defaultSrc = defThumbnailSrc)\r\n{\r\n  const thumbnailSrc = (soundObject.artwork_url !== null) ? soundObject.artwork_url : soundObject.user.avatar_url;\r\n\r\n  if ((thumbnailSrc !== null) && (thumbnailSrc !== undefined))\r\n    return { src: thumbnailSrc, class: 'type-soundcloud' };\r\n  else\r\n    return { src: defaultSrc, class: 'type-default' };\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Media players closure\r\n// ************************************************************************************************\r\n\r\nconst getInstance = (() =>\r\n{\r\n  let settings       = null;\r\n  let playTrack      = null;\r\n  let crossfade      = null;\r\n  const mediaPlayers = [];\r\n  const indexMap     = new Map();\r\n  let playerIndex    = 0;\r\n\r\n  return {\r\n  // Objects\r\n    indexMap,\r\n  // Functions\r\n    init,\r\n    get crossfade()                 { return crossfade;                       },\r\n    add,\r\n    getPlayerIndex()                { return playerIndex;                     },\r\n    setPlayerIndex(nextPlayerIndex) { playerIndex = nextPlayerIndex;          },\r\n    get current()                   { return mediaPlayers[playerIndex];       },\r\n    get next()                      { return mediaPlayers[playerIndex + 1];   },\r\n    getNumTracks()                  { return mediaPlayers.length;             },\r\n    getCurrentTrack()               { return playerIndex + 1;                 },\r\n    playerFromUid(uId)              { return mediaPlayers[indexMap.get(uId)]; },\r\n    trackFromUid(uId)               { return (indexMap.get(uId) + 1);         },\r\n    isCurrent(uId)                  { return (uId === this.current.getUid()); },\r\n    uIdFromIframeId,\r\n    stop,\r\n    mute,\r\n    getStatus,\r\n    prevTrack,\r\n    nextTrack,\r\n    jumpToTrack,\r\n  };\r\n\r\n  function init(playbackSettings, playTrackCallback)\r\n  {\r\n    debug.log('init()');\r\n\r\n    settings  = playbackSettings;\r\n    playTrack = playTrackCallback;\r\n    crossfade = crossfadeModule.getInstance(playbackSettings, this);\r\n  }\r\n\r\n  function add(player)\r\n  {\r\n    debug.log(player);\r\n    \r\n    mediaPlayers.push(player);\r\n    indexMap.set(player.getUid(), mediaPlayers.length - 1);\r\n  }\r\n\r\n  function uIdFromIframeId(iframeId)\r\n  {\r\n    return mediaPlayers.find(player => player.iframeId === iframeId).getUid();\r\n  }\r\n\r\n  function stop()\r\n  {\r\n    this.current.stop();\r\n    crossfade.stop();\r\n  }\r\n  \r\n  function mute()\r\n  {\r\n    this.current.mute(settings.masterMute);\r\n    crossfade.mute(settings.masterMute);\r\n  }\r\n\r\n  function getStatus()\r\n  {\r\n    return {\r\n      currentTrack: this.getCurrentTrack(),\r\n      numTracks:    this.getNumTracks(),\r\n      artist:       this.current.getArtist(),\r\n      title:        this.current.getTitle(),\r\n      thumbnail:    { src: this.current.getThumbnailSrc(), class: this.current.getThumbnailClass() },\r\n    };\r\n  }\r\n\r\n  function prevTrack(playMedia)\r\n  {\r\n    if (playerIndex > 0)\r\n    {\r\n      playerIndex--;\r\n      playTrack(playMedia);\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  function nextTrack(playMedia)\r\n  {\r\n    playerIndex++;\r\n    \r\n    if (playerIndex < this.getNumTracks())\r\n    {\r\n      playTrack(playMedia);\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  function jumpToTrack(track, playMedia, scrollToMedia = true)\r\n  {\r\n    if ((track > 0) && (track <= this.getNumTracks()))\r\n    {\r\n      playerIndex = track - 1;\r\n      playTrack(playMedia, scrollToMedia);\r\n      return true;\r\n    }\r\n  \r\n    return false;\r\n  }\r\n});\r\n"],
  "mappings": "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",
  "names": []
}
