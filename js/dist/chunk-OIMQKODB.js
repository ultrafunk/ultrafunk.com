var le=!1,Z=class{constructor(e="unknown"){this.moduleName=Fe(e.toUpperCase(),20,".")}isDebug(){return le}warn(e){console.warn(`${this.moduleName}:`,e)}error(e){console.error(`${this.moduleName}:`,e)}},oe=class extends Z{constructor(e){super(e)}log(e){console.log(`${this.moduleName}:`,e)}logEventLog(e,s,r){let a=[];for(let i=0;i<e.length;i++){let n={eventSource:this.getObjectKeyForValue(s,e[i].eventSource),eventType:this.getObjectKeyForValue(r,e[i].eventType),uId:e[i].uId,timeStamp:e[i].timeStamp};a.push(n)}this.log(a)}getObjectKeyForValue(e,s){return Object.keys(e).find(r=>e[r]===s)}},ue=class extends Z{constructor(e){super(e)}log(){}logEventLog(){}getObjectKeyForValue(){}};function y(t){return le===!0?new oe(t):new ue(t)}function Fe(t,e,s){return t.length>e?t.slice(0,e):t.padEnd(e,s)}function it(t,e){let s=e.mediaUrl+" | "+e.mediaTitle;console.log(`DEBUGLOGGER.........: logErrorOnServer(): ${t} - ${s}`),gtag("event",s,{event_category:t,event_label:"Ultrafunk Client Error"})}var Y=y("settings"),c=1,m=2,$=3,ut={GALLERY:0,LIST:1},d={version:{description:"",type:c,values:[1,999999],default:29,valueStrings:[]},user:{keyboardShortcuts:{description:"Keyboard Shortcuts",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},masterVolume:{description:"Master Volume",type:c,values:[0,25,50,75,100],default:100,valueStrings:["0%","25%","50%","75%","100%"]},masterMute:{description:"Master Mute",type:m,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoplay:{description:"Autoplay next track",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoCrossfade:{description:"Auto Crossfade to next track",type:m,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},autoCrossfadeLength:{description:"Auto Crossfade Length",type:c,values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},autoCrossfadeCurve:{description:"Auto Crossfade Curve",type:c,values:[0,1],default:1,valueStrings:["Equal Power","Linear"]},autoScroll:{description:"Autoscroll to next track",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},smoothScrolling:{description:"Smooth Scrolling to next track",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},autoExitFullscreen:{description:"Exit Fullscreen on next track",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},animateNowPlayingIcon:{description:"Animate Playing Track Icon",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},trackCrossfadeDefPreset:{description:"Track Crossfade Def. Preset",type:c,values:[0,1,2,3,4,5],default:1,valueStrings:["10 sec EqPow (1)","20 sec EqPow (2)","30 sec EqPow (3)","10 sec Linear (4)","20 sec Linear (5)","30 sec Linear (6)"]},timeRemainingWarning:{description:"Time Remaining Warning",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},timeRemainingSeconds:{description:"Time Remaining Warning Seconds",type:c,values:[15,30,45,60],default:60,valueStrings:["15 sec","30 sec","45 sec","60 sec"]},autoExitFsOnWarning:{description:"Exit Fullscreen on Time Warning",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]},keepMobileScreenOn:{description:"Keep Mobile Screen On when playing",type:m,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackTimesOnMobile:{description:"Show Track Times on mobile",type:m,values:[!0,!1],default:!1,valueStrings:["ON","OFF"]},trackThumbnailOnMobile:{description:"Show Track Thumbnail on mobile",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},priv:{tips:{showDetailsHint:{description:"",type:m,values:[!0,!1],default:!0,valueStrings:[]},showTrackImageHint:{description:"",type:m,values:[!0,!1],default:!0,valueStrings:[]}}}},ct={version:d.version.default,user:{keyboardShortcuts:d.user.keyboardShortcuts.default,masterVolume:d.user.masterVolume.default,masterMute:d.user.masterMute.default,autoplay:d.user.autoplay.default,autoCrossfade:d.user.autoCrossfade.default,autoCrossfadeLength:d.user.autoCrossfadeLength.default,autoCrossfadeCurve:d.user.autoCrossfadeCurve.default,autoScroll:d.user.autoScroll.default,smoothScrolling:d.user.smoothScrolling.default,autoExitFullscreen:d.user.autoExitFullscreen.default,animateNowPlayingIcon:d.user.animateNowPlayingIcon.default,trackCrossfadeDefPreset:d.user.trackCrossfadeDefPreset.default,timeRemainingWarning:d.user.timeRemainingWarning.default,timeRemainingSeconds:d.user.timeRemainingSeconds.default,autoExitFsOnWarning:d.user.autoExitFsOnWarning.default,keepMobileScreenOn:d.user.keepMobileScreenOn.default,trackTimesOnMobile:d.user.trackTimesOnMobile.default,trackThumbnailOnMobile:d.user.trackThumbnailOnMobile.default},priv:{tips:{showDetailsHint:d.priv.tips.showDetailsHint.default,showTrackImageHint:d.priv.tips.showTrackImageHint.default}}},L={version:{description:"",type:c,values:[1,999999],default:10,valueStrings:[]},user:{theme:{description:"Theme",type:$,values:["light","dark","auto"],default:"auto",valueStrings:["Light","Dark","Auto / System"]},preferredPlayer:{description:"Preferred Player",type:c,values:[0,1],default:0,valueStrings:["Gallery","List"]},galleryLayout:{description:"Gallery Player Track Layout",type:$,values:["1-column","2-column","3-column"],default:"3-column",valueStrings:["1 Column","2 Column","3 / 4 Column"]},tracksPerPage:{description:"Gallery Tracks Per Page: Search + Shuffle",type:c,values:[...Array(22).keys()].map(t=>t+3),default:12,valueStrings:[...Array(22).keys()].map(t=>`${t+3}`)},keyboardShortcuts:{description:"Keyboard Shortcuts",type:m,values:[!0,!1],default:!0,valueStrings:["ON","OFF"]}},priv:{banners:{showFrontpageIntro:{description:"",type:m,values:[!0,!1],default:!0,valueStrings:[]},showPremiumIntro:{description:"",type:m,values:[!0,!1],default:!0,valueStrings:[]},showPromoIntro:{description:"",type:m,values:[!0,!1],default:!0,valueStrings:[]}}}},dt={version:L.version.default,user:{theme:L.user.theme.default,preferredPlayer:L.user.preferredPlayer.default,galleryLayout:L.user.galleryLayout.default,tracksPerPage:L.user.tracksPerPage.default,keyboardShortcuts:L.user.keyboardShortcuts.default},priv:{banners:{showFrontpageIntro:L.priv.banners.showFrontpageIntro.default,showPremiumIntro:L.priv.banners.showPremiumIntro.default,showPromoIntro:L.priv.banners.showPromoIntro.default}}},h={version:{description:"",type:c,values:[1,999999],default:1,valueStrings:[]},crossfade:[{name:{description:"Preset 1",type:$,values:[5,50],default:"10 sec EqPow",valueStrings:[]},length:{description:"Crossfade Length",type:c,values:[5,10,15,20,25,30],default:10,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},curve:{description:"Crossfade Curve",type:c,values:[0,1],default:0,valueStrings:["Equal Power","Linear"]}},{name:{description:"Preset 2",type:$,values:[5,50],default:"20 sec EqPow",valueStrings:[]},length:{description:"Crossfade Length",type:c,values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},curve:{description:"Crossfade Curve",type:c,values:[0,1],default:0,valueStrings:["Equal Power","Linear"]}},{name:{description:"Preset 3",type:$,values:[5,50],default:"30 sec EqPow",valueStrings:[]},length:{description:"Crossfade Length",type:c,values:[5,10,15,20,25,30],default:30,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},curve:{description:"Crossfade Curve",type:c,values:[0,1],default:0,valueStrings:["Equal Power","Linear"]}},{name:{description:"Preset 4",type:$,values:[5,50],default:"10 sec Linear",valueStrings:[]},length:{description:"Crossfade Length",type:c,values:[5,10,15,20,25,30],default:10,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},curve:{description:"Crossfade Curve",type:c,values:[0,1],default:1,valueStrings:["Equal Power","Linear"]}},{name:{description:"Preset 5",type:$,values:[5,50],default:"20 sec Linear",valueStrings:[]},length:{description:"Crossfade Length",type:c,values:[5,10,15,20,25,30],default:20,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},curve:{description:"Crossfade Curve",type:c,values:[0,1],default:1,valueStrings:["Equal Power","Linear"]}},{name:{description:"Preset 6",type:$,values:[5,50],default:"30 sec Linear",valueStrings:[]},length:{description:"Crossfade Length",type:c,values:[5,10,15,20,25,30],default:30,valueStrings:["5 sec","10 sec","15 sec","20 sec","25 sec","30 sec"]},curve:{description:"Crossfade Curve",type:c,values:[0,1],default:1,valueStrings:["Equal Power","Linear"]}}]},ft={version:h.version.default,crossfade:[{name:h.crossfade[0].name.default,length:h.crossfade[0].length.default,curve:h.crossfade[0].curve.default},{name:h.crossfade[1].name.default,length:h.crossfade[1].length.default,curve:h.crossfade[1].curve.default},{name:h.crossfade[2].name.default,length:h.crossfade[2].length.default,curve:h.crossfade[2].curve.default},{name:h.crossfade[3].name.default,length:h.crossfade[3].length.default,curve:h.crossfade[3].curve.default},{name:h.crossfade[4].name.default,length:h.crossfade[4].length.default,curve:h.crossfade[4].curve.default},{name:h.crossfade[5].name.default,length:h.crossfade[5].length.default,curve:h.crossfade[5].curve.default}]};function ee(t,e){let s=0;return r(t,e),s;function r(a,i){for(let n in a)if(a&&i&&typeof a[n]=="object"&&typeof i[n]=="object")r(a[n],i[n]);else if(i[n]!==void 0)Ne(a,i[n],a[n],n)&&s++;else throw`'${n}' ${typeof a[n]=="object"?"object":"property"} is not in schema`}}function Ne(t,e,s,r){switch(e.type){case c:if(Number.isInteger(s)===!1||s<e.values[0]||s>e.values[e.values.length-1])return Y.warn(`validate() - '${r}' has invalid value: ${s} ('${r}' is type: INTEGER - min: ${e.values[0]} - max: ${e.values[e.values.length-1]}) -- setting default value: ${e.default}`),t[r]=e.default,!0;break;case m:if(s!==!0&&s!==!1)return Y.warn(`validate() - '${r}' has invalid value: ${s} ('${r}' is type: BOOLEAN) -- setting default value: ${e.default}`),t[r]=e.default,!0;break;case $:if(typeof s!="string")return Y.warn(`validate() - '${r}' has invalid value: ${s} ('${r}' is type: STRING) -- setting default value: ${e.default}`),t[r]=e.default,!0;break;default:return Y.warn(`validate() - '${r}' has unknown type: ${e.type}`),!0}}var v=y("storage"),V={},D={UF_AUTOPLAY:"UF_AUTOPLAY",UF_TERMLIST_CACHE:"UF_TERMLIST_CACHE",UF_TERMLIST_STATE:"UF_TERMLIST_STATE",UF_PLAYBACK_SETTINGS:"UF_PLAYBACK_SETTINGS",UF_SITE_SETTINGS:"UF_SITE_SETTINGS",UF_PRESET_LIST:"UF_PRESET_LIST",UF_SITE_THEME:"UF_SITE_THEME",UF_GALLERY_LAYOUT:"UF_GALLERY_LAYOUT",UF_TRACKS_PER_PAGE:"UF_TRACKS_PER_PAGE",UF_PREFERRED_PLAYER:"UF_PREFERRED_PLAYER"};function pt(t){let e;try{e=window[t];let s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(s){return s instanceof DOMException&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function ce(t,e="",s=60*60*24*365,r="/"){document.cookie=`${t}=${e}; Max-Age=${s}; Path=${r}; Secure; SameSite=Strict`}function te(t,e){try{localStorage.setItem(t,e)}catch(s){v.error(s)}}function Ae(t,e=null,s=!1){v.log(`readJson(): ${t} - ${e} - ${s}`);let r=localStorage.getItem(t),a=null;if(r===null)return s&&e!==null&&A(t,e),e;try{a=JSON.parse(r)}catch(i){v.error(i),e!==null&&(a=e)}return a}function A(t,e){v.log(`writeJson(): ${t} - ${e}`);try{localStorage.setItem(t,JSON.stringify(e))}catch(s){v.error(s)}}function Ue(t,e,s){v.log(`mergeSettings(): Merging ${s} from version ${t.version} to version ${e.version}`);let r={version:e.version};return se(t,e,r),de(r,e),r}function se(t,e,s){for(let r in e)typeof e[r]=="object"&&(t&&typeof t[r]=="object"?(v.log(`mergeDeep() - Merging: ${r}`),s[r]={...e[r],...t[r]},se(t[r],e[r],s[r])):(v.log(`mergeDeep() - Copying: ${r}`),s[r]={...e[r]},se({},e[r],s[r])))}function de(t,e){for(let s in t)s in e||(v.log(`cleanDeep() - Deleting: ${s} (${typeof t[s]=="object"?"object":"property"})`),delete t[s]),typeof t[s]=="object"&&de(t[s],e[s])}function Re(t,e,s){try{let r=0;switch(t){case D.UF_PLAYBACK_SETTINGS:r=ee(e,d);break;case D.UF_SITE_SETTINGS:r=ee(e,L);break}r>0&&A(t,e)}catch(r){return v.error(`validateSettings() exception: ${r} -- using default settings`),A(t,s),s}return e}function vt(t,e=null,s=!1){let r=Ae(t,e,s);if(r!==null&&e!==null&&r.version!==void 0){let a=r;return r.version<e.version&&(v.log(r),a=Ue(r,e,t),A(t,a),v.log(a)),fe(t,Re(t,a,e))}return e!==null?(v.warn(`readWriteSettingsProxy() - Failed for: ${t} -- using default settings`),A(t,e),fe(t,e)):(v.error(`readWriteSettingsProxy() - Fatal error for: ${t} -- unable to read settings!`),null)}var fe=(t,e)=>{let s={get(r,a,i){if(a in r){let n=Reflect.get(r,a,i);return typeof n=="object"?new Proxy(n,s):n}v.error(`onSettingsChange(): Get unknown property: ${a}`)},set(r,a,i,n){if(a in r){let f=Reflect.get(r,a,n);return i!==f&&(Reflect.set(r,a,i),A(t,e),Ve(a,f,i)),!0}return v.error(`onSettingsChange(): Set unknown property: ${a}`),!0}};return new Proxy(e,s)};function yt(t,e){v.log(`addSettingsObserver() for property: ${t}`),t in V||(V[t]=[]),V[t].push(e)}function Ve(t,e,s){t in V&&(v.log(`callSettingsObserver() for property: ${t} - oldValue: ${e} - newValue: ${s}`),V[t].forEach(r=>r(e,s)))}var me=y("utils"),j={SITE_MIN_WIDTH_WIDE:1,SITE_MAX_WIDTH:2,SITE_MAX_WIDTH_MOBILE:3},De=window.matchMedia(`(min-width: ${U("--site-min-width-wide")})`),je=window.matchMedia(`(max-width: ${U("--site-max-width")})`),We=window.matchMedia(`(max-width: ${U("--site-max-width-mobile")})`);function ge(t,e,s,r=null){document.querySelector(t)?.addEventListener(e,a=>s(a,r))}function he(t,e,s,r=null){document.querySelectorAll(t).forEach(i=>{i.addEventListener(e,n=>s(n,r))})}function U(t,e=document.documentElement){let s=getComputedStyle(e).getPropertyValue(t);return s.length!==0?s=s.replace(/'|"/g,"").trim():me.error(`getCssPropString(${t}): Returned CSS property string is empty`),s}function kt(t,e=document.documentElement){let s=U(t,e),r=NaN;return s.length!==0&&(r=parseInt(s)),isNaN(r)&&me.error(`getCssPropValue(${t}): Returned CSS property value is NaN`),r}function pe(t){switch(t){case j.SITE_MIN_WIDTH_WIDE:return De.matches;case j.SITE_MAX_WIDTH:return je.matches;case j.SITE_MAX_WIDTH_MOBILE:return We.matches}return!1}function It(t,e,s){t.classList.remove(e),t.classList.add(s)}function ve(t){t.preventDefault(),ce("UF_RESHUFFLE","true"),window.location.href=t.target.getAttribute("data-shuffle-path")}var Et=(()=>{let t=new Event("fullscreenElement"),e=null;return{init:s,enter:a,exit:i,toggle:n};function s(){document.addEventListener("fullscreenchange",r),document.addEventListener("webkitfullscreenchange",r)}function r(){e=document.fullscreenElement!==null?document.fullscreenElement.id:null,t.fullscreenTarget=e,document.dispatchEvent(t)}function a(f){f.requestFullscreen()}function i(){e!==null&&(document.exitFullscreen(),e=null)}function n(f){e===null?a(f):i()}})(),Lt=(()=>{let t=!1;return{allow(){return t},init:e};function e(s){t=s.keyboardShortcuts,document.addEventListener("allowKeyboardShortcuts",()=>{s.keyboardShortcuts&&(t=!0)}),document.addEventListener("denyKeyboardShortcuts",()=>{s.keyboardShortcuts&&(t=!1)})}})(),H=class{constructor(e,s=!0){this.element=document.getElementById(e),this.spanElement=this.element.querySelector("span"),this.element.addEventListener("click",r=>{r?.preventDefault(),this.toggle(r)}),s&&this.update()}get classList(){return this.element.classList}set textContent(e){this.spanElement.textContent=e}};var qe=y("snackbar"),p={snackbarId:0,actionClick:null,afterClose:null,visibleTimeoutId:-1,fadeTimeoutId:-1},x={id:"snackbar"},Ge=`
  <div id="${x.id}">
    <div class="${x.id}-container">
      <div class="${x.id}-message"></div>
      <div class="${x.id}-action-text"></div>
      <div class="${x.id}-close-icon"><span class="material-icons" title="Dismiss">close</span></div>
    </div>
  </div>
`,u={snackbar:null,actionText:null,closeIcon:null};function re(t,e=5,s=null,r=null,a=null){return qe.log(`showSnackbar(): ${t} (${e} sec.)`),Ye(),ae(),u.snackbar.querySelector(`.${x.id}-message`).innerHTML=t,u.snackbar.classList.add("show"),u.actionText.style.display="none",p.afterClose=a,s!==null&&r!==null?(p.actionClick=r,u.actionText.style.display="block",u.actionText.textContent=s,u.actionText.addEventListener("click",ye)):pe(j.SITE_MAX_WIDTH_MOBILE)?u.closeIcon.style.paddingLeft="10px":u.closeIcon.style.paddingLeft="20px",e!==0&&(p.visibleTimeoutId=setTimeout(()=>{u.snackbar.classList.add("hide"),p.fadeTimeoutId=setTimeout(()=>{u.snackbar.className="",p.afterClose!==null&&p.afterClose()},450)},e*1e3)),++p.snackbarId}function Ye(){u.snackbar===null&&(document.body.insertAdjacentHTML("beforeend",Ge),u.snackbar=document.getElementById(x.id),u.actionText=u.snackbar.querySelector(`.${x.id}-action-text`),u.closeIcon=u.snackbar.querySelector(`.${x.id}-close-icon`),u.closeIcon.addEventListener("click",()=>{p.afterClose!==null&&p.afterClose(),ae(!0)}))}function ye(){p.actionClick(),ae(!0)}function He(){return u.snackbar!==null&&u.snackbar.classList.length===1&&u.snackbar.classList.contains("show")}function $t(t=0){He()&&(p.snackbarId===0||p.snackbarId===t)&&(u.snackbar.classList.add("hide"),p.fadeTimeoutId=setTimeout(()=>u.snackbar.className="",450))}function ae(t=!1){p.visibleTimeoutId!==-1&&(clearTimeout(p.visibleTimeoutId),p.visibleTimeoutId=-1),p.fadeTimeoutId!==-1&&(clearTimeout(p.fadeTimeoutId),p.fadeTimeoutId=-1),u.actionText.removeEventListener("click",ye),t&&u.snackbar.classList.remove("show")}var Be=y("modal"),be={selectedClick:null},k={id:"modal"},Je=`
  <div id="${k.id}-dialog" tabindex="-1">
    <div class="${k.id}-dialog-container">
      <div class="${k.id}-dialog-header">
        <div class="${k.id}-dialog-title"></div>
        <div class="${k.id}-dialog-close-icon"><span class="material-icons" title="Dismiss">close</span></div>
      </div>
      <div class="${k.id}-dialog-body"></div>
    </div>
  </div>
`,g={overlay:null,container:null,body:null};function Te(t,e,s){Be.log(`showModal(): ${t}`),Xe(),be.selectedClick=s,Qe(e),g.container.querySelector(`.${k.id}-dialog-title`).innerHTML=t,g.overlay.classList.add("show"),g.overlay.addEventListener("keydown",Se),g.overlay.focus(),ke(!0)}function Xe(){g.container===null&&(document.body.insertAdjacentHTML("beforeend",Je),g.overlay=document.getElementById(`${k.id}-dialog`),g.container=g.overlay.querySelector(`.${k.id}-dialog-container`),g.body=g.overlay.querySelector(`.${k.id}-dialog-body`),g.overlay.addEventListener("click",t=>{t.target===g.overlay&&B()}),g.overlay.addEventListener("animationend",()=>{g.overlay.classList.contains("hide")&&(g.overlay.className="",ke(!1))}),g.overlay.querySelector(`.${k.id}-dialog-close-icon`).addEventListener("click",B))}function Qe(t){let e="";t.forEach(s=>{let r=s.icon!==void 0?`<span class="material-icons">${s.icon}</span>`:"",a=r.length!==0?"icon":"";s.id===null?e+=`<div class="${k.id}-${s.class} ${a}">${r}${s.text}</div>`:e+=`<div id="${s.id}" class="${k.id}-dialog-single-choice ${a}">${r}<span class="text">${s.text}</span></div>`}),g.body.innerHTML=e,t.forEach(s=>{s.id!==null&&g.body.querySelector(`#${s.id}`).addEventListener("click",ze)})}function ze(){B(),setTimeout(()=>be.selectedClick(this.id),150)}function Se(t){t.stopPropagation(),t.key==="Escape"&&B()}function B(){g.overlay.removeEventListener("keydown",Se),g.overlay.classList.replace("show","hide")}function ke(t){let e=window.innerWidth-document.documentElement.clientWidth;document.documentElement.style.overflowY=t?"hidden":"",document.documentElement.style.paddingRight=t?`${e}px`:"",document.getElementById("site-header").style.paddingRight=t?`${e}px`:""}var W=y("site-interaction"),C=document.documentElement.classList,w={settings:{},siteTheme:null,galleryLayout:null};function Rt(t){W.log("init()"),w.settings=t,w.siteTheme=new Le("footer-site-theme-toggle"),w.galleryLayout=new Pe("footer-gallery-layout-toggle"),ge("#menu-primary-menu a.reshuffle-menu-item","click",ve),he(".entry-meta-controls .track-share-control","click",Ke)}function Vt(t){w.settings=t,w.siteTheme.setCurrent(),w.galleryLayout.setCurrent()}function Ke(t){let e=t.target.getAttribute("data-artist-track-title"),s=t.target.getAttribute("data-track-url");Ze.show({string:e,filterString:!0,url:s})}function Ie(t,e,s){let r=Object.values(t).find(a=>a.id===e);return r!==void 0?r:s}function Ee(t,e){let s=Object.values(t).findIndex(a=>a.id===e.id),r=Object.keys(t);return s+1<r.length?t[r[s+1]]:t[r[0]]}var Le=class extends H{constructor(e){super(e,!1);this.themes={light:{id:"light",text:"light",class:"site-theme-light"},dark:{id:"dark",text:"dark",class:"site-theme-dark"},auto:{id:"auto",text:"auto"}},this.setCurrent(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>this.matchMediaPrefColorScheme(s))}setCurrent(){this.currentTheme=Ie(this.themes,w.settings.user.theme,this.themes.auto),this.update()}matchMediaPrefColorScheme(){this.currentTheme.id===this.themes.auto.id&&this.update()}toggle(){this.currentTheme=Ee(this.themes,this.currentTheme),w.settings.user.theme=this.currentTheme.id,this.update()}update(){let e=this.currentTheme;this.currentTheme.id===this.themes.auto.id&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?this.themes.dark:this.themes.light),te(D.UF_SITE_THEME,e.id),C.contains(e.class)===!1&&(W.log(`SiteThemeToggle.update() - newSiteTheme: ${e.id}`),C.remove(this.themes.light.class,this.themes.dark.class),C.add(e.class)),this.textContent=this.currentTheme.text}},Pe=class extends H{constructor(e){super(e,!1);this.minWidth=`(max-width: ${U("--site-gallery-layout-min-width")})`,this.layouts={oneColumn:{id:"1-column",text:"1 column",class:"gallery-layout-1-column"},twoColumn:{id:"2-column",text:"2 column",class:"gallery-layout-2-column"},threeColumn:{id:"3-column",text:"3 / 4 column",class:"gallery-layout-3-column"}},this.setCurrent(),window.matchMedia(this.minWidth).addEventListener("change",s=>this.matchMediaMinWidth(s))}setCurrent(){this.currentLayout=Ie(this.layouts,w.settings.user.galleryLayout,this.layouts.threeColumn),this.update()}matchMediaMinWidth(e){C.contains("user-layout")&&(e.matches?C.remove(this.currentLayout.class):C.add(this.currentLayout.class))}toggle(e){this.currentLayout=Ee(this.layouts,this.currentLayout),w.settings.user.galleryLayout=this.currentLayout.id,this.update(),e.type==="click"&&this.element.scrollIntoView()}update(){te(D.UF_GALLERY_LAYOUT,this.currentLayout.id),C.contains("user-layout")&&C.contains(this.currentLayout.class)===!1&&(W.log(`GalleryLayoutToggle.update() - newGalleryLayout: ${this.currentLayout.id}`),C.remove(this.layouts.oneColumn.class,this.layouts.twoColumn.class,this.layouts.threeColumn.class),window.matchMedia(this.minWidth).matches===!1&&C.add(this.currentLayout.class)),this.textContent=this.currentLayout.text}},Ze=(()=>{let t=/\s{1,}[–·-]\s{1,}/i,e,s,r,a,i;return{show:n};function n(o){({title:e="Share / Play Track",string:s=null,filterString:r=!1,url:a=null,verb:i="Play"}=o),Te(e,f(i),I)}function f(o){return[{id:"copyToClipboardId",icon:"content_copy",text:"<b>Copy Link</b> to Clipboard"},{id:"shareOnEmailId",icon:"share",text:"<b>Share</b> on Email"},{id:"amazonMusicId",icon:"link",text:`<b>${o}</b> on Amazon Music`},{id:"appleMusicId",icon:"link",text:`<b>${o}</b> on Apple Music`},{id:"spotifyId",icon:"link",text:`<b>${o}</b> on Spotify`},{id:"tidalId",icon:"link",text:`<b>${o}</b> on Tidal`},{id:"youTubeMusicId",icon:"link",text:`<b>${o}</b> on YouTube Music`}]}function I(o){W.log(`singleChoiceListClick(): ${o} - title: "${e}" - string: "${s}" - filterString: ${r} - url: ${a} - verb: ${i}`);let E=encodeURIComponent(r?s.replace(t," "):s);switch(o){case"copyToClipboardId":navigator.clipboard.writeText(a).then(()=>{re("Track link copied to clipboard",3)},P=>{W.error(`shareModal.copyToClipboard() failed because ${P}`),re("Unable to copy Track link to clipboard",5)});break;case"shareOnEmailId":window.location.href=`mailto:?subject=${encodeURIComponent(s)}&body=${a}%0d%0a`;break;case"amazonMusicId":window.open(`https://music.amazon.com/search/${E}`,"_blank");break;case"appleMusicId":window.open(`https://music.apple.com/ca/search?term=${E}`,"_blank");break;case"spotifyId":window.open(`https://open.spotify.com/search/${E}`,"_blank");break;case"tidalId":window.open(`https://google.com/search?q=${E}%20site:tidal.com`,"_blank");break;case"youTubeMusicId":window.open(`https://music.youtube.com/search?q=${E}`,"_blank");break}}})();var R=y("crossfade"),F={MIN:0,MAX:100},q={NONE:-1,AUTO:0,TRACK:1},ne={NONE:-1,EQUAL_POWER:0,LINEAR:1},M={NONE:-1,INIT:0,FADING:1},Ce={intervalEqPow:33,intervalLinear:100},we=(t,e)=>{let s=t,r=e,a=M.NONE,i=-1,n=null,f=null,I=0,o=0,E=q.NONE,P=null,_=0;return{isFading(){return a!==M.NONE},init:X,start:Q,stop:l,mute:N};function X(S,b,T=null){return a===M.NONE&&z(T)===!0?(R.log(`init() - type: ${R.getObjectKeyForValue(q,S)} - fadeInUid: ${T} - preset: ${b.length} sec ${R.getObjectKeyForValue(ne,b.curve)} (Name: ${b.name})`),a=M.INIT,o=s.masterVolume,E=S,P=b,f.setVolume(0),T===null?r.nextTrack(!0):r.jumpToTrack(r.trackFromUid(T),!0,!1),{fadeOutPlayer:r.indexMap.get(n.getUid()),fadeInPlayer:r.indexMap.get(f.getUid())}):null}function Q(){a===M.INIT&&(a=M.FADING,n.getPosition(S=>{let b=P.curve===ne.EQUAL_POWER?Ce.intervalEqPow:Ce.intervalLinear;_=(S+b)/1e3;let T=n.getDuration()-_,O=T-b/1e3;E===q.AUTO?I=O:E===q.TRACK&&(I=T>P.length?P.length:O),R.log(`start() - fadeStartTime: ${_.toFixed(2)} sec - timeRemaining: ${T.toFixed(2)} sec - fadeLength: ${I.toFixed(2)} sec - updateInterval: ${b} ms`),i=setInterval(P.curve===ne.EQUAL_POWER?Me:_e,b)}))}function l(){R.log(`stop() - fadeState: ${R.getObjectKeyForValue(M,a)}`),a!==M.NONE&&(i!==-1&&(clearInterval(i),i=-1),n!==null&&(n.pause(),n.seekTo(0),setTimeout(()=>{n.setVolume(s.masterVolume),n=null},200)),f!==null&&(f=null),a=M.NONE,I=0,o=0,E=q.NONE,P=null,_=0)}function N(S){n!==null&&n.mute(S)}function z(S){return n=r.current,f=S===null?r.next:r.playerFromUid(S),!!(n.getPlayable()&&f.getPlayable())}function Me(){n.getPosition(S=>{let b=S/1e3-_,T=b>=0?b:0,O=o-o*(T/I),K=O>=F.MIN?O:F.MIN,Oe=Math.round(Math.sqrt(o*K)),ie=Math.round(Math.sqrt(o*(o-K)));T>=I&&K<=F.MIN&&ie>=o?(n.setVolume(F.MIN),f.setVolume(o),l()):(n.setVolume(Oe),f.setVolume(ie))})}function _e(){n.getPosition(S=>{let b=S/1e3-_,T=Math.round(o*(b/I)),O=o-T;b>I&&O<F.MIN&&T>o?(n.setVolume(F.MIN),f.setVolume(o),l()):(n.setVolume(O),f.setVolume(T))})}};var G=y("mediaplayers"),J=class{constructor(e,s,r){this.trackId=e,this.iframeId=s,this.embeddedPlayer=r,this.playable=!0,this.duration=0,this.artist=null,this.title=null,this.thumbnailSrc=null,this.thumbnailClass="type-default",this.thumbnail=new Image,this.thumbnail.decoding="async"}getTrackId(){return this.trackId}getIframeId(){return this.iframeId}getUid(){return this.iframeId}getEmbeddedPlayer(){return this.embeddedPlayer}getPlayable(){return this.playable}setPlayable(e){this.playable=e}getDuration(){return this.duration}setDuration(e){this.duration=e}getArtist(){return this.artist}setArtist(e){this.artist=e}getTitle(){return this.title}setTitle(e){this.title=e}getThumbnailSrc(){return this.thumbnailSrc}getThumbnailClass(){return this.thumbnailClass}seekTo(e){this.embeddedPlayer.seekTo(e)}setVolume(e){this.embeddedPlayer.setVolume(e)}setThumbnail(e){this.thumbnailSrc=e.src,this.thumbnailClass=e.class,this.thumbnail.src=e.src}},et=class extends J{constructor(e,s,r,a){super(e,s,r);this.previousPlayerState=-1,super.setThumbnail(xe(a))}pause(){this.embeddedPlayer.pauseVideo()}stop(){this.embeddedPlayer.stopVideo()}isPlaybackError(e){return G.log(`YouTube.play() - current playerState: ${this.embeddedPlayer.getPlayerState()} - previous playerState: ${this.previousPlayerState} - playable: ${this.playable}`),this.embeddedPlayer.getPlayerState()===-1&&this.previousPlayerState===-1&&this.playable===!0?(G.warn(`MediaPlayer.YouTube.play() - Unable to play track: ${this.getArtist()} - "${this.getTitle()}" with videoId: ${this.embeddedPlayer.getVideoData().video_id} -- No YouTube API error given!`),this.playable=!1,e(this,this.embeddedPlayer.getVideoUrl()),!0):(this.previousPlayerState=this.embeddedPlayer.getPlayerState(),!1)}play(e){this.isPlaybackError(e)===!1&&(this.playable===!0?this.embeddedPlayer.playVideo():e(this,this.embeddedPlayer.getVideoUrl()))}getVolume(e){e(this.embeddedPlayer.getVolume())}mute(e){e?this.embeddedPlayer.mute():this.embeddedPlayer.unMute()}getPosition(e){e(this.embeddedPlayer.getCurrentTime()*1e3,this.duration)}},tt=class extends J{constructor(e,s,r,a){super(e,s,r);this.soundId=this.getSoundId(a),this.volume=F.MAX,this.muted=!1}getSoundId(e){if(e!==void 0){let r=new URL(decodeURIComponent(e)).searchParams.get("url");if(r!==null){let a=r.split("/"),i="tracks".toUpperCase();for(let n=0;n<a.length;n++)if(a[n].toUpperCase()===i)return parseInt(a[n+1])}}return G.error(`MediaPlayer.SoundCloud.getSoundId() failed for: ${this.iframeId}`),null}setThumbnail(){this.embeddedPlayer.getCurrentSound(e=>super.setThumbnail(nt(e)))}getUid(){return this.soundId}pause(){this.embeddedPlayer.pause()}play(e){this.playable===!0?this.embeddedPlayer.getCurrentSound(s=>{s.playable===!0?this.embeddedPlayer.play():e(this,s.permalink_url)}):e(this,"https://soundcloud.com")}stop(){this.pause(),super.seekTo(0)}seekTo(e){super.seekTo(e*1e3)}getVolume(e){this.embeddedPlayer.getVolume(s=>e(s))}setVolume(e){e!==0&&(this.volume=e),(this.muted===!1||e===0)&&super.setVolume(e)}mute(e){this.muted=!!e,e?this.setVolume(0):this.setVolume(this.volume)}getPosition(e){this.embeddedPlayer.getPosition(s=>e(s,this.duration))}},st=class extends J{constructor(e){super(null,null,e);this.numTracks=3,this.currentTrack=2}get embedded(){return this.embeddedPlayer}getNumTracks(){return this.numTracks}getCurrentTrack(){return this.currentTrack}setArtistTitleThumbnail(e,s){at(e,this),super.setThumbnail(xe(`https://www.youtube.com/embed/${s}`))}getStatus(){return{currentTrack:this.getCurrentTrack(),numTracks:this.getNumTracks(),artist:this.getArtist(),title:this.getTitle(),thumbnail:{src:this.getThumbnailSrc(),class:this.getThumbnailClass()}}}},rt=/\s{1,}[–·-]\s{1,}/;function at(t,e,s=rt){if(t!==null&&t.length>0){e.artist=t,e.title="";let r=t.match(s);r!==null&&(e.artist=t.slice(0,r.index),e.title=t.slice(r.index+r[0].length))}}var $e="/wp-content/themes/ultrafunk/inc/img/photo_filled_grey.png";function xe(t,e=$e){let r=new URL(decodeURIComponent(t)).pathname.split("/embed/");return r.length===2&&r[1].length===11?{src:`https://img.youtube.com/vi/${r[1]}/default.jpg`,class:"type-youtube",uid:r[1]}:{src:e,class:"type-default"}}function nt(t,e=$e){let s=t.artwork_url!==null?t.artwork_url:t.user.avatar_url;return s!=null?{src:s,class:"type-soundcloud"}:{src:e,class:"type-default"}}var Yt=()=>{let t=null,e=null,s=null,r=[],a=new Map,i=0;return{indexMap:a,init:n,get crossfade(){return s},add:f,getPlayerIndex(){return i},setPlayerIndex(l){i=l},get current(){return r[i]},get next(){return r[i+1]},getNumTracks(){return r.length},getCurrentTrack(){return i+1},playerFromUid(l){return r[a.get(l)]},trackFromUid(l){return a.get(l)+1},isCurrent(l){return l===this.current.getUid()},uIdFromIframeId:I,stop:o,mute:E,getStatus:P,prevTrack:_,nextTrack:X,jumpToTrack:Q};function n(l,N){G.log("init()"),t=l,e=N,s=we(l,this)}function f(l){G.log(l),r.push(l),a.set(l.getUid(),r.length-1)}function I(l){return r.find(N=>N.iframeId===l).getUid()}function o(){this.current.stop(),s.stop()}function E(){this.current.mute(t.masterMute),s.mute(t.masterMute)}function P(){return{currentTrack:this.getCurrentTrack(),numTracks:this.getNumTracks(),artist:this.current.getArtist(),title:this.current.getTitle(),thumbnail:{src:this.current.getThumbnailSrc(),class:this.current.getThumbnailClass()}}}function _(l){return i>0?(i--,e(l),!0):!1}function X(l){return i++,i<this.getNumTracks()?(e(l),!0):!1}function Q(l,N,z=!0){return l>0&&l<=this.getNumTracks()?(i=l-1,e(N,z),!0):!1}};export{y as a,it as b,ut as c,ct as d,dt as e,ft as f,D as g,pt as h,ce as i,vt as j,yt as k,j as l,ge as m,he as n,kt as o,pe as p,It as q,ve as r,Et as s,Lt as t,H as u,Te as v,re as w,$t as x,w as y,Rt as z,Vt as A,Ze as B,q as C,et as D,tt as E,st as F,at as G,xe as H,Yt as I};
//# sourceMappingURL=chunk-OIMQKODB.js.map
